/*! jQuery v1.7.1 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cv(a){if(!ck[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){cl||(cl=c.createElement("iframe"),cl.frameBorder=cl.width=cl.height=0),b.appendChild(cl);if(!cm||!cl.createElement){cm=(cl.contentWindow||cl.contentDocument).document,cm.write((c.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),cm.close()}d=cm.createElement(a),cm.body.appendChild(d),e=f.css(d,"display"),b.removeChild(cl)}ck[a]=e}return ck[a]}function cu(a,b){var c={};f.each(cq.concat.apply([],cq.slice(0,b)),function(){c[this]=a});return c}function ct(){cr=b}function cs(){setTimeout(ct,0);return cr=f.now()}function cj(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ci(){try{return new a.XMLHttpRequest}catch(b){}}function cc(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}}return c}function cb(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function ca(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bE.test(a)?d(a,e):ca(a+"["+(typeof e=="object"||f.isArray(e)?b:"")+"]",e,c,d)})}else{if(!c&&b!=null&&typeof b=="object"){for(var e in b){ca(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function b_(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])}e&&f.extend(!0,a,e)}function b$(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bT,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=b$(a,c,d,e,l,g)))}(k||!l)&&!g["*"]&&(l=b$(a,c,d,e,"*",g));return l}function bZ(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bP),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}}function bC(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?bx:by,g=0,h=e.length;if(d>0){if(c!=="border"){for(;g<h;g++){c||(d-=parseFloat(f.css(a,"padding"+e[g]))||0),c==="margin"?d+=parseFloat(f.css(a,c+e[g]))||0:d-=parseFloat(f.css(a,"border"+e[g]+"Width"))||0}}return d+"px"}d=bz(a,b,b);if(d<0||d==null){d=a.style[b]||0}d=parseFloat(d)||0;if(c){for(;g<h;g++){d+=parseFloat(f.css(a,"padding"+e[g]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+e[g]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+e[g]))||0)}}return d+"px"}function bp(a,b){b.src?f.ajax({url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;if(b.nodeType===1){b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase();if(c==="object"){b.outerHTML=a.outerHTML}else{if(c!=="input"||a.type!=="checkbox"&&a.type!=="radio"){if(c==="option"){b.selected=a.defaultSelected}else{if(c==="input"||c==="textarea"){b.defaultValue=a.defaultValue}}}else{a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)}}b.removeAttribute(f.expando)}}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c+(i[c][d].namespace?".":"")+i[c][d].namespace,i[c][d],i[c][d].data)}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?parseFloat(d):j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a&&typeof a=="object"&&"setInterval" in a},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()}e.error("Invalid JSON: "+b)},parseXML:function(c){var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h){var i=a.length;if(typeof c=="object"){for(var j in c){e.access(a,j,c[j],f,g,d)}return a}if(d!==b){f=!h&&f&&e.isFunction(d);for(var k=0;k<i;k++){g(a[k],c,f?d.call(a[k],k,g(a[k],c)):d,h)}return a}return i?g(a[0],c):b},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test("Â ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?m(g):h==="function"&&(!a.unique||!o.has(g))&&c.push(g)}},n=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,l=j||0,j=0,k=c.length;for(;c&&l<k;l++){if(c[l].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}i=!1,c&&(a.once?e===!0?o.disable():c=[]:d&&d.length&&(e=d.shift(),o.fireWith(e[0],e[1])))},o={add:function(){if(c){var a=c.length;m(arguments),i?k=c.length:e&&e!==!0&&(j=a,n(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){i&&f<=k&&(k--,f<=l&&l--),c.splice(f--,1);if(a.unique){break}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&o.disable();return this},locked:function(){return !d},fireWith:function(b,c){d&&(i?a.once||d.push([b,c]):(!a.once||!e)&&n(b,c));return this},fire:function(){o.fireWith(this,arguments);return this},fired:function(){return !!e}};return o};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p,q=c.createElement("div"),r=c.documentElement;q.setAttribute("className","t"),q.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=q.getElementsByTagName("*"),e=q.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=q.getElementsByTagName("input")[0],b={leadingWhitespace:q.firstChild.nodeType===3,tbody:!q.getElementsByTagName("tbody").length,htmlSerialize:!!q.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:q.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete q.test}catch(s){b.deleteExpando=!1}!q.addEventListener&&q.attachEvent&&q.fireEvent&&(q.attachEvent("onclick",function(){b.noCloneEvent=!1}),q.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),q.appendChild(i),k=c.createDocumentFragment(),k.appendChild(q.lastChild),b.checkClone=k.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,k.removeChild(i),k.appendChild(q),q.innerHTML="",a.getComputedStyle&&(j=c.createElement("div"),j.style.width="0",j.style.marginRight="0",q.style.width="2px",q.appendChild(j),b.reliableMarginRight=(parseInt((a.getComputedStyle(j,null)||{marginRight:0}).marginRight,10)||0)===0);if(q.attachEvent){for(o in {submit:1,change:1,focusin:1}){n="on"+o,p=n in q,p||(q.setAttribute(n,"return;"),p=typeof q[n]=="function"),b[o+"Bubbles"]=p}}k.removeChild(q),k=g=h=j=q=i=null,f(function(){var a,d,e,g,h,i,j,k,m,n,o,r=c.getElementsByTagName("body")[0];!r||(j=1,k="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",m="visibility:hidden;border:0;",n="style='"+k+"border:5px solid #000;padding:0;'",o="<div "+n+"><div></div></div><table "+n+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",a=c.createElement("div"),a.style.cssText=m+"width:0;height:0;position:static;top:0;margin-top:"+j+"px",r.insertBefore(a,r.firstChild),q=c.createElement("div"),a.appendChild(q),q.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",l=q.getElementsByTagName("td"),p=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",b.reliableHiddenOffsets=p&&l[0].offsetHeight===0,q.innerHTML="",q.style.width=q.style.paddingLeft="1px",f.boxModel=b.boxModel=q.offsetWidth===2,typeof q.style.zoom!="undefined"&&(q.style.display="inline",q.style.zoom=1,b.inlineBlockNeedsLayout=q.offsetWidth===2,q.style.display="",q.innerHTML="<div style='width:4px;'></div>",b.shrinkWrapBlocks=q.offsetWidth!==2),q.style.cssText=k+m,q.innerHTML=o,d=q.firstChild,e=d.firstChild,h=d.nextSibling.firstChild.firstChild,i={doesNotAddBorder:e.offsetTop!==5,doesAddBorderForTableAndCells:h.offsetTop===5},e.style.position="fixed",e.style.top="20px",i.fixedPosition=e.offsetTop===20||e.offsetTop===15,e.style.position=e.style.top="",d.style.overflow="hidden",d.style.position="relative",i.subtractsBorderForOverflowNotVisible=e.offsetTop===-5,i.doesNotIncludeMarginInBodyOffset=r.offsetTop!==j,r.removeChild(a),q=a=null,f.extend(b,i))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return}}}if(!c){delete j[k].data;if(!m(j[k])){return}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h=null;if(typeof a=="undefined"){if(this.length){h=f.data(this[0]);if(this[0].nodeType===1&&!f._data(this[0],"parsedAttrs")){e=this[0].attributes;for(var i=0,j=e.length;i<j;i++){g=e[i].name,g.indexOf("data-")===0&&(g=f.camelCase(g.substring(5)),l(this[0],g,h[g]))}f._data(this[0],"parsedAttrs",!0)}}return h}if(typeof a=="object"){return this.each(function(){f.data(this,a)})}d=a.split("."),d[1]=d[1]?"."+d[1]:"";if(c===b){h=this.triggerHandler("getData"+d[1]+"!",[d[0]]),h===b&&this.length&&(h=f.data(this[0],a),h=l(this[0],a,h));return h===b&&d[1]?this.data(d[0]):h}return this.each(function(){var b=f(this),e=[d[0],c];b.triggerHandler("setData"+d[1]+"!",e),f.data(this,a,c),b.triggerHandler("changeData"+d[1]+"!",e)})},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){typeof a!="string"&&(c=a,a="fx");if(c===b){return f.queue(this[0],a)}return this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)}}m();return d.promise()}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,a,b,!0,f.attr)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,a,b,!0,f.prop)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.nodeName.toLowerCase()]||f.valHooks[this.type];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h}}})}if(g){c=f.valHooks[g.nodeName.toLowerCase()]||f.valHooks[g.type];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;h<g;h++){e=d[h],e&&(c=f.propFix[e]||e,f.attr(a,e,""),a.removeAttribute(v?e:c),u.test(e)&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/\bhover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)}return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=[],j,k,l,m,n,o,p,q,r,s,t;g[0]=c,c.delegateTarget=this;if(e&&!c.target.disabled&&(!c.button||c.type!=="click")){m=f(this),m.context=this.ownerDocument||this;for(l=c.target;l!=this;l=l.parentNode||this){o={},q=[],m[0]=l;for(j=0;j<e;j++){r=d[j],s=r.selector,o[s]===b&&(o[s]=r.quick?H(l,r.quick):m.is(s)),o[s]&&q.push(r)}q.length&&i.push({elem:l,matches:q})}}d.length>e&&i.push({elem:this,matches:d.slice(e)});for(j=0;j<i.length&&!c.isPropagationStopped();j++){p=i[j],c.currentTarget=p.elem;for(k=0;k<p.matches.length&&!c.isImmediatePropagationStopped();k++){r=p.matches[k];if(h||!c.namespace&&!r.namespace||c.namespace_re&&c.namespace_re.test(r.namespace)){c.data=r.data,c.handleObj=r,n=((f.event.special[r.origType]||{}).handle||r.handler).apply(p.elem,g),n!==b&&(c.result=n,n===!1&&(c.preventDefault(),c.stopPropagation()))}}}return c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0)}),d._submit_attached=!0)})},teardown:function(){if(f.nodeName(this,"form")){return !1}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=c,c=b);for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on.call(this,a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.type+"."+e.namespace:e.type,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9){if(typeof a.textContent=="string"){return a.textContent}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))}var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.POS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling(a.parentNode.firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var V="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){if(f.isFunction(a)){return this.each(function(b){var c=f(this);c.text(a.call(this,b,c.text()))})}if(typeof a!="object"&&a!==b){return this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))}return f.text(this)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){if(a===b){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(W,""):null}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(var c=0,d=this.length;c<d;c++){this[c].nodeType===1&&(f.cleanData(this[c].getElementsByTagName("*")),this[c].innerHTML=a)}}catch(e){this.empty().append(a)}}else{f.isFunction(a)?this.each(function(b){var c=f(this);c.html(a.call(this,b,c.html()))}):this.empty().append(a)}return this},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}}k.length&&f.each(k,bp)}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||!bc.test("<"+a.nodeName)?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g;b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);var h=[],i;for(var j=0,k;(k=a[j])!=null;j++){typeof k=="number"&&(k+="");if(!k){continue}if(typeof k=="string"){if(!_.test(k)){k=b.createTextNode(k)}else{k=k.replace(Y,"<$1></$2>");var l=(Z.exec(k)||["",""])[1].toLowerCase(),m=bg[l]||bg._default,n=m[0],o=b.createElement("div");b===c?bh.appendChild(o):U(b).appendChild(o),o.innerHTML=m[1]+k+m[2];while(n--){o=o.lastChild}if(!f.support.tbody){var p=$.test(k),q=l==="table"&&!p?o.firstChild&&o.firstChild.childNodes:m[1]==="<table>"&&!p?o.childNodes:[];for(i=q.length-1;i>=0;--i){f.nodeName(q[i],"tbody")&&!q[i].childNodes.length&&q[i].parentNode.removeChild(q[i])}}!f.support.leadingWhitespace&&X.test(k)&&o.insertBefore(b.createTextNode(X.exec(k)[0]),o.firstChild),k=o.childNodes}}var r;if(!f.support.appendChecked){if(k[0]&&typeof(r=k.length)=="number"){for(i=0;i<r;i++){bn(k[i])}}else{bn(k)}}k.nodeType?h.push(k):h=f.merge(h,k)}if(d){g=function(a){return !a.type||be.test(a.type)};for(j=0;h[j];j++){if(e&&f.nodeName(h[j],"script")&&(!h[j].type||h[j].type.toLowerCase()==="text/javascript")){e.push(h[j].parentNode?h[j].parentNode.removeChild(h[j]):h[j])}else{if(h[j].nodeType===1){var s=f.grep(h[j].getElementsByTagName("script"),g);h.splice.apply(h,[j+1,0].concat(s))}d.appendChild(h[j])}}}return h},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bq=/alpha\([^)]*\)/i,br=/opacity=([^)]*)/,bs=/([A-Z]|^ms)/g,bt=/^-?\d+(?:px)?$/i,bu=/^-?\d/,bv=/^([\-+])=([\-+.\de]+)/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Left","Right"],by=["Top","Bottom"],bz,bA,bB;f.fn.css=function(a,c){if(arguments.length===2&&c===b){return this}return f.access(this,a,c,!0,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)})},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bz(a,"opacity","opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]}h=typeof d,h==="string"&&(g=bv.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e}if(bz){return bz(a,c)}},swap:function(a,b,c){var d={};for(var e in b){d[e]=a.style[e],a.style[e]=b[e]}c.call(a);for(e in b){a.style[e]=d[e]}}}),f.curCSS=f.css,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){var e;if(c){if(a.offsetWidth!==0){return bC(a,b,d)}f.swap(a,bw,function(){e=bC(a,b,d)});return e}},set:function(a,b){if(!bt.test(b)){return b}b=parseFloat(b);if(b>=0){return b+"px"}}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return br.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bq,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bq.test(g)?g.replace(bq,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){var c;f.swap(a,{display:"inline-block"},function(){b?c=bz(a,"margin-right","marginRight"):c=a.style.marginRight});return c}})}),c.defaultView&&c.defaultView.getComputedStyle&&(bA=function(a,b){var c,d,e;b=b.replace(bs,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b)));return c}),c.documentElement.currentStyle&&(bB=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f===null&&g&&(e=g[b])&&(f=e),!bt.test(f)&&bu.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f||0,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),bz=bA||bB,f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)});var bD=/%20/g,bE=/\[\]$/,bF=/\r?\n/g,bG=/#.*$/,bH=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bI=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bJ=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bK=/^(?:GET|HEAD)$/,bL=/^\/\//,bM=/\?/,bN=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bO=/^(?:select|textarea)/i,bP=/\s+/,bQ=/([?&])_=[^&]*/,bR=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bS=f.fn.load,bT={},bU={},bV,bW,bX=["*/"]+["*"];try{bV=e.href}catch(bY){bV=c.createElement("a"),bV.href="",bV=bV.href}bW=bR.exec(bV.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bS){return bS.apply(this,arguments)}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bN,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bO.test(this.nodeName)||bI.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bF,"\r\n")}}):{name:b.name,value:c.replace(bF,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b_(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b_(a,b);return a},ajaxSettings:{url:bV,isLocal:bJ.test(bW[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bX},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bZ(bT),ajaxTransport:bZ(bU),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?cb(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cc(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bH.exec(n)){o[c[1].toLowerCase()]=c[2]}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this},d.url=((a||d.url)+"").replace(bG,"").replace(bL,bW[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bP),d.crossDomain==null&&(r=bR.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bW[1]&&r[2]==bW[2]&&(r[3]||(r[1]==="http:"?80:443))==(bW[3]||(bW[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),b$(bT,d,c,v);if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bK.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bM.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bQ,"$1_="+x);d.url=y+(y===d.url?(bM.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bX+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=b$(bU,d,c,v);if(!p){w(-1,"No Transport")}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)})}else{for(var g in a){ca(g,a[g],c,e)}}return d.join("&").replace(bD,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cd=f.now(),ce=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cd++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=b.contentType==="application/x-www-form-urlencoded"&&typeof b.data=="string";if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(ce.test(b.url)||e&&ce.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(ce,l),b.url===j&&(e&&(k=k.replace(ce,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var cf=a.ActiveXObject?function(){for(var a in ch){ch[a](0,1)}}:!1,cg=0,ch;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ci()||cj()}:ci,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,cf&&delete ch[i]);if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n),m.text=h.responseText;try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cg,cf&&(ch||(ch={},f(a).unload(cf)),ch[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ck={},cl,cm,cn=/^(?:toggle|show|hide)$/,co=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,cp,cq=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cr;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(cu("show",3),a,b,c)}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),e===""&&f.css(d,"display")==="none"&&f._data(d,"olddisplay",cv(d.nodeName)))}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(cu("hide",3),a,b,c)}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(cu("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]),h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cv(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cn.test(h)?(o=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),o?(f._data(this,"toggle"+i,o==="show"?"hide":"show"),j[o]()):j[h]()):(k=co.exec(h),l=j.cur(),k?(m=parseFloat(k[2]),n=k[3]||(f.cssNumber[i]?"":"px"),n!=="px"&&(f.style(this,i,(m||1)+n),l=(m||1)/j.cur()*l,f.style(this,i,l+n)),k[1]&&(m=(k[1]==="-="?-1:1)*m+l),j.custom(l,m,n)):j.custom(l,h,""))}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:cu("show",1),slideUp:cu("hide",1),slideToggle:cu("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cr||cs(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){e.options.hide&&f._data(e.elem,"fxshow"+e.prop)===b&&f._data(e.elem,"fxshow"+e.prop,e.start)},h()&&f.timers.push(h)&&!cp&&(cp=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cr||cs(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(cp),cp=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(["width","height"],function(a,b){f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)}}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?f.fn.offset=function(a){var b=this[0],c;if(a){return this.each(function(b){f.offset.setOffset(this,a,b)})}if(!b||!b.ownerDocument){return null}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b)}try{c=b.getBoundingClientRect()}catch(d){}var e=b.ownerDocument,g=e.documentElement;if(!c||!f.contains(g,b)){return c?{top:c.top,left:c.left}:{top:0,left:0}}var h=e.body,i=cy(e),j=g.clientTop||h.clientTop||0,k=g.clientLeft||h.clientLeft||0,l=i.pageYOffset||f.support.boxModel&&g.scrollTop||h.scrollTop,m=i.pageXOffset||f.support.boxModel&&g.scrollLeft||h.scrollLeft,n=c.top+l-j,o=c.left+m-k;return{top:n,left:o}}:f.fn.offset=function(a){var b=this[0];if(a){return this.each(function(b){f.offset.setOffset(this,a,b)})}if(!b||!b.ownerDocument){return null}if(b===b.ownerDocument.body){return f.offset.bodyOffset(b)}var c,d=b.offsetParent,e=b,g=b.ownerDocument,h=g.documentElement,i=g.body,j=g.defaultView,k=j?j.getComputedStyle(b,null):b.currentStyle,l=b.offsetTop,m=b.offsetLeft;while((b=b.parentNode)&&b!==i&&b!==h){if(f.support.fixedPosition&&k.position==="fixed"){break}c=j?j.getComputedStyle(b,null):b.currentStyle,l-=b.scrollTop,m-=b.scrollLeft,b===d&&(l+=b.offsetTop,m+=b.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(b.nodeName))&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),e=d,d=b.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&c.overflow!=="visible"&&(l+=parseFloat(c.borderTopWidth)||0,m+=parseFloat(c.borderLeftWidth)||0),k=c}if(k.position==="relative"||k.position==="static"){l+=i.offsetTop,m+=i.offsetLeft}f.support.fixedPosition&&k.position==="fixed"&&(l+=Math.max(h.scrollTop,i.scrollTop),m+=Math.max(h.scrollLeft,i.scrollLeft));return{top:l,left:m}},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a})}}),f.each(["Left","Top"],function(a,c){var d="scroll"+c;f.fn[d]=function(c){var e,g;if(c===b){e=this[0];if(!e){return null}g=cy(e);return g?"pageXOffset" in g?g[a?"pageYOffset":"pageXOffset"]:f.support.boxModel&&g.document.documentElement[d]||g.document.body[d]:e[d]}return this.each(function(){g=cy(this),g?g.scrollTo(a?f(g).scrollLeft():c,a?c:f(g).scrollTop()):this[d]=c})}}),f.each(["Height","Width"],function(a,c){var d=c.toLowerCase();f.fn["inner"+c]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,d,"padding")):this[d]():null},f.fn["outer"+c]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,d,a?"margin":"border")):this[d]():null},f.fn[d]=function(a){var e=this[0];if(!e){return a==null?null:this}if(f.isFunction(a)){return this.each(function(b){var c=f(this);c[d](a.call(this,b,c[d]()))})}if(f.isWindow(e)){var g=e.document.documentElement["client"+c],h=e.document.body;return e.document.compatMode==="CSS1Compat"&&g||h&&h["client"+c]||g}if(e.nodeType===9){return Math.max(e.documentElement["client"+c],e.body["scroll"+c],e.documentElement["scroll"+c],e.body["offset"+c],e.documentElement["offset"+c])}if(a===b){var i=f.css(e,d),j=parseFloat(i);return f.isNumeric(j)?j:i}return this.css(d,typeof a=="string"?a:a+"px")}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);(function(){function ag(b,n,m){if(b===n){return 0!==b||1/b==1/n}if(null==b||null==n){return b===n}b._chain&&(b=b._wrapped);n._chain&&(n=n._wrapped);if(b.isEqual&&at.isFunction(b.isEqual)){return b.isEqual(n)}if(n.isEqual&&at.isFunction(n.isEqual)){return n.isEqual(b)}var l=ao.call(b);if(l!=ao.call(n)){return !1}switch(l){case"[object String]":return b==""+n;case"[object Number]":return b!=+b?n!=+n:0==b?1/b==1/n:b==+n;case"[object Date]":case"[object Boolean]":return +b==+n;case"[object RegExp]":return b.source==n.source&&b.global==n.global&&b.multiline==n.multiline&&b.ignoreCase==n.ignoreCase}if("object"!=typeof b||"object"!=typeof n){return !1}for(var k=m.length;k--;){if(m[k]==b){return !0}}m.push(b);var k=0,j=!0;if("[object Array]"==l){if(k=b.length,j=k==n.length){for(;k--&&(j=k in b==k in n&&ag(b[k],n[k],m));){}}}else{if("constructor" in b!="constructor" in n||b.constructor!=n.constructor){return !1}for(var i in b){if(at.has(b,i)&&(k++,!(j=at.has(n,i)&&ag(b[i],n[i],m)))){break}}if(j){for(i in n){if(at.has(n,i)&&!k--){break}}j=!k}}m.pop();return j}var ad=this,U=ad._,al={},ap=Array.prototype,ak=Object.prototype,ar=ap.slice,R=ap.unshift,ao=ak.toString,g=ak.hasOwnProperty,S=ap.forEach,Q=ap.map,aj=ap.reduce,ai=ap.reduceRight,af=ap.filter,ae=ap.every,ac=ap.some,ah=ap.indexOf,aa=ap.lastIndexOf,ak=Array.isArray,f=Object.keys,ab=Function.prototype.bind,at=function(b){return new an(b)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=at),exports._=at):ad._=at;at.VERSION="1.3.3";var aq=at.each=at.forEach=function(b,l,k){if(b!=null){if(S&&b.forEach===S){b.forEach(l,k)}else{if(b.length===+b.length){for(var j=0,i=b.length;j<i;j++){if(j in b&&l.call(k,b[j],j,b)===al){break}}}else{for(j in b){if(at.has(b,j)&&l.call(k,b[j],j,b)===al){break}}}}}};at.map=at.collect=function(j,l,i){var k=[];if(j==null){return k}if(Q&&j.map===Q){return j.map(l,i)}aq(j,function(b,n,m){k[k.length]=l.call(i,b,n,m)});if(j.length===+j.length){k.length=j.length}return k};at.reduce=at.foldl=at.inject=function(b,l,k,j){var i=arguments.length>2;b==null&&(b=[]);if(aj&&b.reduce===aj){j&&(l=at.bind(l,j));return i?b.reduce(l,k):b.reduce(l)}aq(b,function(n,m,o){if(i){k=l.call(j,k,n,m,o)}else{k=n;i=true}});if(!i){throw new TypeError("Reduce of empty array with no initial value")}return k};at.reduceRight=at.foldr=function(b,m,l,k){var j=arguments.length>2;b==null&&(b=[]);if(ai&&b.reduceRight===ai){k&&(m=at.bind(m,k));return j?b.reduceRight(m,l):b.reduceRight(m)}var i=at.toArray(b).reverse();k&&!j&&(m=at.bind(m,k));return j?at.reduce(i,m,l,k):at.reduce(i,m)};at.find=at.detect=function(j,l,i){var k;Y(j,function(b,n,m){if(l.call(i,b,n,m)){k=b;return true}});return k};at.filter=at.select=function(j,l,i){var k=[];if(j==null){return k}if(af&&j.filter===af){return j.filter(l,i)}aq(j,function(b,n,m){l.call(i,b,n,m)&&(k[k.length]=b)});return k};at.reject=function(j,l,i){var k=[];if(j==null){return k}aq(j,function(b,n,m){l.call(i,b,n,m)||(k[k.length]=b)});return k};at.every=at.all=function(j,l,i){var k=true;if(j==null){return k}if(ae&&j.every===ae){return j.every(l,i)}aq(j,function(b,n,m){if(!(k=k&&l.call(i,b,n,m))){return al}});return !!k};var Y=at.some=at.any=function(b,k,j){k||(k=at.identity);var i=false;if(b==null){return i}if(ac&&b.some===ac){return b.some(k,j)}aq(b,function(m,l,n){if(i||(i=k.call(j,m,l,n))){return al}});return !!i};at.include=at.contains=function(j,k){var i=false;if(j==null){return i}if(ah&&j.indexOf===ah){return j.indexOf(k)!=-1}return i=Y(j,function(b){return b===k})};at.invoke=function(b,j){var i=ar.call(arguments,2);return at.map(b,function(k){return(at.isFunction(j)?j||k:k[j]).apply(k,i)})};at.pluck=function(b,i){return at.map(b,function(j){return j[i]})};at.max=function(b,k,j){if(!k&&at.isArray(b)&&b[0]===+b[0]){return Math.max.apply(Math,b)}if(!k&&at.isEmpty(b)){return -Infinity}var i={computed:-Infinity};aq(b,function(m,l,n){l=k?k.call(j,m,l,n):m;l>=i.computed&&(i={value:m,computed:l})});return i.value};at.min=function(b,k,j){if(!k&&at.isArray(b)&&b[0]===+b[0]){return Math.min.apply(Math,b)}if(!k&&at.isEmpty(b)){return Infinity}var i={computed:Infinity};aq(b,function(m,l,n){l=k?k.call(j,m,l,n):m;l<i.computed&&(i={value:m,computed:l})});return i.value};at.shuffle=function(j){var i=[],k;aq(j,function(b,l){k=Math.floor(Math.random()*(l+1));i[l]=i[k];i[k]=b});return i};at.sortBy=function(b,k,j){var i=at.isFunction(k)?k:function(l){return l[k]};return at.pluck(at.map(b,function(m,l,n){return{value:m,criteria:i.call(j,m,l,n)}}).sort(function(m,l){var o=m.criteria,n=l.criteria;return o===void 0?1:n===void 0?-1:o<n?-1:o>n?1:0}),"value")};at.groupBy=function(b,k){var j={},i=at.isFunction(k)?k:function(l){return l[k]};aq(b,function(m,l){var n=i(m,l);(j[n]||(j[n]=[])).push(m)});return j};at.sortedIndex=function(b,m,l){l||(l=at.identity);for(var k=0,j=b.length;k<j;){var i=k+j>>1;l(b[i])<l(m)?k=i+1:j=i}return k};at.toArray=function(b){return !b?[]:at.isArray(b)||at.isArguments(b)?ar.call(b):b.toArray&&at.isFunction(b.toArray)?b.toArray():at.values(b)};at.size=function(b){return at.isArray(b)?b.length:at.keys(b).length};at.first=at.head=at.take=function(j,i,k){return i!=null&&!k?ar.call(j,0,i):j[0]};at.initial=function(j,i,k){return ar.call(j,0,j.length-(i==null||k?1:i))};at.last=function(j,i,k){return i!=null&&!k?ar.call(j,Math.max(j.length-i,0)):j[j.length-1]};at.rest=at.tail=function(j,i,k){return ar.call(j,i==null||k?1:i)};at.compact=function(b){return at.filter(b,function(i){return !!i})};at.flatten=function(b,i){return at.reduce(b,function(j,k){if(at.isArray(k)){return j.concat(i?k:at.flatten(k))}j[j.length]=k;return j},[])};at.without=function(b){return at.difference(b,ar.call(arguments,1))};at.uniq=at.unique=function(b,k,j){var j=j?at.map(b,j):b,i=[];b.length<3&&(k=true);at.reduce(j,function(n,m,l){if(k?at.last(n)!==m||!n.length:!at.include(n,m)){n.push(m);i.push(b[l])}return n},[]);return i};at.union=function(){return at.uniq(at.flatten(arguments,true))};at.intersection=at.intersect=function(b){var i=ar.call(arguments,1);return at.filter(at.uniq(b),function(j){return at.every(i,function(k){return at.indexOf(k,j)>=0})})};at.difference=function(b){var i=at.flatten(ar.call(arguments,1),true);return at.filter(b,function(j){return !at.include(i,j)})};at.zip=function(){for(var b=ar.call(arguments),k=at.max(at.pluck(b,"length")),j=Array(k),i=0;i<k;i++){j[i]=at.pluck(b,""+i)}return j};at.indexOf=function(b,k,j){if(b==null){return -1}var i;if(j){j=at.sortedIndex(b,k);return b[j]===k?j:-1}if(ah&&b.indexOf===ah){return b.indexOf(k)}j=0;for(i=b.length;j<i;j++){if(j in b&&b[j]===k){return j}}return -1};at.lastIndexOf=function(j,i){if(j==null){return -1}if(aa&&j.lastIndexOf===aa){return j.lastIndexOf(i)}for(var k=j.length;k--;){if(k in j&&j[k]===i){return k}}return -1};at.range=function(j,i,n){if(arguments.length<=1){i=j||0;j=0}for(var n=arguments[2]||1,m=Math.max(Math.ceil((i-j)/n),0),l=0,k=Array(m);l<m;){k[l++]=j;j=j+n}return k};var W=function(){};at.bind=function(b,k){var j,i;if(b.bind===ab&&ab){return ab.apply(b,ar.call(arguments,1))}if(!at.isFunction(b)){throw new TypeError}i=ar.call(arguments,2);return j=function(){if(!(this instanceof j)){return b.apply(k,i.concat(ar.call(arguments)))}W.prototype=b.prototype;var l=new W,m=b.apply(l,i.concat(ar.call(arguments)));return Object(m)===m?m:l}};at.bindAll=function(b){var i=ar.call(arguments,1);i.length==0&&(i=at.functions(b));aq(i,function(j){b[j]=at.bind(b[j],b)});return b};at.memoize=function(b,j){var i={};j||(j=at.identity);return function(){var k=j.apply(this,arguments);return at.has(i,k)?i[k]:i[k]=b.apply(this,arguments)}};at.delay=function(j,i){var k=ar.call(arguments,2);return setTimeout(function(){return j.apply(null,k)},i)};at.defer=function(b){return at.delay.apply(at,[b,1].concat(ar.call(arguments,1)))};at.throttle=function(s,q){var p,o,n,m,l,k,b=at.debounce(function(){l=m=false},q);return function(){p=this;o=arguments;n||(n=setTimeout(function(){n=null;l&&s.apply(p,o);b()},q));m?l=true:k=s.apply(p,o);b();m=true;return k}};at.debounce=function(j,i,l){var k;return function(){var m=this,b=arguments;l&&!k&&j.apply(m,b);clearTimeout(k);k=setTimeout(function(){k=null;l||j.apply(m,b)},i)}};at.once=function(j){var i=false,k;return function(){if(i){return k}i=true;return k=j.apply(this,arguments)}};at.wrap=function(j,i){return function(){var b=[j].concat(ar.call(arguments,0));return i.apply(this,b)}};at.compose=function(){var b=arguments;return function(){for(var i=arguments,j=b.length-1;j>=0;j--){i=[b[j].apply(this,i)]}return i[0]}};at.after=function(j,i){return j<=0?i():function(){if(--j<1){return i.apply(this,arguments)}}};at.keys=f||function(b){if(b!==Object(b)){throw new TypeError("Invalid object")}var j=[],i;for(i in b){at.has(b,i)&&(j[j.length]=i)}return j};at.values=function(b){return at.map(b,at.identity)};at.functions=at.methods=function(b){var j=[],i;for(i in b){at.isFunction(b[i])&&j.push(i)}return j.sort()};at.extend=function(b){aq(ar.call(arguments,1),function(i){for(var j in i){b[j]=i[j]}});return b};at.pick=function(b){var i={};aq(at.flatten(ar.call(arguments,1)),function(j){j in b&&(i[j]=b[j])});return i};at.defaults=function(b){aq(ar.call(arguments,1),function(i){for(var j in i){b[j]==null&&(b[j]=i[j])}});return b};at.clone=function(b){return !at.isObject(b)?b:at.isArray(b)?b.slice():at.extend({},b)};at.tap=function(j,i){i(j);return j};at.isEqual=function(j,i){return ag(j,i,[])};at.isEmpty=function(b){if(b==null){return true}if(at.isArray(b)||at.isString(b)){return b.length===0}for(var i in b){if(at.has(b,i)){return false}}return true};at.isElement=function(b){return !!(b&&b.nodeType==1)};at.isArray=ak||function(b){return ao.call(b)=="[object Array]"};at.isObject=function(b){return b===Object(b)};at.isArguments=function(b){return ao.call(b)=="[object Arguments]"};at.isArguments(arguments)||(at.isArguments=function(b){return !(!b||!at.has(b,"callee"))});at.isFunction=function(b){return ao.call(b)=="[object Function]"};at.isString=function(b){return ao.call(b)=="[object String]"};at.isNumber=function(b){return ao.call(b)=="[object Number]"};at.isFinite=function(b){return at.isNumber(b)&&isFinite(b)};at.isNaN=function(b){return b!==b};at.isBoolean=function(b){return b===true||b===false||ao.call(b)=="[object Boolean]"};at.isDate=function(b){return ao.call(b)=="[object Date]"};at.isRegExp=function(b){return ao.call(b)=="[object RegExp]"};at.isNull=function(b){return b===null};at.isUndefined=function(b){return b===void 0};at.has=function(j,i){return g.call(j,i)};at.noConflict=function(){ad._=U;return this};at.identity=function(b){return b};at.times=function(j,i,l){for(var k=0;k<j;k++){i.call(l,k)}};at.escape=function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};at.result=function(b,j){if(b==null){return null}var i=b[j];return at.isFunction(i)?i.call(b):i};at.mixin=function(b){aq(at.functions(b),function(i){e(i,at[i]=b[i])})};var d=0;at.uniqueId=function(j){var i=d++;return j?j+i:i};at.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Z=/.^/,am={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},X;for(X in am){am[am[X]]=X}var c=/\\|'|\r|\n|\t|\u2028|\u2029/g,a=/\\(\\|'|r|n|t|u2028|u2029)/g,V=function(b){return b.replace(a,function(j,i){return am[i]})};at.template=function(b,k,j){j=at.defaults(j||{},at.templateSettings);b="__p+='"+b.replace(c,function(l){return"\\"+am[l]}).replace(j.escape||Z,function(m,l){return"'+\n_.escape("+V(l)+")+\n'"}).replace(j.interpolate||Z,function(m,l){return"'+\n("+V(l)+")+\n'"}).replace(j.evaluate||Z,function(m,l){return"';\n"+V(l)+"\n;__p+='"})+"';\n";j.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+b+"return __p;\n",i=new Function(j.variable||"obj","_",b);if(k){return i(k,at)}k=function(l){return i.call(this,l,at)};k.source="function("+(j.variable||"obj")+"){\n"+b+"}";return k};at.chain=function(b){return at(b).chain()};var an=function(b){this._wrapped=b};at.prototype=an.prototype;var T=function(b,i){return i?at(b).chain():b},e=function(b,i){an.prototype[b]=function(){var j=ar.call(arguments);R.call(j,this._wrapped);return T(i.apply(at,j),this._chain)}};at.mixin(at);aq("pop,push,reverse,shift,sort,splice,unshift".split(","),function(j){var i=ap[j];an.prototype[j]=function(){var k=this._wrapped;i.apply(k,arguments);var b=k.length;(j=="shift"||j=="splice")&&b===0&&delete k[0];return T(k,this._chain)}});aq(["concat","join","slice"],function(j){var i=ap[j];an.prototype[j]=function(){return T(i.apply(this._wrapped,arguments),this._chain)}});an.prototype.chain=function(){this._chain=true;return this};an.prototype.value=function(){return this._wrapped}}).call(this);$(document).ajaxSend(function(c,f,b){function a(g){var m=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var k=0;k<l.length;k++){var j=jQuery.trim(l[k]);if(j.substring(0,g.length+1)==(g+"=")){m=decodeURIComponent(j.substring(g.length+1));break}}}return m}function e(i){var k=document.location.host;var l=document.location.protocol;var j="//"+k;var g=l+j;return(i==g||i.slice(0,g.length+1)==g+"/")||(i==j||i.slice(0,j.length+1)==j+"/")||!(/^(\/\/|http:|https:).*/.test(i))}function d(g){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(g))}if(!d(b.type)&&e(b.url)){f.setRequestHeader("X-CSRFToken",a("csrftoken"))}});if(jQuery){(function(a){a.extend(a.fn,{miniColors:function(w,C){var p=function(F,I,H){var E=t(F.val());if(!E){E="ffffff"}var D=i(E);var G=a('<a class="miniColors-trigger" style="background-color: #'+E+'" href="#"></a>');G.insertAfter(F);F.addClass("miniColors").data("original-maxlength",F.attr("maxlength")||null).data("original-autocomplete",F.attr("autocomplete")||null).data("letterCase","uppercase").data("trigger",G).data("hsb",D).data("change",I.change?I.change:null).attr("maxlength",7).attr("autocomplete","off").val("#"+u(E,I.letterCase));if(I.readonly){F.prop("readonly",true)}if(I.disabled){f(F)}G.bind("click.miniColors",function(o){o.preventDefault();if(F.val()===""){F.val("#")}A(F)});F.bind("focus.miniColors",function(o){if(F.val()===""){F.val("#")}A(F)});F.bind("blur.miniColors",function(J){var o=t(F.val());F.val(o?"#"+u(o,F.data("letterCase")):"")});F.bind("keydown.miniColors",function(o){if(o.keyCode===9){n(F)}});F.bind("keyup.miniColors",function(o){l(F)});F.bind("paste.miniColors",function(o){setTimeout(function(){l(F)},5)})};var B=function(o){n();o=a(o);o.data("trigger").remove();o.attr("autocomplete",o.data("original-autocomplete")).attr("maxlength",o.data("original-maxlength")).removeData().removeClass("miniColors").unbind(".miniColors");a(document).unbind(".miniColors")};var s=function(o){o.prop("disabled",false).data("trigger").css("opacity",1)};var f=function(o){n(o);o.prop("disabled",true).data("trigger").css("opacity",0.5)};var A=function(F){if(F.prop("disabled")){return false}n();var o=a('<div class="miniColors-selector"></div>');o.append('<div class="miniColors-colors" style="background-color: #FFF;"><div class="miniColors-colorPicker"></div></div>').append('<div class="miniColors-hues"><div class="miniColors-huePicker"></div></div>').css({top:F.is(":visible")?F.offset().top+F.outerHeight():F.data("trigger").offset().top+F.data("trigger").outerHeight(),left:F.is(":visible")?F.offset().left:F.data("trigger").offset().left,display:"none"}).addClass(F.attr("class"));var E=F.data("hsb");o.find(".miniColors-colors").css("backgroundColor","#"+g({h:E.h,s:100,b:100}));var D=F.data("colorPosition");if(!D){D=d(E)}o.find(".miniColors-colorPicker").css("top",D.y+"px").css("left",D.x+"px");var G=F.data("huePosition");if(!G){G=v(E)}o.find(".miniColors-huePicker").css("top",G.y+"px");F.data("selector",o).data("huePicker",o.find(".miniColors-huePicker")).data("colorPicker",o.find(".miniColors-colorPicker")).data("mousebutton",0);a("BODY").append(o);o.fadeIn(100);o.bind("selectstart",function(){return false});a(document).bind("mousedown.miniColors touchstart.miniColors",function(H){F.data("mousebutton",1);if(a(H.target).parents().andSelf().hasClass("miniColors-colors")){H.preventDefault();F.data("moving","colors");c(F,H)}if(a(H.target).parents().andSelf().hasClass("miniColors-hues")){H.preventDefault();F.data("moving","hues");m(F,H)}if(a(H.target).parents().andSelf().hasClass("miniColors-selector")){H.preventDefault();return}if(a(H.target).parents().andSelf().hasClass("miniColors")){return}n(F)});a(document).bind("mouseup.miniColors touchend.miniColors",function(H){H.preventDefault();F.data("mousebutton",0).removeData("moving")}).bind("mousemove.miniColors touchmove.miniColors",function(H){H.preventDefault();if(F.data("mousebutton")===1){if(F.data("moving")==="colors"){c(F,H)}if(F.data("moving")==="hues"){m(F,H)}}})};var n=function(o){if(!o){o=".miniColors"}a(o).each(function(){var D=a(this).data("selector");a(this).removeData("selector");a(D).fadeOut(100,function(){a(this).remove()})});a(document).unbind("mousedown.miniColors touchstart.miniColors").unbind("mousemove.miniColors touchmove.miniColors")};var c=function(G,I){var F=G.data("colorPicker");F.hide();var D={x:I.pageX,y:I.pageY};if(I.originalEvent.changedTouches){D.x=I.originalEvent.changedTouches[0].pageX;D.y=I.originalEvent.changedTouches[0].pageY}D.x=D.x-G.data("selector").find(".miniColors-colors").offset().left-5;D.y=D.y-G.data("selector").find(".miniColors-colors").offset().top-5;if(D.x<=-5){D.x=-5}if(D.x>=144){D.x=144}if(D.y<=-5){D.y=-5}if(D.y>=144){D.y=144}G.data("colorPosition",D);F.css("left",D.x).css("top",D.y).show();var H=Math.round((D.x+5)*0.67);if(H<0){H=0}if(H>100){H=100}var o=100-Math.round((D.y+5)*0.67);if(o<0){o=0}if(o>100){o=100}var E=G.data("hsb");E.s=H;E.b=o;e(G,E,true)};var m=function(E,G){var H=E.data("huePicker");H.hide();var o={y:G.pageY};if(G.originalEvent.changedTouches){o.y=G.originalEvent.changedTouches[0].pageY}o.y=o.y-E.data("selector").find(".miniColors-colors").offset().top-1;if(o.y<=-1){o.y=-1}if(o.y>=149){o.y=149}E.data("huePosition",o);H.css("top",o.y).show();var F=Math.round((150-o.y-1)*2.4);if(F<0){F=0}if(F>360){F=360}var D=E.data("hsb");D.h=F;e(E,D,true)};var e=function(D,o,F){D.data("hsb",o);var E=g(o);if(F){D.val("#"+u(E,D.data("letterCase")))}D.data("trigger").css("backgroundColor","#"+E);if(D.data("selector")){D.data("selector").find(".miniColors-colors").css("backgroundColor","#"+g({h:o.h,s:100,b:100}))}if(D.data("change")){if(E===D.data("lastChange")){return}D.data("change").call(D,"#"+E,z(o));D.data("lastChange",E)}};var l=function(F){F.val("#"+y(F.val()));var G=t(F.val());if(!G){return false}var E=i(G);var I=F.data("hsb");if(E.h===I.h&&E.s===I.s&&E.b===I.b){return true}var D=d(E);var o=a(F.data("colorPicker"));o.css("top",D.y+"px").css("left",D.x+"px");F.data("colorPosition",D);var J=v(E);var H=a(F.data("huePicker"));H.css("top",J.y+"px");F.data("huePosition",J);e(F,E);return true};var u=function(o,D){if(D==="lowercase"){return o.toLowerCase()}if(D==="uppercase"){return o.toUpperCase()}return o};var d=function(D){var o=Math.ceil(D.s/0.67);if(o<0){o=0}if(o>150){o=150}var E=150-Math.ceil(D.b/0.67);if(E<0){E=0}if(E>150){E=150}return{x:o-5,y:E-5}};var v=function(o){var D=150-(o.h/2.4);if(D<0){h=0}if(D>150){h=150}return{y:D-1}};var y=function(o){return o.replace(/[^A-F0-9]/ig,"")};var t=function(o){o=y(o);if(!o){return null}if(o.length===3){o=o[0]+o[0]+o[1]+o[1]+o[2]+o[2]}return o.length===6?o:null};var z=function(o){var E={};var I=Math.round(o.h);var H=Math.round(o.s*255/100);var D=Math.round(o.b*255/100);if(H===0){E.r=E.g=E.b=D}else{var J=D;var G=(255-H)*D/255;var F=(J-G)*(I%60)/60;if(I===360){I=0}if(I<60){E.r=J;E.b=G;E.g=G+F}else{if(I<120){E.g=J;E.b=G;E.r=J-F}else{if(I<180){E.g=J;E.r=G;E.b=G+F}else{if(I<240){E.b=J;E.r=G;E.g=J-F}else{if(I<300){E.b=J;E.g=G;E.r=G+F}else{if(I<360){E.r=J;E.g=G;E.b=J-F}else{E.r=0;E.g=0;E.b=0}}}}}}}return{r:Math.round(E.r),g:Math.round(E.g),b:Math.round(E.b)}};var b=function(o){var D=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];a.each(D,function(E,F){if(F.length===1){D[E]="0"+F}});return D.join("")};var x=function(o){o=parseInt(((o.indexOf("#")>-1)?o.substring(1):o),16);return{r:o>>16,g:(o&65280)>>8,b:(o&255)}};var j=function(E){var D={h:0,s:0,b:0};var F=Math.min(E.r,E.g,E.b);var o=Math.max(E.r,E.g,E.b);var G=o-F;D.b=o;D.s=o!==0?255*G/o:0;if(D.s!==0){if(E.r===o){D.h=(E.g-E.b)/G}else{if(E.g===o){D.h=2+(E.b-E.r)/G}else{D.h=4+(E.r-E.g)/G}}}else{D.h=-1}D.h*=60;if(D.h<0){D.h+=360}D.s*=100/255;D.b*=100/255;return D};var i=function(D){var o=j(x(D));if(o.s===0){o.h=360}return o};var g=function(o){return b(z(o))};switch(w){case"readonly":a(this).each(function(){if(!a(this).hasClass("miniColors")){return}a(this).prop("readonly",C)});return a(this);case"disabled":a(this).each(function(){if(!a(this).hasClass("miniColors")){return}if(C){f(a(this))}else{s(a(this))}});return a(this);case"value":if(C===undefined){if(!a(this).hasClass("miniColors")){return}var q=a(this),k=t(q.val());return k?"#"+u(k,q.data("letterCase")):null}a(this).each(function(){if(!a(this).hasClass("miniColors")){return}a(this).val(C);l(a(this))});return a(this);case"destroy":a(this).each(function(){if(!a(this).hasClass("miniColors")){return}B(a(this))});return a(this);default:if(!w){w={}}a(this).each(function(){if(a(this)[0].tagName.toLowerCase()!=="input"){return}if(a(this).data("trigger")){return}p(a(this),w,C)});return a(this)}}})})(jQuery);
/*! Fabric.js Copyright 2008-2012, Bitsonnet (Juriy Zaytsev, Maxim Chernyak) */
}var fabric=fabric||{version:"0.8.32"};if(typeof exports!="undefined"){exports.fabric=fabric}if(typeof document!="undefined"&&typeof window!="undefined"){fabric.document=document;fabric.window=window}else{fabric.document=require("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>");fabric.window=fabric.document.createWindow()}fabric.isTouchSupported="ontouchstart" in fabric.document.documentElement;if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
/*!
 * Copyright (c) 2009 Simo Kinnunen.
 * Licensed under the MIT license.
 */
var Cufon=(function(){var l=function(){return l.replace.apply(null,arguments)};var w=l.DOM={ready:(function(){var B=false,D={loaded:1,complete:1};var A=[],C=function(){if(B){return}B=true;for(var E;E=A.shift();E()){}};if(fabric.document.addEventListener){fabric.document.addEventListener("DOMContentLoaded",C,false);fabric.window.addEventListener("pageshow",C,false)}if(!fabric.window.opera&&fabric.document.readyState){(function(){D[fabric.document.readyState]?C():setTimeout(arguments.callee,10)})()}if(fabric.document.readyState&&fabric.document.createStyleSheet){(function(){try{fabric.document.body.doScroll("left");C()}catch(E){setTimeout(arguments.callee,1)}})()}p(fabric.window,"load",C);return function(E){if(!arguments.length){C()}else{B?E():A.push(E)}}})()};var m=l.CSS={Size:function(B,A){this.value=parseFloat(B);this.unit=String(B).match(/[a-z%]*$/)[0]||"px";this.convert=function(C){return C/A*this.value};this.convertFrom=function(C){return C/this.value*A};this.toString=function(){return this.value+this.unit}},getStyle:function(A){return new a(A.style)},quotedList:j(function(D){var C=[],B=/\s*((["'])([\s\S]*?[^\\])\2|[^,]+)\s*/g,A;while(A=B.exec(D)){C.push(A[3]||A[1])}return C}),ready:(function(){var C=false;var B=[],D=function(){C=true;for(var F;F=B.shift();F()){}};var A=Object.prototype.propertyIsEnumerable?f("style"):{length:0};var E=f("link");w.ready(function(){var I=0,H;for(var G=0,F=E.length;H=E[G],G<F;++G){if(!H.disabled&&H.rel.toLowerCase()=="stylesheet"){++I}}if(fabric.document.styleSheets.length>=A.length+I){D()}else{setTimeout(arguments.callee,10)}});return function(F){if(C){F()}else{B.push(F)}}})(),supports:function(C,B){var A=fabric.document.createElement("span").style;if(A[C]===undefined){return false}A[C]=B;return A[C]===B},textAlign:function(D,C,A,B){if(C.get("textAlign")=="right"){if(A>0){D=" "+D}}else{if(A<B-1){D+=" "}}return D},textDecoration:function(F,E){if(!E){E=this.getStyle(F)}var B={underline:null,overline:null,"line-through":null};for(var A=F;A.parentNode&&A.parentNode.nodeType==1;){var D=true;for(var C in B){if(B[C]){continue}if(E.get("textDecoration").indexOf(C)!=-1){B[C]=E.get("color")}D=false}if(D){break}E=this.getStyle(A=A.parentNode)}return B},textShadow:j(function(E){if(E=="none"){return null}var D=[],F={},A,B=0;var C=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/ig;while(A=C.exec(E)){if(A[0]==","){D.push(F);F={},B=0}else{if(A[1]){F.color=A[1]}else{F[["offX","offY","blur"][B++]]=A[2]}}}D.push(F);return D}),color:j(function(B){var A={};A.color=B.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(D,C,E){A.opacity=parseFloat(E);return"rgb("+C+")"});return A}),textTransform:function(B,A){return B[{uppercase:"toUpperCase",lowercase:"toLowerCase"}[A.get("textTransform")]||"toString"]()}};function s(B){var A=this.face=B.face;this.glyphs=B.glyphs;this.w=B.w;this.baseSize=parseInt(A["units-per-em"],10);this.family=A["font-family"].toLowerCase();this.weight=A["font-weight"];this.style=A["font-style"]||"normal";this.viewBox=(function(){var D=A.bbox.split(/\s+/);var C={minX:parseInt(D[0],10),minY:parseInt(D[1],10),maxX:parseInt(D[2],10),maxY:parseInt(D[3],10)};C.width=C.maxX-C.minX,C.height=C.maxY-C.minY;C.toString=function(){return[this.minX,this.minY,this.width,this.height].join(" ")};return C})();this.ascent=-parseInt(A.ascent,10);this.descent=-parseInt(A.descent,10);this.height=-this.ascent+this.descent}function e(){var B={},A={oblique:"italic",italic:"oblique"};this.add=function(C){(B[C.style]||(B[C.style]={}))[C.weight]=C};this.get=function(G,H){var F=B[G]||B[A[G]]||B.normal||B.italic||B.oblique;if(!F){return null}H={normal:400,bold:700}[H]||parseInt(H,10);if(F[H]){return F[H]}var D={1:1,99:0}[H%100],J=[],E,C;if(D===undefined){D=H>400}if(H==500){H=400}for(var I in F){I=parseInt(I,10);if(!E||I<E){E=I}if(!C||I>C){C=I}J.push(I)}if(H<E){H=E}if(H>C){H=C}J.sort(function(L,K){return(D?(L>H&&K>H)?L<K:L>K:(L<H&&K<H)?L>K:L<K)?-1:1});return F[J[0]]}}function q(){function C(E,F){if(E.contains){return E.contains(F)}return E.compareDocumentPosition(F)&16}function A(F){var E=F.relatedTarget;if(!E||C(this,E)){return}B(this)}function D(E){B(this)}function B(E){setTimeout(function(){l.replace(E,d.get(E).options,true)},10)}this.attach=function(E){if(E.onmouseenter===undefined){p(E,"mouseover",A);p(E,"mouseout",A)}else{p(E,"mouseenter",D);p(E,"mouseleave",D)}}}function z(){var C={},A=0;function B(D){return D.cufid||(D.cufid=++A)}this.get=function(D){var E=B(D);return C[E]||(C[E]={})}}function a(A){var C={},B={};this.get=function(D){return C[D]!=undefined?C[D]:A[D]};this.getSize=function(E,D){return B[E]||(B[E]=new m.Size(this.get(E),D))};this.extend=function(D){for(var E in D){C[E]=D[E]}return this}}function p(B,A,C){if(B.addEventListener){B.addEventListener(A,C,false)}else{if(B.attachEvent){B.attachEvent("on"+A,function(){return C.call(B,fabric.window.event)})}}}function t(B,A){var C=d.get(B);if(C.options){return B}if(A.hover&&A.hoverables[B.nodeName.toLowerCase()]){b.attach(B)}C.options=A;return B}function j(A){var B={};return function(C){if(!B.hasOwnProperty(C)){B[C]=A.apply(null,arguments)}return B[C]}}function c(F,E){if(!E){E=m.getStyle(F)}var B=m.quotedList(E.get("fontFamily").toLowerCase()),D;for(var C=0,A=B.length;C<A;++C){D=B[C];if(i[D]){return i[D].get(E.get("fontStyle"),E.get("fontWeight"))}}return null}function f(A){return fabric.document.getElementsByTagName(A)}function g(){var A={},D;for(var C=0,B=arguments.length;C<B;++C){for(D in arguments[C]){A[D]=arguments[C][D]}}return A}function n(D,L,B,M,E,C){var K=M.separate;if(K=="none"){return y[M.engine].apply(null,arguments)}var J=fabric.document.createDocumentFragment(),G;var H=L.split(o[K]),A=(K=="words");if(A&&u){if(/^\s/.test(L)){H.unshift("")}if(/\s$/.test(L)){H.push("")}}for(var I=0,F=H.length;I<F;++I){G=y[M.engine](D,A?m.textAlign(H[I],B,I,F):H[I],B,M,E,C,I<F-1);if(G){J.appendChild(G)}}return J}function k(B,I){var C,A,F,H;for(var D=t(B,I).firstChild;D;D=F){F=D.nextSibling;H=false;if(D.nodeType==1){if(!D.firstChild){continue}if(!/cufon/.test(D.className)){arguments.callee(D,I);continue}else{H=true}}if(!A){A=m.getStyle(B).extend(I)}if(!C){C=c(B,A)}if(!C){continue}if(H){y[I.engine](C,null,A,I,D,B);continue}var G=D.data;if(typeof G_vmlCanvasManager!="undefined"){G=G.replace(/\r/g,"\n")}if(G===""){continue}var E=n(C,G,A,I,D,B);if(E){D.parentNode.replaceChild(E,D)}else{D.parentNode.removeChild(D)}}}var u=" ".split(/\s+/).length==0;var d=new z();var b=new q();var x=[];var y={},i={},v={engine:null,hover:false,hoverables:{a:true},printable:true,selector:(fabric.window.Sizzle||(fabric.window.jQuery&&function(A){return jQuery(A)})||(fabric.window.dojo&&dojo.query)||(fabric.window.$$&&function(A){return $$(A)})||(fabric.window.$&&function(A){return $(A)})||(fabric.document.querySelectorAll&&function(A){return fabric.document.querySelectorAll(A)})||f),separate:"words",textShadow:"none"};var o={words:/\s+/,characters:""};l.now=function(){w.ready();return l};l.refresh=function(){var C=x.splice(0,x.length);for(var B=0,A=C.length;B<A;++B){l.replace.apply(null,C[B])}return l};l.registerEngine=function(B,A){if(!A){return l}y[B]=A;return l.set("engine",B)};l.registerFont=function(C){var A=new s(C),B=A.family;if(!i[B]){i[B]=new e()}i[B].add(A);return l.set("fontFamily",'"'+B+'"')};l.replace=function(C,B,A){B=g(v,B);if(!B.engine){return l}if(typeof B.textShadow=="string"&&B.textShadow){B.textShadow=m.textShadow(B.textShadow)}if(!A){x.push(arguments)}if(C.nodeType||typeof C=="string"){C=[C]}m.ready(function(){for(var E=0,D=C.length;E<D;++E){var F=C[E];if(typeof F=="string"){l.replace(B.selector(F),B,true)}else{k(F,B)}}});return l};l.replaceElement=function(B,A){A=g(v,A);if(typeof A.textShadow=="string"&&A.textShadow){A.textShadow=m.textShadow(A.textShadow)}return k(B,A)};l.engines=y;l.fonts=i;l.getOptions=function(){return g(v)};l.set=function(A,B){v[A]=B;return l};return l})();Cufon.registerEngine("canvas",(function(){var a=Cufon.CSS.supports("display","inline-block");var g=!a&&(fabric.document.compatMode=="BackCompat"||/frameset|transitional/i.test(fabric.document.doctype.publicId));var i=fabric.document.createElement("style");i.type="text/css";var f=fabric.document.createTextNode(".cufon-canvas{text-indent:0}@media screen,projection{.cufon-canvas{display:inline;display:inline-block;position:relative;vertical-align:middle"+(g?"":";font-size:1px;line-height:1px")+"}.cufon-canvas .cufon-alt{display:-moz-inline-box;display:inline-block;width:0;height:0;overflow:hidden}"+(a?".cufon-canvas canvas{position:relative}":".cufon-canvas canvas{position:absolute}")+"}@media print{.cufon-canvas{padding:0 !important}.cufon-canvas canvas{display:none}.cufon-canvas .cufon-alt{display:inline}}");try{i.appendChild(f)}catch(d){i.setAttribute("type","text/css");i.styleSheet.cssText=f.data}fabric.document.getElementsByTagName("head")[0].appendChild(i);function c(q,j){var o=0,n=0;var e=[],p=/([mrvxe])([^a-z]*)/g,l;generate:for(var k=0;l=p.exec(q);++k){var m=l[2].split(",");switch(l[1]){case"v":e[k]={m:"bezierCurveTo",a:[o+~~m[0],n+~~m[1],o+~~m[2],n+~~m[3],o+=~~m[4],n+=~~m[5]]};break;case"r":e[k]={m:"lineTo",a:[o+=~~m[0],n+=~~m[1]]};break;case"m":e[k]={m:"moveTo",a:[o=~~m[0],n=~~m[1]]};break;case"x":e[k]={m:"closePath",a:[]};break;case"e":break generate}j[e[k].m].apply(j,e[k].a)}return e}function b(n,m){for(var k=0,j=n.length;k<j;++k){var e=n[k];m[e.m].apply(m,e.a)}}return function(ac,F,X,B,K,ad){var n=(F===null);var I=ac.viewBox;var o=X.getSize("fontSize",ac.baseSize);var V=X.get("letterSpacing");V=(V=="normal")?0:o.convertFrom(parseInt(V,10));var J=0,W=0,U=0,D=0;var H=B.textShadow,S=[];Cufon.textOptions.shadowOffsets=[];Cufon.textOptions.shadows=null;if(H){Cufon.textOptions.shadows=H;for(var ab=0,Y=H.length;ab<Y;++ab){var O=H[ab];var R=o.convertFrom(parseFloat(O.offX));var Q=o.convertFrom(parseFloat(O.offY));S[ab]=[R,Q]}}var ah=Cufon.CSS.textTransform(n?K.alt:F,X).split("");var e=0,E=null;var A=0,N=1,M=[];for(var ab=0,Y=ah.length;ab<Y;++ab){if(ah[ab]==="\n"){N++;if(e>A){A=e}M.push(e);e=0;continue}var C=ac.glyphs[ah[ab]]||ac.missingGlyph;if(!C){continue}e+=E=Number(C.w||ac.w)+V}M.push(e);e=Math.max(A,e);var m=[];for(var ab=M.length;ab--;){m[ab]=e-M[ab]}if(E===null){return null}W+=(I.width-E);D+=I.minX;var w,p;if(n){w=K;p=K.firstChild}else{w=fabric.document.createElement("span");w.className="cufon cufon-canvas";w.alt=F;p=fabric.document.createElement("canvas");w.appendChild(p);if(B.printable){var Z=fabric.document.createElement("span");Z.className="cufon-alt";Z.appendChild(fabric.document.createTextNode(F));w.appendChild(Z)}}var ai=w.style;var P=p.style||{};var k=o.convert(I.height-J+U);var ag=Math.ceil(k);var T=ag/k;p.width=Math.ceil(o.convert(e+W-D)*T);p.height=ag;J+=I.minY;P.top=Math.round(o.convert(J-ac.ascent))+"px";P.left=Math.round(o.convert(D))+"px";var j=Math.ceil(o.convert(e*T));var u=j+"px";var t=o.convert(ac.height);var G=(B.lineHeight-1)*o.convert(-ac.ascent/5)*(N-1);Cufon.textOptions.width=j;Cufon.textOptions.height=(t*N)+G;Cufon.textOptions.lines=N;Cufon.textOptions.totalLineHeight=G;if(a){ai.width=u;ai.height=t+"px"}else{ai.paddingLeft=u;ai.paddingBottom=(t-1)+"px"}var ae=Cufon.textOptions.context||p.getContext("2d"),L=ag/I.height;Cufon.textOptions.fontAscent=ac.ascent*L;Cufon.textOptions.boundaries=null;for(var z=Cufon.textOptions.shadowOffsets,ab=S.length;ab--;){z[ab]=[S[ab][0]*L,S[ab][1]*L]}ae.save();ae.scale(L,L);ae.translate(-D-((1/L*p.width)/2)+(Cufon.fonts[ac.family].offsetLeft||0),-J-((Cufon.textOptions.height/L)/2)+(Cufon.fonts[ac.family].offsetTop||0));ae.lineWidth=ac.face["underline-thickness"];ae.save();function q(x,l){ae.strokeStyle=l;ae.beginPath();ae.moveTo(0,x);ae.lineTo(e,x);ae.stroke()}var s=Cufon.getTextDecoration(B),v=B.fontStyle==="italic";function af(){ae.save();ae.fillStyle=B.backgroundColor;var ak=0,ao=0,y=[{left:0}];if(B.textAlign==="right"){ae.translate(m[ao],0);y[0].left=m[ao]*L}else{if(B.textAlign==="center"){ae.translate(m[ao]/2,0);y[0].left=m[ao]/2*L}}for(var am=0,al=ah.length;am<al;++am){if(ah[am]==="\n"){ao++;var an=-ac.ascent-((ac.ascent/5)*B.lineHeight);var x=y[y.length-1];var aj={left:0};x.width=ak*L;x.height=(-ac.ascent+ac.descent)*L;if(B.textAlign==="right"){ae.translate(-e,an);ae.translate(m[ao],0);aj.left=m[ao]*L}else{if(B.textAlign==="center"){ae.translate(-ak-(m[ao-1]/2),an);ae.translate(m[ao]/2,0);aj.left=m[ao]/2*L}else{ae.translate(-ak,an)}}y.push(aj);ak=0;continue}var aq=ac.glyphs[ah[am]]||ac.missingGlyph;if(!aq){continue}var ap=Number(aq.w||ac.w)+V;if(B.backgroundColor){ae.save();ae.translate(0,ac.ascent);ae.fillRect(0,0,ap+10,-ac.ascent+ac.descent);ae.restore()}ae.translate(ap,0);ak+=ap;if(am==al-1){y[y.length-1].width=ak*L;y[y.length-1].height=(-ac.ascent+ac.descent)*L}}ae.restore();Cufon.textOptions.boundaries=y}function aa(aj){ae.fillStyle=aj||Cufon.textOptions.color||X.get("color");var an=0,ao=0;if(B.textAlign==="right"){ae.translate(m[ao],0)}else{if(B.textAlign==="center"){ae.translate(m[ao]/2,0)}}for(var al=0,y=ah.length;al<y;++al){if(ah[al]==="\n"){ao++;var ak=-ac.ascent-((ac.ascent/5)*B.lineHeight);if(B.textAlign==="right"){ae.translate(-e,ak);ae.translate(m[ao],0)}else{if(B.textAlign==="center"){ae.translate(-an-(m[ao-1]/2),ak);ae.translate(m[ao]/2,0)}else{ae.translate(-an,ak)}}an=0;continue}var am=ac.glyphs[ah[al]]||ac.missingGlyph;if(!am){continue}var x=Number(am.w||ac.w)+V;if(s){ae.save();ae.strokeStyle=ae.fillStyle;ae.lineWidth+=ae.lineWidth;ae.beginPath();if(s.underline){ae.moveTo(0,-ac.face["underline-position"]+0.5);ae.lineTo(x,-ac.face["underline-position"]+0.5)}if(s.overline){ae.moveTo(0,ac.ascent+0.5);ae.lineTo(x,ac.ascent+0.5)}if(s["line-through"]){ae.moveTo(0,-ac.descent+0.5);ae.lineTo(x,-ac.descent+0.5)}ae.stroke();ae.restore()}if(v){ae.save();ae.transform(1,0,-0.25,1,0,0)}ae.beginPath();if(am.d){if(am.code){b(am.code,ae)}else{am.code=c("m"+am.d,ae)}}ae.fill();if(B.strokeStyle){ae.closePath();ae.save();ae.lineWidth=B.strokeWidth;ae.strokeStyle=B.strokeStyle;ae.stroke();ae.restore()}if(v){ae.restore()}ae.translate(x,0);an+=x}}ae.save();af();if(H){for(var ab=0,Y=H.length;ab<Y;++ab){var O=H[ab];ae.save();ae.translate.apply(ae,S[ab]);aa(O.color);ae.restore()}}aa();ae.restore();ae.restore();ae.restore();return w}})());Cufon.registerEngine("vml",(function(){if(!fabric.document.namespaces){return}var d=fabric.document.createElement("canvas");if(d&&d.getContext&&d.getContext.apply){return}if(fabric.document.namespaces.cvml==null){fabric.document.namespaces.add("cvml","urn:schemas-microsoft-com:vml")}var b=fabric.document.createElement("cvml:shape");b.style.behavior="url(#default#VML)";if(!b.coordsize){return}b=null;fabric.document.write('<style type="text/css">.cufon-vml-canvas{text-indent:0}@media screen{cvml\\:shape,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute}.cufon-vml-canvas{position:absolute;text-align:left}.cufon-vml{display:inline-block;position:relative;vertical-align:middle}.cufon-vml .cufon-alt{position:absolute;left:-10000in;font-size:1px}a .cufon-vml{cursor:pointer}}@media print{.cufon-vml *{display:none}.cufon-vml .cufon-alt{display:inline}}</style>');function c(e,f){return a(e,/(?:em|ex|%)$/i.test(f)?"1em":f)}function a(i,j){if(/px$/i.test(j)){return parseFloat(j)}var g=i.style.left,f=i.runtimeStyle.left;i.runtimeStyle.left=i.currentStyle.left;i.style.left=j;var e=i.style.pixelLeft;i.style.left=g;i.runtimeStyle.left=f;return e}return function(V,B,Q,y,F,W,O){var j=(B===null);if(j){B=F.alt}var D=V.viewBox;var m=Q.computedFontSize||(Q.computedFontSize=new Cufon.CSS.Size(c(W,Q.get("fontSize"))+"px",V.baseSize));var N=Q.computedLSpacing;if(N==undefined){N=Q.get("letterSpacing");Q.computedLSpacing=N=(N=="normal")?0:~~m.convertFrom(a(W,N))}var v,n;if(j){v=F;n=F.firstChild}else{v=fabric.document.createElement("span");v.className="cufon cufon-vml";v.alt=B;n=fabric.document.createElement("span");n.className="cufon-vml-canvas";v.appendChild(n);if(y.printable){var T=fabric.document.createElement("span");T.className="cufon-alt";T.appendChild(fabric.document.createTextNode(B));v.appendChild(T)}if(!O){v.appendChild(fabric.document.createElement("cvml:shape"))}}var ab=v.style;var I=n.style;var f=m.convert(D.height),Y=Math.ceil(f);var M=Y/f;var L=D.minX,K=D.minY;I.height=Y;I.top=Math.round(m.convert(K-V.ascent));I.left=Math.round(m.convert(L));ab.height=m.convert(V.height)+"px";var q=Cufon.getTextDecoration(y);var A=Q.get("color");var Z=Cufon.CSS.textTransform(B,Q).split("");var e=0,J=0,s=null;var z,t,C=y.textShadow;for(var U=0,S=0,R=Z.length;U<R;++U){z=V.glyphs[Z[U]]||V.missingGlyph;if(z){e+=s=~~(z.w||V.w)+N}}if(s===null){return null}var u=-L+e+(D.width-s);var aa=m.convert(u*M),P=Math.round(aa);var H=u+","+D.height,g;var E="r"+H+"nsnf";for(U=0;U<R;++U){z=V.glyphs[Z[U]]||V.missingGlyph;if(!z){continue}if(j){t=n.childNodes[S];if(t.firstChild){t.removeChild(t.firstChild)}}else{t=fabric.document.createElement("cvml:shape");n.appendChild(t)}t.stroked="f";t.coordsize=H;t.coordorigin=g=(L-J)+","+K;t.path=(z.d?"m"+z.d+"xe":"")+"m"+g+E;t.fillcolor=A;var X=t.style;X.width=P;X.height=Y;if(C){var p=C[0],o=C[1];var x=Cufon.CSS.color(p.color),w;var G=fabric.document.createElement("cvml:shadow");G.on="t";G.color=x.color;G.offset=p.offX+","+p.offY;if(o){w=Cufon.CSS.color(o.color);G.type="double";G.color2=w.color;G.offset2=o.offX+","+o.offY}G.opacity=x.opacity||(w&&w.opacity)||1;t.appendChild(G)}J+=~~(z.w||V.w)+N;++S}ab.width=Math.max(Math.ceil(m.convert(e*M)),0);return v}})());Cufon.getTextDecoration=function(a){return{underline:a.textDecoration==="underline",overline:a.textDecoration==="overline","line-through":a.textDecoration==="line-through"}};if(typeof exports!="undefined"){exports.Cufon=Cufon}fabric.log=function(){};fabric.warn=function(){};if(typeof console!=="undefined"){if(typeof console.log!=="undefined"&&console.log.apply){fabric.log=function(){return console.log.apply(console,arguments)}}if(typeof console.warn!=="undefined"&&console.warn.apply){fabric.warn=function(){return console.warn.apply(console,arguments)}}}fabric.Observable={observe:function(a,b){if(!this.__eventListeners){this.__eventListeners={}}if(arguments.length===1){for(var c in a){this.observe(c,a[c])}}else{if(!this.__eventListeners[a]){this.__eventListeners[a]=[]}this.__eventListeners[a].push(b)}},stopObserving:function(a,b){if(!this.__eventListeners){this.__eventListeners={}}if(this.__eventListeners[a]){fabric.util.removeFromArray(this.__eventListeners[a],b)}},fire:function(c,d){if(!this.__eventListeners){this.__eventListeners={}}var b=this.__eventListeners[c];if(!b){return}for(var e=0,a=b.length;e<a;e++){b[e](d||{})}}};(function(){fabric.util={};function k(p,o){var n=p.indexOf(o);if(n!==-1){p.splice(n,1)}return p}function g(o,n){return Math.floor(Math.random()*(n-o+1))+o}var i=Math.PI/180;function c(n){return n*i}function e(o,n){return parseFloat(Number(o).toFixed(n))}function m(){return false}function d(z){z||(z={});var o=+new Date(),q=z.duration||500,y=o+q,p,x,u=z.onChange||function(){},s=z.abort||function(){return false},v=z.easing||function(B,A,D,C){return -D*Math.cos(B/C*(Math.PI/2))+D+A},n="startValue" in z?z.startValue:0,w="endValue" in z?z.endValue:100;byValue=z.byValue||w-n;z.onStart&&z.onStart();(function t(){p=+new Date();currentTime=p>y?q:(p-o);u(v(currentTime,n,byValue,q));if(p>y||s()){z.onComplete&&z.onComplete();return}l(t)})()}var f=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(o,n){fabric.window.setTimeout(o,1000/60)};var l=function(){return f.apply(fabric.window,arguments)};function b(o,q,p){if(o){var n=new Image();n.onload=function(){q&&q.call(p,n);n=n.onload=null};n.src=o}else{q&&q.call(p,o)}}function j(p,u){function o(v){return fabric[fabric.util.string.camelize(fabric.util.string.capitalize(v))]}var s=[],q=0,n=p.filter(function(v){return o(v.type).async}).length;var t=this;p.forEach(function(x,w){if(!x.type){return}var v=o(x.type);if(v.async){v.fromObject(x,function(y){s[w]=y;if(++q===n){if(u){u(s)}}})}else{s[w]=v.fromObject(x)}});if(n===0&&u){u(s)}}function a(p,o,q){var n=p.length>1?new fabric.PathGroup(p,o):p[0];if(typeof q!=="undefined"){n.setSourcePath(q)}return n}fabric.util.removeFromArray=k;fabric.util.degreesToRadians=c;fabric.util.toFixed=e;fabric.util.getRandomInt=g;fabric.util.falseFunction=m;fabric.util.animate=d;fabric.util.requestAnimFrame=l;fabric.util.loadImage=b;fabric.util.enlivenObjects=j;fabric.util.groupSVGElements=a})();(function(){var d=Array.prototype.slice;if(!Array.prototype.indexOf){Array.prototype.indexOf=function(g){if(this===void 0||this===null){throw new TypeError()}var i=Object(this),e=i.length>>>0;if(e===0){return -1}var j=0;if(arguments.length>0){j=Number(arguments[1]);if(j!==j){j=0}else{if(j!==0&&j!==(1/0)&&j!==-(1/0)){j=(j>0||-1)*Math.floor(Math.abs(j))}}}if(j>=e){return -1}var f=j>=0?j:Math.max(e-Math.abs(j),0);for(;f<e;f++){if(f in i&&i[f]===g){return f}}return -1}}if(!Array.prototype.forEach){Array.prototype.forEach=function(j,g){for(var f=0,e=this.length>>>0;f<e;f++){if(f in this){j.call(g,this[f],f,this)}}}}if(!Array.prototype.map){Array.prototype.map=function(k,j){var f=[];for(var g=0,e=this.length>>>0;g<e;g++){if(g in this){f[g]=k.call(j,this[g],g,this)}}return f}}if(!Array.prototype.every){Array.prototype.every=function(j,g){for(var f=0,e=this.length>>>0;f<e;f++){if(f in this&&!j.call(g,this[f],f,this)){return false}}return true}}if(!Array.prototype.some){Array.prototype.some=function(j,g){for(var f=0,e=this.length>>>0;f<e;f++){if(f in this&&j.call(g,this[f],f,this)){return true}}return false}}if(!Array.prototype.filter){Array.prototype.filter=function(k,j){var f=[],l;for(var g=0,e=this.length>>>0;g<e;g++){if(g in this){l=this[g];if(k.call(j,l,g,this)){f.push(l)}}}return f}}if(!Array.prototype.reduce){Array.prototype.reduce=function(g){var e=this.length>>>0,f=0,j;if(arguments.length>1){j=arguments[1]}else{do{if(f in this){j=this[f++];break}if(++f>=e){throw new TypeError()}}while(true)}for(;f<e;f++){if(f in this){j=g.call(null,j,this[f],f,this)}}return j}}function b(l,k){var g=d.call(arguments,2),f=[];for(var j=0,e=l.length;j<e;j++){f[j]=g.length?l[j][k].apply(l[j],g):l[j][k].call(l[j])}return f}function a(j,g){if(!j||j.length===0){return undefined}var f=j.length-1,e=g?j[f][g]:j[f];if(g){while(f--){if(j[f][g]>=e){e=j[f][g]}}}else{while(f--){if(j[f]>=e){e=j[f]}}}return e}function c(j,g){if(!j||j.length===0){return undefined}var f=j.length-1,e=g?j[f][g]:j[f];if(g){while(f--){if(j[f][g]<e){e=j[f][g]}}}else{while(f--){if(j[f]<e){e=j[f]}}}return e}fabric.util.array={invoke:b,min:c,max:a}})();(function(){function b(c,e){for(var d in e){c[d]=e[d]}return c}function a(c){return b({},c)}fabric.util.object={extend:b,clone:a}})();(function(){if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}}function b(d){return d.replace(/-+(.)?/g,function(e,f){return f?f.toUpperCase():""})}function c(d){return d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()}function a(d){return d.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}fabric.util.string={camelize:b,capitalize:c,escapeXml:a}}());(function(){var c=Array.prototype.slice,a=Function.prototype.apply,b=function(){};if(!Function.prototype.bind){Function.prototype.bind=function(d){var g=this,e=c.call(arguments,1),f;if(e.length){f=function(){return a.call(g,this instanceof b?this:d,e.concat(c.call(arguments)))}}else{f=function(){return a.call(g,this instanceof b?this:d,arguments)}}b.prototype=this.prototype;f.prototype=new b;return f}}})();(function(){var f=Array.prototype.slice,e=function(){};var c=(function(){for(var g in {toString:1}){if(g==="toString"){return false}}return true})();var b=function(g,k,i){for(var j in k){if(j in g.prototype&&typeof g.prototype[j]=="function"){g.prototype[j]=(function(l){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var m=k[l].apply(this,arguments);this.constructor.superclass=n;if(l!=="initialize"){return m}}})(j)}else{g.prototype[j]=k[j]}if(c){if(k.toString!==Object.prototype.toString){g.prototype.toString=k.toString}if(k.valueOf!==Object.prototype.valueOf){g.prototype.valueOf=k.valueOf}}}};function a(){}function d(){var l=null,k=f.call(arguments,0);if(typeof k[0]==="function"){l=k.shift()}function g(){this.initialize.apply(this,arguments)}g.superclass=l;g.subclasses=[];if(l){a.prototype=l.prototype;g.prototype=new a;l.subclasses.push(g)}for(var j=0,m=k.length;j<m;j++){b(g,k[j],l)}if(!g.prototype.initialize){g.prototype.initialize=e}g.prototype.constructor=g;return g}fabric.util.createClass=d})();(function(d){function i(v){var y=Array.prototype.slice.call(arguments,1),x,w,u=y.length;for(w=0;w<u;w++){x=typeof v[y[w]];if(!(/^(?:function|object|unknown)$/).test(x)){return false}}return true}var e=(function(){if(typeof fabric.document.documentElement.uniqueID!=="undefined"){return function(u){return u.uniqueID}}var t=0;return function(u){return u.__uniqueID||(u.__uniqueID="uniqueID__"+t++)}})();var f,c;(function(){var t={};f=function(u){return t[u]};c=function(v,u){t[v]=u}})();function j(t,u){return{handler:u,wrappedHandler:m(t,u)}}function m(t,u){return function(v){u.call(f(t),v||fabric.window.event)}}function k(u,t){return function(y){if(g[u]&&g[u][t]){var w=g[u][t];for(var x=0,v=w.length;x<v;x++){w[x].call(this,y||fabric.window.event)}}}}var p=(i(fabric.document.documentElement,"addEventListener","removeEventListener")&&i(fabric.window,"addEventListener","removeEventListener")),n=(i(fabric.document.documentElement,"attachEvent","detachEvent")&&i(fabric.window,"attachEvent","detachEvent")),o={},g={},b,l;if(p){b=function(u,t,v){u.addEventListener(t,v,false)};l=function(u,t,v){u.removeEventListener(t,v,false)}}else{if(n){b=function(v,t,w){var u=e(v);c(u,v);if(!o[u]){o[u]={}}if(!o[u][t]){o[u][t]=[]}var x=j(u,w);o[u][t].push(x);v.attachEvent("on"+t,x.wrappedHandler)};l=function(x,u,y){var w=e(x),z;if(o[w]&&o[w][u]){for(var v=0,t=o[w][u].length;v<t;v++){z=o[w][u][v];if(z&&z.handler===y){x.detachEvent("on"+u,z.wrappedHandler);o[w][u][v]=null}}}}}else{b=function(v,t,w){var u=e(v);if(!g[u]){g[u]={}}if(!g[u][t]){g[u][t]=[];var x=v["on"+t];if(x){g[u][t].push(x)}v["on"+t]=k(u,t)}g[u][t].push(w)};l=function(y,v,z){var x=e(y);if(g[x]&&g[x][v]){var u=g[x][v];for(var w=0,t=u.length;w<t;w++){if(u[w]===z){u.splice(w,1)}}}}}}fabric.util.addListener=b;fabric.util.removeListener=l;function s(t){return{x:a(t),y:q(t)}}function a(v){var u=fabric.document.documentElement,t=fabric.document.body||{scrollLeft:0};return v.pageX||((typeof v.clientX!="unknown"?v.clientX:0)+(u.scrollLeft||t.scrollLeft)-(u.clientLeft||0))}function q(v){var u=fabric.document.documentElement,t=fabric.document.body||{scrollTop:0};return v.pageY||((typeof v.clientY!="unknown"?v.clientY:0)+(u.scrollTop||t.scrollTop)-(u.clientTop||0))}if(fabric.isTouchSupported){a=function(t){return t.touches&&t.touches[0]&&t.touches[0].pageX||t.clientX};q=function(t){return t.touches&&t.touches[0]&&t.touches[0].pageY||t.clientY}}fabric.util.getPointer=s;fabric.util.object.extend(fabric.util,fabric.Observable)})(this);(function(){function e(k,m){var o=k.style,j;if(typeof m==="string"){k.style.cssText+=";"+m;return m.indexOf("opacity")>-1?c(k,m.match(/opacity:\s*(\d?\.?\d*)/)[1]):k}for(var n in m){if(n==="opacity"){c(k,m[n])}else{var l=(n==="float"||n==="cssFloat")?(typeof o.styleFloat==="undefined"?"cssFloat":"styleFloat"):n;o[l]=m[n]}}return k}var i=fabric.document.createElement("div"),g=typeof i.style.opacity==="string",b=typeof i.style.filter==="string",a=fabric.document.defaultView,f=a&&typeof a.getComputedStyle!=="undefined",d=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,c=function(j){return j};if(g){c=function(j,k){j.style.opacity=k;return j}}else{if(b){c=function(j,k){var l=j.style;if(j.currentStyle&&!j.currentStyle.hasLayout){l.zoom=1}if(d.test(l.filter)){k=k>=0.9999?"":("alpha(opacity="+(k*100)+")");l.filter=l.filter.replace(d,k)}else{l.filter+=" alpha(opacity="+(k*100)+")"}return j}}}fabric.util.setStyle=e})();(function(){var i=Array.prototype.slice;function g(k){return typeof k==="string"?fabric.document.getElementById(k):k}function b(k){return i.call(k,0)}try{var j=b(fabric.document.childNodes) instanceof Array}catch(a){}if(!j){b=function(l){var k=new Array(l.length),m=l.length;while(m--){k[m]=l[m]}return k}}function c(l,k){var m=fabric.document.createElement(l);for(var n in k){if(n==="class"){m.className=k[n]}else{if(n==="for"){m.htmlFor=k[n]}else{m.setAttribute(n,k[n])}}}return m}function f(k,l){if((" "+k.className+" ").indexOf(" "+l+" ")===-1){k.className+=(k.className?" ":"")+l}}function e(l,m,k){if(typeof m==="string"){m=c(m,k)}if(l.parentNode){l.parentNode.replaceChild(m,l)}m.appendChild(l);return m}function d(l){var k=0,m=0;do{k+=l.offsetTop||0;m+=l.offsetLeft||0;l=l.offsetParent}while(l);return({left:m,top:k})}(function(){var l=fabric.document.documentElement.style;var m="userSelect" in l?"userSelect":"MozUserSelect" in l?"MozUserSelect":"WebkitUserSelect" in l?"WebkitUserSelect":"KhtmlUserSelect" in l?"KhtmlUserSelect":"";function n(o){if(typeof o.onselectstart!=="undefined"){o.onselectstart=fabric.util.falseFunction}if(m){o.style[m]="none"}else{if(typeof o.unselectable=="string"){o.unselectable="on"}}return o}function k(o){if(typeof o.onselectstart!=="undefined"){o.onselectstart=null}if(m){o.style[m]=""}else{if(typeof o.unselectable=="string"){o.unselectable=""}}return o}fabric.util.makeElementUnselectable=n;fabric.util.makeElementSelectable=k})();(function(){function k(l,p){var n=fabric.document.getElementsByTagName("head")[0],m=fabric.document.createElement("script"),o=true;m.type="text/javascript";m.setAttribute("runat","server");m.onload=m.onreadystatechange=function(q){if(o){if(typeof this.readyState=="string"&&this.readyState!=="loaded"&&this.readyState!=="complete"){return}o=false;p(q||fabric.window.event);m=m.onload=m.onreadystatechange=null}};m.src=l;n.appendChild(m)}fabric.util.getScript=k})();fabric.util.getById=g;fabric.util.toArray=b;fabric.util.makeElement=c;fabric.util.addClass=f;fabric.util.wrapElement=e;fabric.util.getElementOffset=d})();(function(){function d(e,f){return e+(/\?/.test(e)?"&":"?")+f}var c=(function(){var j=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest()}];for(var e=j.length;e--;){try{var g=j[e]();if(g){return j[e]}}catch(f){}}})();function a(){}function b(g,f){f||(f={});var k=f.method?f.method.toUpperCase():"GET",j=f.onComplete||function(){},i=c(),e;i.onreadystatechange=function(){if(i.readyState===4){j(i);i.onreadystatechange=a}};if(k==="GET"){e=null;if(typeof f.parameters=="string"){g=d(g,f.parameters)}}i.open(k,g,true);if(k==="POST"||k==="PUT"){i.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}i.send(e);return i}fabric.util.request=b})();(function(){fabric.util.ease={};function d(H,G,J,I){return J*(H/=I)*H+G}function m(H,G,J,I){return -J*(H/=I)*(H-2)+G}function t(H,G,J,I){if((H/=I/2)<1){return J/2*H*H+G}return -J/2*((--H)*(H-2)-1)+G}function D(H,G,J,I){return J*(H/=I)*H*H+G}function s(H,G,J,I){return J*((H=H/I-1)*H*H+1)+G}function w(H,G,J,I){if((H/=I/2)<1){return J/2*H*H*H+G}return J/2*((H-=2)*H*H+2)+G}function v(H,G,J,I){return J*(H/=I)*H*H*H+G}function g(H,G,J,I){return -J*((H=H/I-1)*H*H*H-1)+G}function l(H,G,J,I){if((H/=I/2)<1){return J/2*H*H*H*H+G}return -J/2*((H-=2)*H*H*H-2)+G}function A(H,G,J,I){return J*(H/=I)*H*H*H*H+G}function k(H,G,J,I){return J*((H=H/I-1)*H*H*H*H+1)+G}function o(H,G,J,I){if((H/=I/2)<1){return J/2*H*H*H*H*H+G}return J/2*((H-=2)*H*H*H*H+2)+G}function f(H,G,J,I){return -J*Math.cos(H/I*(Math.PI/2))+J+G}function p(H,G,J,I){return J*Math.sin(H/I*(Math.PI/2))+G}function x(H,G,J,I){return -J/2*(Math.cos(Math.PI*H/I)-1)+G}function F(H,G,J,I){return(H==0)?G:J*Math.pow(2,10*(H/I-1))+G}function c(H,G,J,I){return(H==I)?G+J:J*(-Math.pow(2,-10*H/I)+1)+G}function j(H,G,J,I){if(H==0){return G}if(H==I){return G+J}if((H/=I/2)<1){return J/2*Math.pow(2,10*(H-1))+G}return J/2*(-Math.pow(2,-10*--H)+2)+G}function i(H,G,J,I){return -J*(Math.sqrt(1-(H/=I)*H)-1)+G}function q(H,G,J,I){return J*Math.sqrt(1-(H=H/I-1)*H)+G}function z(H,G,J,I){if((H/=I/2)<1){return -J/2*(Math.sqrt(1-H*H)-1)+G}return J/2*(Math.sqrt(1-(H-=2)*H)+1)+G}function u(I,G,M,L){var J=1.70158;var K=0;var H=M;if(I==0){return G}if((I/=L)==1){return G+M}if(!K){K=L*0.3}if(H<Math.abs(M)){H=M;var J=K/4}else{var J=K/(2*Math.PI)*Math.asin(M/H)}return -(H*Math.pow(2,10*(I-=1))*Math.sin((I*L-J)*(2*Math.PI)/K))+G}function B(I,G,M,L){var J=1.70158;var K=0;var H=M;if(I==0){return G}if((I/=L)==1){return G+M}if(!K){K=L*0.3}if(H<Math.abs(M)){H=M;var J=K/4}else{var J=K/(2*Math.PI)*Math.asin(M/H)}return H*Math.pow(2,-10*I)*Math.sin((I*L-J)*(2*Math.PI)/K)+M+G}function a(I,G,M,L){var J=1.70158;var K=0;var H=M;if(I==0){return G}if((I/=L/2)==2){return G+M}if(!K){K=L*(0.3*1.5)}if(H<Math.abs(M)){H=M;var J=K/4}else{var J=K/(2*Math.PI)*Math.asin(M/H)}if(I<1){return -0.5*(H*Math.pow(2,10*(I-=1))*Math.sin((I*L-J)*(2*Math.PI)/K))+G}return H*Math.pow(2,-10*(I-=1))*Math.sin((I*L-J)*(2*Math.PI)/K)*0.5+M+G}function n(H,G,K,J,I){if(I==undefined){I=1.70158}return K*(H/=J)*H*((I+1)*H-I)+G}function y(H,G,K,J,I){if(I==undefined){I=1.70158}return K*((H=H/J-1)*H*((I+1)*H+I)+1)+G}function C(H,G,K,J,I){if(I==undefined){I=1.70158}if((H/=J/2)<1){return K/2*(H*H*(((I*=(1.525))+1)*H-I))+G}return K/2*((H-=2)*H*(((I*=(1.525))+1)*H+I)+2)+G}function e(H,G,J,I){return J-b(I-H,0,J,I)+G}function b(H,G,J,I){if((H/=I)<(1/2.75)){return J*(7.5625*H*H)+G}else{if(H<(2/2.75)){return J*(7.5625*(H-=(1.5/2.75))*H+0.75)+G}else{if(H<(2.5/2.75)){return J*(7.5625*(H-=(2.25/2.75))*H+0.9375)+G}else{return J*(7.5625*(H-=(2.625/2.75))*H+0.984375)+G}}}}function E(H,G,J,I){if(H<I/2){return e(H*2,0,J,I)*0.5+G}return b(H*2-I,0,J,I)*0.5+J*0.5+G}fabric.util.ease={easeInQuad:d,easeOutQuad:m,easeInOutQuad:t,easeInCubic:D,easeOutCubic:s,easeInOutCubic:w,easeInQuart:v,easeOutQuart:g,easeInOutQuart:l,easeInQuint:A,easeOutQuint:k,easeInOutQuint:o,easeInSine:f,easeOutSine:p,easeInOutSine:x,easeInExpo:F,easeOutExpo:c,easeInOutExpo:j,easeInCirc:i,easeOutCirc:q,easeInOutCirc:z,easeInElastic:u,easeOutElastic:B,easeInOutElastic:a,easeInBack:n,easeOutBack:y,easeInOutBack:C,easeInBounce:e,easeOutBounce:b,easeInOutBounce:E}}());(function(k){var i=k.fabric||(k.fabric={}),q=i.util.object.extend,f=i.util.string.capitalize,s=i.util.object.clone;var m={cx:"left",x:"left",cy:"top",y:"top",r:"radius","fill-opacity":"opacity","fill-rule":"fillRule","stroke-width":"strokeWidth",transform:"transformMatrix"};function a(v){if(v in m){return m[v]}return v}function e(y,x){if(!y){return}var A,w,v={};if(y.parentNode&&/^g$/i.test(y.parentNode.nodeName)){v=i.parseAttributes(y.parentNode,x)}var z=x.reduce(function(C,B){A=y.getAttribute(B);w=parseFloat(A);if(A){if((B==="fill"||B==="stroke")&&A==="none"){A=""}if(B==="fill-rule"){A=(A==="evenodd")?"destination-over":A}if(B==="transform"){A=i.parseTransformAttribute(A)}B=a(B);C[B]=isNaN(w)?A:w}return C},{});z=q(z,q(p(y),i.parseStyleAttribute(y)));return q(v,z)}i.parseTransformAttribute=(function(){function v(O,P){var Q=P[0];O[0]=Math.cos(Q);O[1]=Math.sin(Q);O[2]=-Math.sin(Q);O[3]=Math.cos(Q)}function A(Q,R){var P=R[0],O=(R.length===2)?R[1]:R[0];Q[0]=P;Q[3]=O}function L(O,P){O[2]=P[0]}function x(O,P){O[1]=P[0]}function I(O,P){O[4]=P[0];if(P.length===2){O[5]=P[1]}}var C=[1,0,0,1,0,0],w="(?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)",M="(?:\\s+,?\\s*|,\\s*)",D="(?:(skewX)\\s*\\(\\s*("+w+")\\s*\\))",B="(?:(skewY)\\s*\\(\\s*("+w+")\\s*\\))",K="(?:(rotate)\\s*\\(\\s*("+w+")(?:"+M+"("+w+")"+M+"("+w+"))?\\s*\\))",N="(?:(scale)\\s*\\(\\s*("+w+")(?:"+M+"("+w+"))?\\s*\\))",G="(?:(translate)\\s*\\(\\s*("+w+")(?:"+M+"("+w+"))?\\s*\\))",J="(?:(matrix)\\s*\\(\\s*("+w+")"+M+"("+w+")"+M+"("+w+")"+M+"("+w+")"+M+"("+w+")"+M+"("+w+")\\s*\\))",H="(?:"+J+"|"+G+"|"+N+"|"+K+"|"+D+"|"+B+")",E="(?:"+H+"(?:"+M+H+")*)",y="^\\s*(?:"+E+"?)\\s*$",F=new RegExp(y),z=new RegExp(H);return function(P){var O=C.concat();if(!P||(P&&!F.test(P))){return O}P.replace(z,function(T){var Q=new RegExp(H).exec(T).filter(function(U){return(U!==""&&U!=null)}),R=Q[1],S=Q.slice(2).map(parseFloat);switch(R){case"translate":I(O,S);break;case"rotate":v(O,S);break;case"scale":A(O,S);break;case"skewX":L(O,S);break;case"skewY":x(O,S);break;case"matrix":O=S;break}});return O}})();function u(y){if(!y){return null}y=y.trim();var A=y.indexOf(",")>-1;y=y.split(/\s+/);var w=[];if(A){for(var x=0,v=y.length;x<v;x++){var z=y[x].split(",");w.push({x:parseFloat(z[0]),y:parseFloat(z[1])})}}else{for(var x=0,v=y.length;x<v;x+=2){w.push({x:parseFloat(y[x]),y:parseFloat(y[x+1])})}}if(w.length%2!==0){}return w}function j(w){var v={},x=w.getAttribute("style");if(x){if(typeof x=="string"){x=x.replace(/;$/,"").split(";").forEach(function(A){var z=A.split(":");v[a(z[0].trim().toLowerCase())]=z[1].trim()})}else{for(var y in x){if(typeof x[y]!=="undefined"){v[a(y.toLowerCase())]=x[y]}}}}return v}function t(A){var w=i.Canvas.activeInstance,v=w?w.getContext():null;if(!v){return}for(var x=A.length;x--;){var y=A[x].get("fill");if(/^url\(/.test(y)){var z=y.slice(5,y.length-1);if(i.gradientDefs[z]){A[x].set("fill",i.Gradient.fromElement(i.gradientDefs[z],v,A[x]))}}}}function g(w,E,F){var v=Array(w.length),z=w.length;function x(){if(--z===0){v=v.filter(function(G){return G!=null});t(v);E(v)}}for(var B=0,y,A=w.length;B<A;B++){y=w[B];var D=i[f(y.tagName)];if(D&&D.fromElement){try{if(D.async){D.fromElement(y,(function(G){return function(H){v.splice(G,0,H);x()}})(B),F)}else{v.splice(B,0,D.fromElement(y,F));x()}}catch(C){i.log(C.message||C)}}else{x()}}}function d(A){var y=A.getElementsByTagName("style"),w={},B;for(var x=0,v=y.length;x<v;x++){var z=y[0].textContent;z=z.replace(/\/\*[\s\S]*?\*\//g,"");B=z.match(/[^{]*\{[\s\S]*?\}/g);B=B.map(function(C){return C.trim()});B.forEach(function(H){var F=H.match(/([\s\S]*?)\s*\{([^}]*)\}/),H=F[1],C=F[2].trim(),J=C.replace(/;$/,"").split(/\s*;\s*/);if(!w[H]){w[H]={}}for(var E=0,G=J.length;E<G;E++){var D=J[E].split(/\s*:\s*/),K=D[0],I=D[1];w[H][K]=I}})}return w}function p(w){var C=w.nodeName,x=w.getAttribute("class"),B=w.getAttribute("id"),y={};for(var A in i.cssRules){var v=(x&&new RegExp("^\\."+x).test(A))||(B&&new RegExp("^#"+B).test(A))||(new RegExp("^"+C).test(A));if(v){for(var z in i.cssRules[A]){y[z]=i.cssRules[A][z]}}}return y}i.parseSVGDocument=(function(){var v=/^(path|circle|polygon|polyline|ellipse|rect|line|image)$/;var w="(?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)";var x=new RegExp("^\\s*("+w+"+)\\s*,?\\s*("+w+"+)\\s*,?\\s*("+w+"+)\\s*,?\\s*("+w+"+)\\s*$");function y(z,A){while(z&&(z=z.parentNode)){if(A.test(z.nodeName)){return true}}return false}return function(L,N){if(!L){return}var D=new Date(),H=i.util.toArray(L.getElementsByTagName("*"));if(H.length===0){H=L.selectNodes("//*[name(.)!='svg']");var J=[];for(var I=0,K=H.length;I<K;I++){J[I]=H[I]}H=J}var z=H.filter(function(P){return v.test(P.tagName)&&!y(P,/^(?:pattern|defs)$/)});if(!z||(z&&!z.length)){return}var A=L.getAttribute("viewBox"),F=L.getAttribute("width"),C=L.getAttribute("height"),B=null,M=null,G,E;if(A&&(A=A.match(x))){G=parseInt(A[1],10);E=parseInt(A[2],10);B=parseInt(A[3],10);M=parseInt(A[4],10)}B=F?parseFloat(F):B;M=C?parseFloat(C):M;var O={width:B,height:M};i.gradientDefs=i.getGradientDefs(L);i.cssRules=d(L);i.parseElements(z,function(P){i.documentParsingTime=new Date()-D;if(N){N(P,O)}},s(O))}})();var l={has:function(v,w){w(false)},get:function(v,w){},set:function(w,v){}};function c(v,x){v=v.replace(/^\n\s*/,"").trim();l.has(v,function(y){if(y){l.get(v,function(A){var z=b(A);x(z.objects,z.options)})}else{new i.util.request(v,{method:"get",onComplete:w})}});function w(z){var y=z.responseXML;if(!y.documentElement&&i.window.ActiveXObject&&z.responseText){y=new ActiveXObject("Microsoft.XMLDOM");y.async="false";y.loadXML(z.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))}if(!y.documentElement){return}i.parseSVGDocument(y.documentElement,function(B,A){l.set(v,{objects:i.util.array.invoke(B,"toObject"),options:A});x(B,A)})}}function b(x){var w=x.objects,v=x.options;w=w.map(function(y){return i[f(y.type)].fromObject(y)});return({objects:w,options:v})}function o(v,y){v=v.trim();var w;if(typeof DOMParser!=="undefined"){var x=new DOMParser();if(x&&x.parseFromString){w=x.parseFromString(v,"text/xml")}}else{if(i.window.ActiveXObject){var w=new ActiveXObject("Microsoft.XMLDOM");w.async="false";w.loadXML(v.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))}}i.parseSVGDocument(w.documentElement,function(A,z){y(A,z)})}function n(y){var w="";for(var x=0,v=y.length;x<v;x++){if(y[x].type!=="text"||!y[x].path){continue}w+=["@font-face {","font-family: ",y[x].fontFamily,"; ","src: url('",y[x].path,"')","}"].join("")}if(w){w=["<defs>",'<style type="text/css">',"<![CDATA[",w,"]]>","</style>","</defs>"].join("")}return w}q(i,{parseAttributes:e,parseElements:g,parseStyleAttribute:j,parsePointsAttribute:u,getCSSRules:d,loadSVGFromURL:c,loadSVGFromString:o,createSVGFontFacesMarkup:n})})(typeof exports!="undefined"?exports:this);(function(){function c(j){var g=j.getAttribute("style");if(g){var l=g.split(/\s*;\s*/);if(l[l.length-1]===""){l.pop()}for(var f=l.length;f--;){var e=l[f].split(/\s*:\s*/),d=e[0].trim(),k=e[1].trim();if(d==="stop-color"){return k}}}}fabric.Gradient={create:function(m,n){n||(n={});var f=n.x1||0,l=n.y1||0,e=n.x2||m.canvas.width,j=n.y2||0,g=n.colorStops;var k=m.createLinearGradient(f,l,e,j);for(var i in g){var d=g[i];k.addColorStop(parseFloat(i),d)}return k},fromElement:function(d,n,m){var k=d.getElementsByTagName("stop"),d,f,e={},g,l={x1:d.getAttribute("x1")||0,y1:d.getAttribute("y1")||0,x2:d.getAttribute("x2")||"100%",y2:d.getAttribute("y2")||0};for(var j=k.length;j--;){d=k[j];f=d.getAttribute("offset");f=parseFloat(f)/(/%$/.test(f)?100:1);e[f]=c(d)||d.getAttribute("stop-color")}a(m,l);return fabric.Gradient.create(n,{x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,colorStops:e})},forObject:function(g,d,e){e||(e={});a(g,e);var f=fabric.Gradient.create(d,{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,colorStops:e.colorStops});return f}};function a(f,e){for(var g in e){if(typeof e[g]==="string"&&/^\d+%$/.test(e[g])){var d=parseFloat(e[g],10);if(g==="x1"||g==="x2"){e[g]=f.width*d/100}else{if(g==="y1"||g==="y2"){e[g]=f.height*d/100}}}if(g==="x1"||g==="x2"){e[g]-=f.width/2}else{if(g==="y1"||g==="y2"){e[g]-=f.height/2}}}}function b(k){var f=k.getElementsByTagName("linearGradient"),d=k.getElementsByTagName("radialGradient"),g,j={};for(var e=f.length;e--;){g=f[e];j[g.id]=g}for(var e=d.length;e--;){g=d[e];j[g.id]=g}return j}fabric.getGradientDefs=b})();(function(b){var c=b.fabric||(b.fabric={});if(c.Point){c.warn("fabric.Point is already defined");return}c.Point=a;function a(d,e){if(arguments.length>0){this.init(d,e)}}a.prototype={constructor:a,init:function(d,e){this.x=d;this.y=e},add:function(d){return new a(this.x+d.x,this.y+d.y)},addEquals:function(d){this.x+=d.x;this.y+=d.y;return this},scalarAdd:function(d){return new a(this.x+d,this.y+d)},scalarAddEquals:function(d){this.x+=d;this.y+=d;return this},subtract:function(d){return new a(this.x-d.x,this.y-d.y)},subtractEquals:function(d){this.x-=d.x;this.y-=d.y;return this},scalarSubtract:function(d){return new a(this.x-d,this.y-d)},scalarSubtractEquals:function(d){this.x-=d;this.y-=d;return this},multiply:function(d){return new a(this.x*d,this.y*d)},multiplyEquals:function(d){this.x*=d;this.y*=d;return this},divide:function(d){return new a(this.x/d,this.y/d)},divideEquals:function(d){this.x/=d;this.y/=d;return this},eq:function(d){return(this.x==d.x&&this.y==d.y)},lt:function(d){return(this.x<d.x&&this.y<d.y)},lte:function(d){return(this.x<=d.x&&this.y<=d.y)},gt:function(d){return(this.x>d.x&&this.y>d.y)},gte:function(d){return(this.x>=d.x&&this.y>=d.y)},lerp:function(e,d){return new a(this.x+(e.x-this.x)*d,this.y+(e.y-this.y)*d)},distanceFrom:function(f){var e=this.x-f.x,d=this.y-f.y;return Math.sqrt(e*e+d*d)},min:function(d){return new a(Math.min(this.x,d.x),Math.min(this.y,d.y))},max:function(d){return new a(Math.max(this.x,d.x),Math.max(this.y,d.y))},toString:function(){return this.x+","+this.y},setXY:function(d,e){this.x=d;this.y=e},setFromPoint:function(d){this.x=d.x;this.y=d.y},swap:function(e){var d=this.x,f=this.y;this.x=e.x;this.y=e.y;e.x=d;e.y=f}}})(typeof exports!="undefined"?exports:this);(function(a){var b=a.fabric||(a.fabric={});if(b.Intersection){b.warn("fabric.Intersection is already defined");return}function c(d){if(arguments.length>0){this.init(d)}}b.Intersection=c;b.Intersection.prototype={init:function(d){this.status=d;this.points=[]},appendPoint:function(d){this.points.push(d)},appendPoints:function(d){this.points=this.points.concat(d)}};b.Intersection.intersectLineLine=function(i,f,m,l){var n,j=(l.x-m.x)*(i.y-m.y)-(l.y-m.y)*(i.x-m.x),k=(f.x-i.x)*(i.y-m.y)-(f.y-i.y)*(i.x-m.x),g=(l.y-m.y)*(f.x-i.x)-(l.x-m.x)*(f.y-i.y);if(g!=0){var e=j/g,d=k/g;if(0<=e&&e<=1&&0<=d&&d<=1){n=new c("Intersection");n.points.push(new b.Point(i.x+e*(f.x-i.x),i.y+e*(f.y-i.y)))}else{n=new c("No Intersection")}}else{if(j==0||k==0){n=new c("Coincident")}else{n=new c("Parallel")}}return n};b.Intersection.intersectLinePolygon=function(e,d,m){var n=new c("No Intersection"),f=m.length;for(var j=0;j<f;j++){var l=m[j],k=m[(j+1)%f],g=c.intersectLineLine(e,d,l,k);n.appendPoints(g.points)}if(n.points.length>0){n.status="Intersection"}return n};b.Intersection.intersectPolygonPolygon=function(k,j){var f=new c("No Intersection"),m=k.length;for(var l=0;l<m;l++){var g=k[l],e=k[(l+1)%m],d=c.intersectLinePolygon(g,e,j);f.appendPoints(d.points)}if(f.points.length>0){f.status="Intersection"}return f};b.Intersection.intersectPolygonRectangle=function(o,e,d){var g=e.min(d),n=e.max(d),f=new b.Point(n.x,g.y),m=new b.Point(g.x,n.y),l=c.intersectLinePolygon(g,f,o),k=c.intersectLinePolygon(f,n,o),j=c.intersectLinePolygon(n,m,o),i=c.intersectLinePolygon(m,g,o),p=new c("No Intersection");p.appendPoints(l.points);p.appendPoints(k.points);p.appendPoints(j.points);p.appendPoints(i.points);if(p.points.length>0){p.status="Intersection"}return p}})(typeof exports!="undefined"?exports:this);(function(a){var b=a.fabric||(a.fabric={});if(b.Color){b.warn("fabric.Color is already defined.");return}function c(d){if(!d){this.setSource([0,0,0,1])}else{this._tryParsingColor(d)}}b.Color=c;b.Color.prototype={_tryParsingColor:function(d){var e=c.sourceFromHex(d);if(!e){e=c.sourceFromRgb(d)}if(e){this.setSource(e)}},getSource:function(){return this._source},setSource:function(d){this._source=d},toRgb:function(){var d=this.getSource();return"rgb("+d[0]+","+d[1]+","+d[2]+")"},toRgba:function(){var d=this.getSource();return"rgba("+d[0]+","+d[1]+","+d[2]+","+d[3]+")"},toHex:function(){var i=this.getSource();var f=i[0].toString(16);f=(f.length==1)?("0"+f):f;var e=i[1].toString(16);e=(e.length==1)?("0"+e):e;var d=i[2].toString(16);d=(d.length==1)?("0"+d):d;return f.toUpperCase()+e.toUpperCase()+d.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(e){var d=this.getSource();d[3]=e;this.setSource(d);return this},toGrayscale:function(){var f=this.getSource(),e=parseInt((f[0]*0.3+f[1]*0.59+f[2]*0.11).toFixed(0),10),d=f[3];this.setSource([e,e,e,d]);return this},toBlackWhite:function(d){var g=this.getSource(),f=(g[0]*0.3+g[1]*0.59+g[2]*0.11).toFixed(0),e=g[3],d=d||127;f=(Number(f)<Number(d))?0:255;this.setSource([f,f,f,e]);return this},overlayWith:function(l){if(!(l instanceof c)){l=new c(l)}var d=[],k=this.getAlpha(),g=0.5,j=this.getSource(),e=l.getSource();for(var f=0;f<3;f++){d.push(Math.round((j[f]*(1-g))+(e[f]*g)))}d[3]=k;this.setSource(d);return this}};b.Color.reRGBa=/^rgba?\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})(?:\s*,\s*(\d+(?:\.\d+)?))?\)$/;b.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i;b.Color.fromRgb=function(d){return c.fromSource(c.sourceFromRgb(d))};b.Color.sourceFromRgb=function(d){var e=d.match(c.reRGBa);if(e){return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),e[4]?parseFloat(e[4]):1]}};b.Color.fromRgba=c.fromRgb;b.Color.fromHex=function(d){return c.fromSource(c.sourceFromHex(d))};b.Color.sourceFromHex=function(f){if(f.match(c.reHex)){var k=f.slice(f.indexOf("#")+1),e=(k.length===3),j=e?(k.charAt(0)+k.charAt(0)):k.substring(0,2),i=e?(k.charAt(1)+k.charAt(1)):k.substring(2,4),d=e?(k.charAt(2)+k.charAt(2)):k.substring(4,6);return[parseInt(j,16),parseInt(i,16),parseInt(d,16),1]}};b.Color.fromSource=function(d){var e=new c();e.setSource(d);return e}})(typeof exports!="undefined"?exports:this);(function(c){if(fabric.StaticCanvas){fabric.warn("fabric.StaticCanvas is already defined.");return}var f=fabric.util.object.extend,d=fabric.util.getElementOffset,e=fabric.util.removeFromArray,b=fabric.util.removeListener,a=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=function(i,g){g||(g={});this._initStatic(i,g);fabric.StaticCanvas.activeInstance=this};f(fabric.StaticCanvas.prototype,fabric.Observable);f(fabric.StaticCanvas.prototype,{backgroundColor:"rgba(0, 0, 0, 0)",backgroundImage:"",backgroundImageOpacity:1,backgroundImageStretch:true,includeDefaultValues:true,stateful:true,renderOnAddition:true,clipTo:null,onBeforeScaleRotate:function(g){},onFpsUpdate:null,_initStatic:function(i,g){this._objects=[];this._createLowerCanvas(i);this._initOptions(g);if(g.overlayImage){this.setOverlayImage(g.overlayImage,this.renderAll.bind(this))}if(g.backgroundImage){this.setBackgroundImage(g.backgroundImage,this.renderAll.bind(this))}this.calcOffset()},calcOffset:function(){this._offset=d(this.lowerCanvasEl);return this},setOverlayImage:function(g,i){fabric.util.loadImage(g,function(j){this.overlayImage=j;i&&i()},this);return this},setBackgroundImage:function(i,j,g){return fabric.util.loadImage(i,function(k){this.backgroundImage=k;if(g&&("backgroundImageOpacity" in g)){this.backgroundImageOpacity=g.backgroundImageOpacity}if(g&&("backgroundImageStretch" in g)){this.backgroundImageStretch=g.backgroundImageStretch}j&&j()},this)},_createCanvasElement:function(){var g=fabric.document.createElement("canvas");if(!g.style){g.style={}}if(!g){throw a}this._initCanvasElement(g);return g},_initCanvasElement:function(g){if(typeof g.getContext==="undefined"&&typeof G_vmlCanvasManager!=="undefined"&&G_vmlCanvasManager.initElement){G_vmlCanvasManager.initElement(g)}if(typeof g.getContext==="undefined"){throw a}},_initOptions:function(g){for(var i in g){this[i]=g[i]}this.width=parseInt(this.lowerCanvasEl.width,10)||0;this.height=parseInt(this.lowerCanvasEl.height,10)||0;this.lowerCanvasEl.style.width=this.width+"px";this.lowerCanvasEl.style.height=this.height+"px"},_createLowerCanvas:function(g){this.lowerCanvasEl=fabric.util.getById(g)||this._createCanvasElement();this._initCanvasElement(this.lowerCanvasEl);fabric.util.addClass(this.lowerCanvasEl,"lower-canvas");if(this.interactive){this._applyCanvasStyle(this.lowerCanvasEl)}this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(g){return this._setDimension("width",g)},setHeight:function(g){return this._setDimension("height",g)},setDimensions:function(g){for(var i in g){this._setDimension(i,g[i])}return this},_setDimension:function(i,g){this.lowerCanvasEl[i]=g;this.lowerCanvasEl.style[i]=g+"px";if(this.upperCanvasEl){this.upperCanvasEl[i]=g;this.upperCanvasEl.style[i]=g+"px"}if(this.wrapperEl){this.wrapperEl.style[i]=g+"px"}this[i]=g;this.calcOffset();this.renderAll();return this},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(g,i){i&&i.render(g)},add:function(){this._objects.push.apply(this._objects,arguments);for(var g=arguments.length;g--;){this.stateful&&arguments[g].setupState();arguments[g].setCoords();this.fire("object:added",{target:arguments[g]})}this.renderOnAddition&&this.renderAll();return this},insertAt:function(i,g,j){if(j){this._objects[g]=i}else{this._objects.splice(g,0,i)}this.stateful&&i.setupState();i.setCoords();this.renderAll();this.fire("object:added",{target:i});return this},getObjects:function(){return this._objects},clearContext:function(g){g.clearRect(0,0,this.width,this.height);return this},getContext:function(){return this.contextContainer},clear:function(){this._objects.length=0;this.clearContext(this.contextContainer);if(this.contextTop){this.clearContext(this.contextTop)}this.renderAll();return this},renderAll:function(j){var k=this[(j===true&&this.interactive)?"contextTop":"contextContainer"];if(this.contextTop){this.clearContext(this.contextTop)}if(j===false||(typeof j==="undefined")){this.clearContext(k)}var o=this._objects.length,n=this.getActiveGroup(),m=new Date();if(this.clipTo){k.save();k.beginPath();this.clipTo(k);k.clip()}k.fillStyle=this.backgroundColor;k.fillRect(0,0,this.width,this.height);if(typeof this.backgroundImage=="object"){k.save();k.globalAlpha=this.backgroundImageOpacity;if(this.backgroundImageStretch){k.drawImage(this.backgroundImage,0,0,this.width,this.height)}else{k.drawImage(this.backgroundImage,0,0)}k.restore()}if(o){for(var l=0;l<o;++l){if(!n||(n&&this._objects[l]&&!n.contains(this._objects[l]))){this._draw(k,this._objects[l])}}}if(this.clipTo){k.restore()}if(n){this._draw(this.contextTop,n)}if(this.overlayImage){(this.contextTop||this.contextContainer).drawImage(this.overlayImage,0,0)}if(this.onFpsUpdate){var g=new Date()-m;this.onFpsUpdate(~~(1000/g))}this.fire("after:render");return this},renderTop:function(){this.clearContext(this.contextTop||this.contextContainer);if(this.overlayImage){(this.contextTop||this.contextContainer).drawImage(this.overlayImage,0,0)}if(this.selection&&this._groupSelector){this._drawSelection()}var g=this.getActiveGroup();if(g){g.render(this.contextTop)}this.fire("after:render");return this},toDataURL:function(i){this.renderAll(true);var g=(this.upperCanvasEl||this.lowerCanvasEl).toDataURL("image/"+i);this.renderAll();return g},toDataURLWithMultiplier:function(m,o){var n=this.getWidth(),p=this.getHeight(),k=n*o,l=p*o,g=this.getActiveObject(),j=this.getActiveGroup();this.setWidth(k).setHeight(l);this.contextTop.scale(o,o);if(j){this._tempRemoveBordersCornersFromGroup(j)}else{if(g){this.deactivateAll()}}this.width=n;this.height=p;this.renderAll(true);var i=this.toDataURL(m);this.contextTop.scale(1/o,1/o);this.setWidth(n).setHeight(p);if(j){this._restoreBordersCornersOnGroup(j)}else{if(g){this.setActiveObject(g)}}this.renderAll();return i},_tempRemoveBordersCornersFromGroup:function(g){g.origHideCorners=g.hideCorners;g.origBorderColor=g.borderColor;g.hideCorners=true;g.borderColor="rgba(0,0,0,0)";g.forEachObject(function(i){i.origBorderColor=i.borderColor;i.borderColor="rgba(0,0,0,0)"})},_restoreBordersCornersOnGroup:function(g){g.hideCorners=g.origHideCorners;g.borderColor=g.origBorderColor;g.forEachObject(function(i){i.borderColor=i.origBorderColor;delete i.origBorderColor})},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(g){g.set("left",this.getCenter().left);this.renderAll();return this},centerObjectV:function(g){g.set("top",this.getCenter().top);this.renderAll();return this},centerObject:function(g){return this.centerObjectH(g).centerObjectV(g)},toDatalessJSON:function(){return this.toDatalessObject()},toObject:function(){return this._toObjectMethod("toObject")},toDatalessObject:function(){return this._toObjectMethod("toDatalessObject")},_toObjectMethod:function(g){var i={objects:this._objects.map(function(j){if(!this.includeDefaultValues){var k=j.includeDefaultValues;j.includeDefaultValues=false}var l=j[g]();if(!this.includeDefaultValues){j.includeDefaultValues=k}return l},this),background:this.backgroundColor};if(this.backgroundImage){i.backgroundImage=this.backgroundImage.src;i.backgroundImageOpacity=this.backgroundImageOpacity;i.backgroundImageStretch=this.backgroundImageStretch}return i},toSVG:function(){var j=['<?xml version="1.0" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" ','"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">',"<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',this.width,'" ','height="',this.height,'" ','xml:space="preserve">',"<desc>Created with Fabric.js ",fabric.version,"</desc>",fabric.createSVGFontFacesMarkup(this.getObjects())];if(this.backgroundImage){j.push('<image x="0" y="0" ','width="',this.width,'" height="',this.height,'" preserveAspectRatio="',(this.backgroundImageStretch?"none":"defer"),'" xlink:href="',this.backgroundImage.src,'" style="opacity:',this.backgroundImageOpacity,'"></image>')}for(var k=0,l=this.getObjects(),g=l.length;k<g;k++){j.push(l[k].toSVG())}j.push("</svg>");return j.join("")},isEmpty:function(){return this._objects.length===0},remove:function(g){e(this._objects,g);if(this.getActiveObject()===g){this.fire("before:selection:cleared",{target:g});this.discardActiveObject();this.fire("selection:cleared")}this.renderAll();return g},sendToBack:function(g){e(this._objects,g);this._objects.unshift(g);return this.renderAll()},bringToFront:function(g){e(this._objects,g);this._objects.push(g);return this.renderAll()},sendBackwards:function(k){var j=this._objects.indexOf(k),g=j;if(j!==0){for(var l=j-1;l>=0;--l){if(k.intersectsWithObject(this._objects[l])||k.isContainedWithinObject(this._objects[l])){g=l;break}}e(this._objects,k);this._objects.splice(g,0,k)}return this.renderAll()},bringForward:function(m){var o=this.getObjects(),j=o.indexOf(m),g=j;if(j!==o.length-1){for(var n=j+1,k=this._objects.length;n<k;++n){if(m.intersectsWithObject(o[n])||m.isContainedWithinObject(this._objects[n])){g=n;break}}e(o,m);o.splice(g,0,m)}this.renderAll()},item:function(g){return this.getObjects()[g]},complexity:function(){return this.getObjects().reduce(function(g,i){g+=i.complexity?i.complexity():0;return g},0)},forEachObject:function(l,j){var k=this.getObjects(),g=k.length;while(g--){l.call(j,k[g],g,k)}return this},dispose:function(){this.clear();if(this.interactive){b(this.upperCanvasEl,"mousedown",this._onMouseDown);b(this.upperCanvasEl,"mousemove",this._onMouseMove);b(fabric.window,"resize",this._onResize)}return this},_resizeImageToFit:function(j){var i=j.width||j.offsetWidth,g=this.getWidth()/i;if(i){j.width=i*g}}});fabric.StaticCanvas.prototype.toString=function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"};f(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',toGrayscale:function(m){var l=m.getContext("2d"),g=l.getImageData(0,0,m.width,m.height),q=g.data,n=g.width,t=g.height,s,k,p,o;for(p=0;p<n;p++){for(o=0;o<t;o++){s=(p*4)*t+(o*4);k=(q[s]+q[s+1]+q[s+2])/3;q[s]=k;q[s+1]=k;q[s+2]=k}}l.putImageData(g,0,0)},supports:function(i){var j=fabric.document.createElement("canvas");if(typeof G_vmlCanvasManager!=="undefined"){G_vmlCanvasManager.initElement(j)}if(!j||!j.getContext){return null}var g=j.getContext("2d");if(!g){return null}switch(i){case"getImageData":return typeof g.getImageData!=="undefined";case"toDataURL":return typeof j.toDataURL!=="undefined";default:return null}}});fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject})(typeof exports!="undefined"?exports:this);(function(){var k=fabric.util.object.extend,s=fabric.util.getPointer,b=fabric.util.addListener,g=fabric.util.removeListener,n={tr:"ne-resize",br:"se-resize",bl:"sw-resize",tl:"nw-resize",ml:"w-resize",mt:"n-resize",mr:"e-resize",mb:"s-resize"},d=fabric.util.array.min,i=fabric.util.array.max,o=Math.sqrt,j=Math.pow,p=Math.atan2,q=Math.abs,f=Math.min,m=Math.max,a=0.5;fabric.Canvas=function(u,t){t||(t={});this._initStatic(u,t);this._initInteractive();fabric.Canvas.activeInstance=this};function l(){}l.prototype=fabric.StaticCanvas.prototype;fabric.Canvas.prototype=new l;var e={interactive:true,selection:true,selectionColor:"rgba(100, 100, 255, 0.3)",selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,freeDrawingColor:"rgb(0, 0, 0)",freeDrawingLineWidth:1,hoverCursor:"move",defaultCursor:"default",rotationCursor:"crosshair",containerClass:"canvas-container",_initInteractive:function(){this._currentTransform=null;this._groupSelector=null;this._freeDrawingXPoints=[];this._freeDrawingYPoints=[];this._initWrapperElement();this._createUpperCanvas();this._initEvents();this.calcOffset()},_initEvents:function(){var t=this;this._onMouseDown=function(u){t.__onMouseDown(u);b(fabric.document,"mouseup",t._onMouseUp);fabric.isTouchSupported&&b(fabric.document,"touchend",t._onMouseUp);b(fabric.document,"mousemove",t._onMouseMove);fabric.isTouchSupported&&b(fabric.document,"touchmove",t._onMouseMove);g(t.upperCanvasEl,"mousemove",t._onMouseMove);fabric.isTouchSupported&&g(t.upperCanvasEl,"touchmove",t._onMouseMove)};this._onMouseUp=function(u){t.__onMouseUp(u);g(fabric.document,"mouseup",t._onMouseUp);fabric.isTouchSupported&&g(fabric.document,"touchend",t._onMouseUp);g(fabric.document,"mousemove",t._onMouseMove);fabric.isTouchSupported&&g(fabric.document,"touchmove",t._onMouseMove);b(t.upperCanvasEl,"mousemove",t._onMouseMove);fabric.isTouchSupported&&b(t.upperCanvasEl,"touchmove",t._onMouseMove)};this._onMouseMove=function(u){u.preventDefault&&u.preventDefault();t.__onMouseMove(u)};this._onResize=function(u){t.calcOffset()};b(fabric.window,"resize",this._onResize);if(fabric.isTouchSupported){b(this.upperCanvasEl,"touchstart",this._onMouseDown);b(this.upperCanvasEl,"touchmove",this._onMouseMove)}else{b(this.upperCanvasEl,"mousedown",this._onMouseDown);b(this.upperCanvasEl,"mousemove",this._onMouseMove)}},__onMouseUp:function(x){if(this.isDrawingMode&&this._isCurrentlyDrawing){this._finalizeDrawingPath();this.fire("mouse:up",{e:x});return}if(this._currentTransform){var t=this._currentTransform,w=t.target;if(w._scaling){w._scaling=false}var u=this._objects.length;while(u--){this._objects[u].setCoords()}if(this.stateful&&w.hasStateChanged()){w.isMoving=false;this.fire("object:modified",{target:w})}}this._currentTransform=null;if(this._groupSelector){this._findSelectedObjects(x)}var v=this.getActiveGroup();if(v){v.setObjectsCoords();v.set("isMoving",false);this._setCursor(this.defaultCursor)}this._groupSelector=null;this.renderAll();this._setCursorFromEvent(x,w);this._setCursor("");var y=this;setTimeout(function(){y._setCursorFromEvent(x,w)},50);this.fire("mouse:up",{target:w,e:x})},__onMouseDown:function(y){var t="which" in y?y.which==1:y.button==1;if(!t&&!fabric.isTouchSupported){return}if(this.isDrawingMode){this._prepareForDrawing(y);this._captureDrawingPath(y);this.fire("mouse:down",{e:y});this.fire("mouse:down",{e:y});return}if(this._currentTransform){return}var x=this.findTarget(y),z=this.getPointer(y),v=this.getActiveGroup(),w;if(this._shouldClearSelection(y)){this._groupSelector={ex:z.x,ey:z.y,top:0,left:0};this.deactivateAllWithDispatch()}else{this.stateful&&x.saveState();if(w=x._findTargetCorner(y,this._offset)){this.onBeforeScaleRotate(x)}this._setupCurrentTransform(y,x);var u=y.shiftKey&&(v||this.getActiveObject())&&this.selection;if(u){this._handleGroupLogic(y,x)}else{if(x!==this.getActiveGroup()){this.deactivateAll()}this.setActiveObject(x,y)}}this.renderAll();this.fire("mouse:down",{target:x,e:y})},__onMouseMove:function(A){if(this.isDrawingMode){if(this._isCurrentlyDrawing){this._captureDrawingPath(A)}this.fire("mouse:move",{e:A});return}var u=this._groupSelector;if(u!==null){var B=s(A);u.left=B.x-this._offset.left-u.ex;u.top=B.y-this._offset.top-u.ey;this.renderTop()}else{if(!this._currentTransform){var w=this.upperCanvasEl.style;var z=this.findTarget(A);if(!z){for(var v=this._objects.length;v--;){if(this._objects[v]&&!this._objects[v].active){this._objects[v].setActive(false)}}w.cursor=this.defaultCursor}else{this._setCursorFromEvent(A,z);if(z.isActive()){z.setCornersVisibility&&z.setCornersVisibility(true)}}}else{var B=s(A),t=B.x,C=B.y;this._currentTransform.target.isMoving=true;if(this._currentTransform.action==="rotate"){if(!A.shiftKey){this._rotateObject(t,C);this.fire("object:rotating",{target:this._currentTransform.target})}if(!this._currentTransform.target.hasRotatingPoint){this._scaleObject(t,C);this.fire("object:scaling",{target:this._currentTransform.target})}}else{if(this._currentTransform.action==="scale"){this._scaleObject(t,C);this.fire("object:scaling",{target:this._currentTransform.target})}else{if(this._currentTransform.action==="scaleX"){this._scaleObject(t,C,"x");this.fire("object:scaling",{target:this._currentTransform.target})}else{if(this._currentTransform.action==="scaleY"){this._scaleObject(t,C,"y");this.fire("object:scaling",{target:this._currentTransform.target})}else{this._translateObject(t,C);this.fire("object:moving",{target:this._currentTransform.target})}}}}this.renderAll()}}this.fire("mouse:move",{target:z,e:A})},containsPoint:function(A,z){var B=this.getPointer(A),w=this._normalizePointer(z,B),t=w.x,C=w.y;var u=z._getImageLines(z.oCoords),v=z._findCrossPoints(t,C,u);if((v&&v%2===1)||z._findTargetCorner(A,this._offset)){return true}return false},_normalizePointer:function(u,z){var w=this.getActiveGroup(),t=z.x,A=z.y;var v=(w&&u.type!=="group"&&w.contains(u));if(v){t-=w.left;A-=w.top}return{x:t,y:A}},_shouldClearSelection:function(v){var u=this.findTarget(v),t=this.getActiveGroup();return(!u||(u&&t&&!t.contains(u)&&t!==u&&!v.shiftKey))},_setupCurrentTransform:function(w,v){var u="drag",t,x=s(w);if(t=v._findTargetCorner(w,this._offset)){u=(t==="ml"||t==="mr")?"scaleX":(t==="mt"||t==="mb")?"scaleY":t==="mtr"?"rotate":(v.hasRotatingPoint)?"scale":"rotate"}this._currentTransform={target:v,action:u,scaleX:v.scaleX,scaleY:v.scaleY,offsetX:x.x-v.left,offsetY:x.y-v.top,ex:x.x,ey:x.y,left:v.left,top:v.top,theta:v.theta,width:v.width*v.scaleX};this._currentTransform.original={left:v.left,top:v.top}},_handleGroupLogic:function(w,v){if(v===this.getActiveGroup()){v=this.findTarget(w,true);if(!v||v.isType("group")){return}}var t=this.getActiveGroup();if(t){if(t.contains(v)){t.removeWithUpdate(v);v.setActive(false);if(t.size()===1){this.discardActiveGroup()}}else{t.addWithUpdate(v)}this.fire("selection:created",{target:t,e:w});t.setActive(true)}else{if(this._activeObject){if(v!==this._activeObject){var u=new fabric.Group([this._activeObject,v]);this.setActiveGroup(u);t=this.getActiveGroup()}}v.setActive(true)}if(t){t.saveCoords()}},_prepareForDrawing:function(t){this._isCurrentlyDrawing=true;this.discardActiveObject().renderAll();var u=this.getPointer(t);this._freeDrawingXPoints.length=this._freeDrawingYPoints.length=0;this._freeDrawingXPoints.push(u.x);this._freeDrawingYPoints.push(u.y);this.contextTop.beginPath();this.contextTop.moveTo(u.x,u.y);this.contextTop.strokeStyle=this.freeDrawingColor;this.contextTop.lineWidth=this.freeDrawingLineWidth;this.contextTop.lineCap=this.contextTop.lineJoin="round"},_captureDrawingPath:function(t){var u=this.getPointer(t);this._freeDrawingXPoints.push(u.x);this._freeDrawingYPoints.push(u.y);this.contextTop.lineTo(u.x,u.y);this.contextTop.stroke()},_finalizeDrawingPath:function(){this.contextTop.closePath();this._isCurrentlyDrawing=false;var y=d(this._freeDrawingXPoints),x=d(this._freeDrawingYPoints),v=i(this._freeDrawingXPoints),t=i(this._freeDrawingYPoints),D=this.contextTop,E=[],z,B,u=this._freeDrawingXPoints,C=this._freeDrawingYPoints;E.push("M ",u[0]-y," ",C[0]-x," ");for(var A=1;z=u[A],B=C[A];A++){E.push("L ",z-y," ",B-x," ")}E=E.join("");if(E==="M 0 0 L 0 0 "){return}var w=new fabric.Path(E);w.fill=null;w.stroke=this.freeDrawingColor;w.strokeWidth=this.freeDrawingLineWidth;this.add(w);w.set("left",y+(v-y)/2).set("top",x+(t-x)/2).setCoords();this.renderAll();this.fire("path:created",{path:w})},_translateObject:function(t,v){var u=this._currentTransform.target;u.lockMovementX||u.set("left",t-this._currentTransform.offsetX);u.lockMovementY||u.set("top",v-this._currentTransform.offsetY)},_scaleObject:function(u,D,B){var v=this._currentTransform,C=this._offset,A=v.target;if(A.lockScalingX&&A.lockScalingY){return}var z=o(j(v.ey-v.top-C.top,2)+j(v.ex-v.left-C.left,2)),w=o(j(D-v.top-C.top,2)+j(u-v.left-C.left,2));A._scaling=true;if(!B){A.lockScalingX||A.set("scaleX",v.scaleX*w/z);A.lockScalingY||A.set("scaleY",v.scaleY*w/z)}else{if(B==="x"&&!A.lockUniScaling){A.lockScalingX||A.set("scaleX",v.scaleX*w/z)}else{if(B==="y"&&!A.lockUniScaling){A.lockScalingY||A.set("scaleY",v.scaleY*w/z)}}}},_rotateObject:function(u,B){var v=this._currentTransform,z=this._offset;if(v.target.lockRotation){return}var w=p(v.ey-v.top-z.top,v.ex-v.left-z.left),A=p(B-v.top-z.top,u-v.left-z.left);v.target.set("theta",(A-w)+v.theta)},_setCursor:function(t){this.upperCanvasEl.style.cursor=t},_setCursorFromEvent:function(x,w){var u=this.upperCanvasEl.style;if(!w){u.cursor=this.defaultCursor;return false}else{var t=this.getActiveGroup();var v=!!w._findTargetCorner&&(!t||!t.contains(w))&&w._findTargetCorner(x,this._offset);if(!v){u.cursor=this.hoverCursor}else{if(v in n){u.cursor=n[v]}else{if(v==="mtr"&&w.hasRotatingPoint){u.cursor=this.rotationCursor}else{u.cursor=this.defaulCursor;return false}}}}return true},_drawSelection:function(){var t=this._groupSelector,x=t.left,w=t.top,v=q(x),u=q(w);this.contextTop.fillStyle=this.selectionColor;this.contextTop.fillRect(t.ex-((x>0)?0:-x),t.ey-((w>0)?0:-w),v,u);this.contextTop.lineWidth=this.selectionLineWidth;this.contextTop.strokeStyle=this.selectionBorderColor;this.contextTop.strokeRect(t.ex+a-((x>0)?0:v),t.ey+a-((w>0)?0:u),v,u)},_findSelectedObjects:function(z){var A,v,F=[],u=this._groupSelector.ex,E=this._groupSelector.ey,t=u+this._groupSelector.left,C=E+this._groupSelector.top,B,y=new fabric.Point(f(u,t),f(E,C)),D=new fabric.Point(m(u,t),m(E,C));for(var w=0,x=this._objects.length;w<x;++w){B=this._objects[w];if(!B){continue}if(B.intersectsWithRect(y,D)||B.isContainedWithinRect(y,D)){if(this.selection&&B.selectable){B.setActive(true);F.push(B)}}}if(F.length===1){this.setActiveObject(F[0],z)}else{if(F.length>1){var F=new fabric.Group(F);this.setActiveGroup(F);F.saveCoords();this.fire("selection:created",{target:F})}}this.renderAll()},findTarget:function(x,u){var w,y=this.getPointer(x);var v=this.getActiveGroup();if(v&&!u&&this.containsPoint(x,v)){w=v;return w}for(var t=this._objects.length;t--;){if(this._objects[t]&&this.containsPoint(x,this._objects[t])){w=this._objects[t];this.relatedTarget=w;break}}if(w&&w.selectable){return w}},getPointer:function(t){var u=s(t);return{x:u.x-this._offset.left,y:u.y-this._offset.top}},_createUpperCanvas:function(){this.upperCanvasEl=this._createCanvasElement();this.upperCanvasEl.className="upper-canvas";this.wrapperEl.appendChild(this.upperCanvasEl);this._applyCanvasStyle(this.upperCanvasEl);this.contextTop=this.upperCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{"class":this.containerClass});fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"});fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(u){var v=this.getWidth()||u.width,t=this.getHeight()||u.height;fabric.util.setStyle(u,{position:"absolute",width:v+"px",height:t+"px",left:0,top:0});u.width=v;u.height=t;fabric.util.makeElementUnselectable(u)},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},setActiveObject:function(t,u){if(this._activeObject){this._activeObject.setActive(false)}this._activeObject=t;t.setActive(true);this.renderAll();this.fire("object:selected",{target:t,e:u});return this},getActiveObject:function(){return this._activeObject},discardActiveObject:function(){if(this._activeObject){this._activeObject.setActive(false)}this._activeObject=null;return this},setActiveGroup:function(t){this._activeGroup=t;t&&t.setActive(true);return this},getActiveGroup:function(){return this._activeGroup},discardActiveGroup:function(){var t=this.getActiveGroup();if(t){t.destroy()}return this.setActiveGroup(null)},deactivateAll:function(){var u=this.getObjects(),v=0,t=u.length;for(;v<t;v++){u[v].setActive(false)}this.discardActiveGroup();this.discardActiveObject();return this},deactivateAllWithDispatch:function(){var t=this.getActiveGroup()||this.getActiveObject();if(t){this.fire("before:selection:cleared",{target:t})}this.deactivateAll();if(t){this.fire("selection:cleared")}return this}};fabric.Canvas.prototype.toString=fabric.StaticCanvas.prototype.toString;k(fabric.Canvas.prototype,e);for(var c in fabric.StaticCanvas){if(c!=="prototype"){fabric.Canvas[c]=fabric.StaticCanvas[c]}}if(fabric.isTouchSupported){fabric.Canvas.prototype._setCursorFromEvent=function(){}}fabric.Element=fabric.Canvas})();fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(b,c){c=c||{};var d=function(){},e=c.onComplete||d,a=c.onChange||d,f=this;fabric.util.animate({startValue:b.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(g){b.set("left",g);f.renderAll();a()},onComplete:function(){b.setCoords();e()}});return this},fxCenterObjectV:function(b,c){c=c||{};var d=function(){},e=c.onComplete||d,a=c.onChange||d,f=this;fabric.util.animate({startValue:b.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(g){b.set("top",g);f.renderAll();a()},onComplete:function(){b.setCoords();e()}});return this},fxRemove:function(b,c){c=c||{};var d=function(){},e=c.onComplete||d,a=c.onChange||d,f=this;fabric.util.animate({startValue:b.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){b.setActive(false)},onChange:function(g){b.set("opacity",g);f.renderAll();a()},onComplete:function(){f.remove(b);e()}});return this}});fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(a,c){if(!a){return}var b=(typeof a==="string")?JSON.parse(a):a;if(!b||(b&&!b.objects)){return}this.clear();this.backgroundColor=b.background;this._enlivenDatalessObjects(b.objects,c)},_enlivenDatalessObjects:function(b,i){function g(j,e){f.insertAt(j,e,true);j.setCoords();if(++d===a){i&&i()}}var f=this,d=0,a=b.length;if(a===0&&i){i()}try{b.forEach(function(o,m){var j=o.paths?"paths":"path";var n=o[j];delete o[j];if(typeof n!=="string"){switch(o.type){case"image":fabric[fabric.util.string.capitalize(o.type)].fromObject(o,function(p){g(p,m)});break;default:var e=fabric[fabric.util.string.camelize(fabric.util.string.capitalize(o.type))];if(e&&e.fromObject){if(n){o[j]=n}g(e.fromObject(o),m)}break}}else{if(o.type==="image"){fabric.util.loadImage(n,function(q){var p=new fabric.Image(q);p.setSourcePath(n);fabric.util.object.extend(p,o);p.setAngle(o.angle);g(p,m)})}else{if(o.type==="text"){o.path=n;var l=fabric.Text.fromObject(o);var k=function(){if(Object.prototype.toString.call(fabric.window.opera)==="[object Opera]"){setTimeout(function(){g(l,m)},500)}else{g(l,m)}};fabric.util.getScript(n,k)}else{fabric.loadSVGFromURL(n,function(s,q){var p=fabric.util.groupSVGElements(s,o,n);if(!(p instanceof fabric.PathGroup)){fabric.util.object.extend(p,o);if(typeof o.angle!=="undefined"){p.setAngle(o.angle)}}g(p,m)})}}}},this)}catch(c){fabric.log(c.message)}},loadFromJSON:function(a,d){if(!a){return}var b=JSON.parse(a);if(!b||(b&&!b.objects)){return}this.clear();var c=this;this._enlivenObjects(b.objects,function(){c.backgroundColor=b.background;if(b.backgroundImage){c.setBackgroundImage(b.backgroundImage,function(){c.backgroundImageOpacity=b.backgroundImageOpacity;c.backgroundImageStretch=b.backgroundImageStretch;c.renderAll();d&&d()})}else{d&&d()}});return this},_enlivenObjects:function(a,c){var b=this;fabric.util.enlivenObjects(a,function(d){d.forEach(function(f,e){b.insertAt(f,e,true)});c&&c()})},_toDataURL:function(a,b){this.clone(function(c){b(c.toDataURL(a))})},_toDataURLWithMultiplier:function(a,c,b){this.clone(function(d){b(d.toDataURLWithMultiplier(a,c))})},clone:function(b){var a=JSON.stringify(this);this.cloneWithoutData(function(c){c.loadFromJSON(a,function(){b&&b(c)})})},cloneWithoutData:function(c){var a=fabric.document.createElement("canvas");a.width=this.getWidth();a.height=this.getHeight();var b=new fabric.Canvas(a);b.clipTo=this.clipTo;if(this.backgroundImage){b.setBackgroundImage(this.backgroundImage.src,function(){b.renderAll();c&&c(b)});b.backgroundImageOpacity=this.backgroundImageOpacity;b.backgroundImageStretch=this.backgroundImageStretch}else{c&&c(b)}}});(function(a){var d=a.fabric||(a.fabric={}),m=d.util.object.extend,n=d.util.object.clone,c=d.util.toFixed,l=d.util.string.capitalize,q=d.util.getPointer,b=d.util.degreesToRadians,p=Array.prototype.slice;if(d.Object){return}d.Object=d.util.createClass({type:"object",includeDefaultValues:true,NUM_FRACTION_DIGITS:2,MIN_SCALE_LIMIT:0.1,stateProperties:("top left width height scaleX scaleY flipX flipY theta angle opacity cornersize fill overlayFill stroke strokeWidth fillRule borderScaleFactor transformMatrix selectable").split(" "),top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:false,flipY:false,theta:0,opacity:1,angle:0,cornersize:12,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",fill:"rgb(0,0,0)",fillRule:"source-over",overlayFill:null,stroke:null,strokeWidth:1,borderOpacityWhenMoving:0.4,borderScaleFactor:1,transformMatrix:null,selectable:true,hasControls:true,hasBorders:true,hasRotatingPoint:false,rotatingPointOffset:40,callSuper:function(i){var s=this.constructor.superclass.prototype[i];return(arguments.length>1)?s.apply(this,p.call(arguments,1)):s.call(this)},initialize:function(i){i&&this.setOptions(i)},setOptions:function(s){var t=this.stateProperties.length,u;while(t--){u=this.stateProperties[t];if(u in s){this.set(u,s[u])}}},transform:function(i){i.globalAlpha=this.opacity;i.translate(this.left,this.top);i.rotate(this.theta);i.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(){var i={type:this.type,left:c(this.left,this.NUM_FRACTION_DIGITS),top:c(this.top,this.NUM_FRACTION_DIGITS),width:c(this.width,this.NUM_FRACTION_DIGITS),height:c(this.height,this.NUM_FRACTION_DIGITS),fill:this.fill,overlayFill:this.overlayFill,stroke:this.stroke,strokeWidth:this.strokeWidth,scaleX:c(this.scaleX,this.NUM_FRACTION_DIGITS),scaleY:c(this.scaleY,this.NUM_FRACTION_DIGITS),angle:c(this.getAngle(),this.NUM_FRACTION_DIGITS),flipX:this.flipX,flipY:this.flipY,opacity:c(this.opacity,this.NUM_FRACTION_DIGITS),selectable:this.selectable,hasControls:this.hasControls,hasBorders:this.hasBorders,hasRotatingPoint:this.hasRotatingPoint};if(!this.includeDefaultValues){i=this._removeDefaultValues(i)}return i},toDatalessObject:function(){return this.toObject()},getSvgStyles:function(){return["stroke: ",(this.stroke?this.stroke:"none"),"; ","stroke-width: ",(this.strokeWidth?this.strokeWidth:"0"),"; ","fill: ",(this.fill?this.fill:"none"),"; ","opacity: ",(this.opacity?this.opacity:"1"),";"].join("")},getSvgTransform:function(){var i=this.getAngle();return["translate(",c(this.left,2)," ",c(this.top,2),")",i!==0?(" rotate("+c(i,2)+")"):"",(this.scaleX===1&&this.scaleY===1)?"":(" scale("+c(this.scaleX,2)+" "+c(this.scaleY,2)+")")].join("")},_removeDefaultValues:function(s){var i=d.Object.prototype.options;if(i){this.stateProperties.forEach(function(t){if(s[t]===i[t]){delete s[t]}})}return s},isActive:function(){return !!this.active},setActive:function(i){this.active=!!i;return this},toString:function(){return"#<fabric."+l(this.type)+">"},set:function(s,i){var u=(s==="scaleX"||s==="scaleY")&&i<this.MIN_SCALE_LIMIT;if(u){i=this.MIN_SCALE_LIMIT}if(typeof s=="object"){for(var t in s){this.set(t,s[t])}}else{if(s==="angle"){this.setAngle(i)}else{this[s]=i}}return this},toggle:function(s){var i=this.get(s);if(typeof i==="boolean"){this.set(s,!i)}return this},setSourcePath:function(i){this.sourcePath=i;return this},get:function(i){return(i==="angle")?this.getAngle():this[i]},render:function(s,t){if(this.width===0||this.height===0){return}s.save();var i=this.transformMatrix;if(i){s.setTransform(i[0],i[1],i[2],i[3],i[4],i[5])}if(!t){this.transform(s)}if(this.stroke){s.lineWidth=this.strokeWidth;s.strokeStyle=this.stroke}if(this.overlayFill){s.fillStyle=this.overlayFill}else{if(this.fill){s.fillStyle=this.fill}}this._render(s,t);if(this.active&&!t){this.drawBorders(s);this.hideCorners||this.drawCorners(s)}s.restore()},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},scale:function(i){this.scaleX=i;this.scaleY=i;return this},scaleToWidth:function(i){return this.scale(i/this.width)},scaleToHeight:function(i){return this.scale(i/this.height)},setOpacity:function(i){this.set("opacity",i);return this},getAngle:function(){return this.theta*180/Math.PI},setAngle:function(i){this.theta=i/180*Math.PI;this.angle=i;return this},setCoords:function(){this.currentWidth=this.width*this.scaleX;this.currentHeight=this.height*this.scaleY;this._hypotenuse=Math.sqrt(Math.pow(this.currentWidth/2,2)+Math.pow(this.currentHeight/2,2));this._angle=Math.atan(this.currentHeight/this.currentWidth);var y=Math.cos(this._angle+this.theta)*this._hypotenuse,x=Math.sin(this._angle+this.theta)*this._hypotenuse,t=this.theta,B=Math.sin(t),z=Math.cos(t);var E={x:this.left-y,y:this.top-x};var A={x:E.x+(this.currentWidth*z),y:E.y+(this.currentWidth*B)};var D={x:A.x-(this.currentHeight*B),y:A.y+(this.currentHeight*z)};var u={x:E.x-(this.currentHeight*B),y:E.y+(this.currentHeight*z)};var w={x:E.x-(this.currentHeight/2*B),y:E.y+(this.currentHeight/2*z)};var i={x:E.x+(this.currentWidth/2*z),y:E.y+(this.currentWidth/2*B)};var s={x:A.x-(this.currentHeight/2*B),y:A.y+(this.currentHeight/2*z)};var C={x:u.x+(this.currentWidth/2*z),y:u.y+(this.currentWidth/2*B)};var v={x:E.x+(this.currentWidth/2*z),y:E.y+(this.currentWidth/2*B)};this.oCoords={tl:E,tr:A,br:D,bl:u,ml:w,mt:i,mr:s,mb:C,mtr:v};this._setCornerCoords();return this},getBoundingRectWidth:function(){var s=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x];var i=d.util.array.min(s);var t=d.util.array.max(s);return Math.abs(i-t)},getBoundingRectHeight:function(){var i=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y];var t=d.util.array.min(i);var s=d.util.array.max(i);return Math.abs(t-s)},drawBorders:function(A){if(!this.hasBorders){return}var v=this.padding,i=v*2;A.save();A.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;A.strokeStyle=this.borderColor;var z=1/(this.scaleX<this.MIN_SCALE_LIMIT?this.MIN_SCALE_LIMIT:this.scaleX),x=1/(this.scaleY<this.MIN_SCALE_LIMIT?this.MIN_SCALE_LIMIT:this.scaleY);A.lineWidth=1/this.borderScaleFactor;A.scale(z,x);var y=this.getWidth(),u=this.getHeight();A.strokeRect(~~(-(y/2)-v)+0.5,~~(-(u/2)-v)+0.5,~~(y+i),~~(u+i));if(this.hasRotatingPoint&&!this.hideCorners&&!this.lockRotation){var t=(this.flipY?u:-u)/2;var s=(-y/2);A.beginPath();A.moveTo(0,t);A.lineTo(0,t+(this.flipY?this.rotatingPointOffset:-this.rotatingPointOffset));A.closePath();A.stroke()}A.restore();return this},drawCorners:function(D){if(!this.hasControls){return}var F=this.cornersize,A=F/2,z=this.padding,t=-(this.width/2),y=-(this.height/2),E,C,s=F/this.scaleX,i=F/this.scaleY,u=(z+A)/this.scaleY,v=(z+A)/this.scaleX,x=(z+A-F)/this.scaleX,w=(z+A-F)/this.scaleY,B=this.height;D.save();D.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;D.fillStyle=this.cornerColor;E=t-v;C=y-u;D.fillRect(E,C,s,i);E=t+this.width-v;C=y-u;D.fillRect(E,C,s,i);E=t-v;C=y+B+w;D.fillRect(E,C,s,i);E=t+this.width+x;C=y+B+w;D.fillRect(E,C,s,i);E=t+this.width/2-v;C=y-u;D.fillRect(E,C,s,i);E=t+this.width/2-v;C=y+B+w;D.fillRect(E,C,s,i);E=t+this.width+x;C=y+B/2-u;D.fillRect(E,C,s,i);E=t-v;C=y+B/2-u;D.fillRect(E,C,s,i);if(this.hasRotatingPoint){E=t+this.width/2-v;C=this.flipY?(y+B+(this.rotatingPointOffset/this.scaleY)-i/2):(y-(this.rotatingPointOffset/this.scaleY)-i/2);D.fillRect(E,C,s,i)}D.restore();return this},clone:function(i){if(this.constructor.fromObject){return this.constructor.fromObject(this.toObject(),i)}return new d.Object(this.toObject())},cloneAsImage:function(u){if(d.Image){var s=new Image();s.onload=function(){if(u){u(new d.Image(s),t)}s=s.onload=null};var t={angle:this.get("angle"),flipX:this.get("flipX"),flipY:this.get("flipY")};this.set("angle",0).set("flipX",false).set("flipY",false);this.toDataURL(function(i){s.src=i})}return this},toDataURL:function(u){var s=d.document.createElement("canvas");if(!s.getContext&&typeof G_vmlCanvasManager!="undefined"){G_vmlCanvasManager.initElement(s)}this.setCoords();s.width=this.getBoundingRectWidth();s.height=this.getBoundingRectHeight();d.util.wrapElement(s,"div");var i=new d.Canvas(s);i.backgroundColor="transparent";i.renderAll();if(this.constructor.async){this.clone(t)}else{t(this.clone())}function t(w){w.left=s.width/2;w.top=s.height/2;w.setActive(false);i.add(w);var v=i.toDataURL("png");i.dispose();i=w=null;u&&u(v)}},hasStateChanged:function(){return this.stateProperties.some(function(i){return this[i]!==this.originalState[i]},this)},saveState:function(){this.stateProperties.forEach(function(i){this.originalState[i]=this.get(i)},this);return this},setupState:function(){this.originalState={};this.saveState()},intersectsWithRect:function(t,v){var y=this.oCoords,i=new d.Point(y.tl.x,y.tl.y),u=new d.Point(y.tr.x,y.tr.y),x=new d.Point(y.bl.x,y.bl.y),s=new d.Point(y.br.x,y.br.y);var w=d.Intersection.intersectPolygonRectangle([i,u,s,x],t,v);return(w.status==="Intersection")},intersectsWithObject:function(i){function s(w){return{tl:new d.Point(w.tl.x,w.tl.y),tr:new d.Point(w.tr.x,w.tr.y),bl:new d.Point(w.bl.x,w.bl.y),br:new d.Point(w.br.x,w.br.y)}}var t=s(this.oCoords),v=s(i.oCoords);var u=d.Intersection.intersectPolygonPolygon([t.tl,t.tr,t.br,t.bl],[v.tl,v.tr,v.br,v.bl]);return(u.status==="Intersection")},isContainedWithinObject:function(i){return this.isContainedWithinRect(i.oCoords.tl,i.oCoords.br)},isContainedWithinRect:function(t,v){var x=this.oCoords,i=new d.Point(x.tl.x,x.tl.y),u=new d.Point(x.tr.x,x.tr.y),w=new d.Point(x.bl.x,x.bl.y),s=new d.Point(x.br.x,x.br.y);return i.x>t.x&&u.x<v.x&&i.y>t.y&&w.y<v.y},isType:function(i){return this.type===i},_findTargetCorner:function(x,z){if(!this.hasControls){return false}var y=q(x),w=y.x-z.left,t=y.y-z.top,v,s;for(var u in this.oCoords){if(u==="mtr"&&!this.hasRotatingPoint){return false}s=this._getImageLines(this.oCoords[u].corner,u);v=this._findCrossPoints(w,t,s);if(v%2==1&&v!=0){this.__corner=u;return u}}return false},_findCrossPoints:function(y,x,i){var B,A,t,s,z,w,v=0,u;for(var C in i){u=i[C];if((u.o.y<x)&&(u.d.y<x)){continue}if((u.o.y>=x)&&(u.d.y>=x)){continue}if((u.o.x==u.d.x)&&(u.o.x>=y)){z=u.o.x;w=x}else{B=0;A=(u.d.y-u.o.y)/(u.d.x-u.o.x);t=x-B*y;s=u.o.y-A*u.o.x;z=-(t-s)/(B-A);w=t+B*z}if(z>=y){v+=1}if(v==2){break}}return v},_getImageLines:function(t,s){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_setCornerCoords:function(){var w=this.oCoords,s=b(45-this.getAngle()),u=Math.sqrt(2*Math.pow(this.cornersize,2))/2,i=u*Math.cos(s),t=u*Math.sin(s),x=Math.sin(this.theta),v=Math.cos(this.theta);w.tl.corner={tl:{x:w.tl.x-t,y:w.tl.y-i},tr:{x:w.tl.x+i,y:w.tl.y-t},bl:{x:w.tl.x-i,y:w.tl.y+t},br:{x:w.tl.x+t,y:w.tl.y+i}};w.tr.corner={tl:{x:w.tr.x-t,y:w.tr.y-i},tr:{x:w.tr.x+i,y:w.tr.y-t},br:{x:w.tr.x+t,y:w.tr.y+i},bl:{x:w.tr.x-i,y:w.tr.y+t}};w.bl.corner={tl:{x:w.bl.x-t,y:w.bl.y-i},bl:{x:w.bl.x-i,y:w.bl.y+t},br:{x:w.bl.x+t,y:w.bl.y+i},tr:{x:w.bl.x+i,y:w.bl.y-t}};w.br.corner={tr:{x:w.br.x+i,y:w.br.y-t},bl:{x:w.br.x-i,y:w.br.y+t},br:{x:w.br.x+t,y:w.br.y+i},tl:{x:w.br.x-t,y:w.br.y-i}};w.ml.corner={tl:{x:w.ml.x-t,y:w.ml.y-i},tr:{x:w.ml.x+i,y:w.ml.y-t},bl:{x:w.ml.x-i,y:w.ml.y+t},br:{x:w.ml.x+t,y:w.ml.y+i}};w.mt.corner={tl:{x:w.mt.x-t,y:w.mt.y-i},tr:{x:w.mt.x+i,y:w.mt.y-t},bl:{x:w.mt.x-i,y:w.mt.y+t},br:{x:w.mt.x+t,y:w.mt.y+i}};w.mr.corner={tl:{x:w.mr.x-t,y:w.mr.y-i},tr:{x:w.mr.x+i,y:w.mr.y-t},bl:{x:w.mr.x-i,y:w.mr.y+t},br:{x:w.mr.x+t,y:w.mr.y+i}};w.mb.corner={tl:{x:w.mb.x-t,y:w.mb.y-i},tr:{x:w.mb.x+i,y:w.mb.y-t},bl:{x:w.mb.x-i,y:w.mb.y+t},br:{x:w.mb.x+t,y:w.mb.y+i}};w.mtr.corner={tl:{x:w.mtr.x-t+(x*this.rotatingPointOffset),y:w.mtr.y-i-(v*this.rotatingPointOffset)},tr:{x:w.mtr.x+i+(x*this.rotatingPointOffset),y:w.mtr.y-t-(v*this.rotatingPointOffset)},bl:{x:w.mtr.x-i+(x*this.rotatingPointOffset),y:w.mtr.y+t-(v*this.rotatingPointOffset)},br:{x:w.mtr.x+t+(x*this.rotatingPointOffset),y:w.mtr.y+i-(v*this.rotatingPointOffset)}}},toGrayscale:function(){var i=this.get("fill");if(i){this.set("overlayFill",new d.Color(i).toGrayscale().toRgb())}return this},complexity:function(){return 0},toJSON:function(){return this.toObject()},setGradientFill:function(i,s){this.set("fill",d.Gradient.forObject(this,i,s))},animate:function(s,u,i){var t=this;i||(i={});if(!("from" in i)){i.from=this.get(s)}if(/[+-]/.test((u+"").charAt(0))){u=this.get(s)+parseFloat(u)}d.util.animate({startValue:i.from,endValue:u,byValue:i.by,easing:i.easing,duration:i.duration,onChange:function(v){t.set(s,v);i.onChange&&i.onChange()},onComplete:function(){t.setCoords();i.onComplete&&i.onComplete()}})}});d.Object.prototype.rotate=d.Object.prototype.setAngle;var k=d.Object.prototype;for(var g=k.stateProperties.length;g--;){var j=k.stateProperties[g],e=j.charAt(0).toUpperCase()+j.slice(1),f="set"+e,o="get"+e;if(!k[o]){k[o]=(function(i){return new Function('return this.get("'+i+'")')})(j)}if(!k[f]){k[f]=(function(i){return new Function("value",'return this.set("'+i+'", value)')})(j)}}})(typeof exports!="undefined"?exports:this);(function(b){var c=b.fabric||(b.fabric={}),e=c.util.object.extend,d=c.Object.prototype.set,a={x1:1,x2:1,y1:1,y2:1};if(c.Line){c.warn("fabric.Line is already defined");return}c.Line=c.util.createClass(c.Object,{type:"line",initialize:function(g,f){if(!g){g=[0,0,0,0]}this.callSuper("initialize",f);this.set("x1",g[0]);this.set("y1",g[1]);this.set("x2",g[2]);this.set("y2",g[3]);this._setWidthHeight(f)},_setWidthHeight:function(f){f||(f={});this.set("width",(this.x2-this.x1)||1);this.set("height",(this.y2-this.y1)||1);this.set("left","left" in f?f.left:(this.x1+this.width/2));this.set("top","top" in f?f.top:(this.y1+this.height/2))},set:function(f,g){d.call(this,f,g);if(f in a){this._setWidthHeight()}return this},_render:function(f){f.beginPath();f.moveTo(this.width===1?0:(-this.width/2),this.height===1?0:(-this.height/2));f.lineTo(this.width===1?0:(this.width/2),this.height===1?0:(this.height/2));f.lineWidth=this.strokeWidth;var g=f.strokeStyle;f.strokeStyle=f.fillStyle;f.stroke();f.strokeStyle=g},complexity:function(){return 1},toObject:function(){return e(this.callSuper("toObject"),{x1:this.get("x1"),y1:this.get("y1"),x2:this.get("x2"),y2:this.get("y2")})},toSVG:function(){return["<line ",'x1="',this.get("x1"),'" ','y1="',this.get("y1"),'" ','x2="',this.get("x2"),'" ','y2="',this.get("y2"),'" ','style="',this.getSvgStyles(),'" ',"/>"].join("")}});c.Line.ATTRIBUTE_NAMES="x1 y1 x2 y2 stroke stroke-width transform".split(" ");c.Line.fromElement=function(g,f){var j=c.parseAttributes(g,c.Line.ATTRIBUTE_NAMES);var i=[j.x1||0,j.y1||0,j.x2||0,j.y2||0];return new c.Line(i,e(j,f))};c.Line.fromObject=function(f){var g=[f.x1,f.y1,f.x2,f.y2];return new c.Line(g,f)}})(typeof exports!="undefined"?exports:this);(function(a){var b=a.fabric||(a.fabric={}),d=Math.PI*2,e=b.util.object.extend;if(b.Circle){b.warn("fabric.Circle is already defined.");return}b.Circle=b.util.createClass(b.Object,{type:"circle",initialize:function(f){f=f||{};this.set("radius",f.radius||0);this.callSuper("initialize",f);var g=this.get("radius")*2;this.set("width",g).set("height",g)},toObject:function(){return e(this.callSuper("toObject"),{radius:this.get("radius")})},toSVG:function(){return('<circle cx="0" cy="0" r="'+this.radius+'" style="'+this.getSvgStyles()+'" transform="'+this.getSvgTransform()+'" />')},_render:function(f,g){f.beginPath();f.globalAlpha*=this.opacity;f.arc(g?this.left:0,g?this.top:0,this.radius,0,d,false);f.closePath();if(this.fill){f.fill()}if(this.stroke){f.stroke()}},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(f){this.radius=f;this.set("width",f*2).set("height",f*2)},complexity:function(){return 1}});b.Circle.ATTRIBUTE_NAMES="cx cy r fill fill-opacity opacity stroke stroke-width transform".split(" ");b.Circle.fromElement=function(g,f){f||(f={});var i=b.parseAttributes(g,b.Circle.ATTRIBUTE_NAMES);if(!c(i)){throw Error("value of `r` attribute is required and can not be negative")}if("left" in i){i.left-=(f.width/2)||0}if("top" in i){i.top-=(f.height/2)||0}return new b.Circle(e(i,f))};function c(f){return(("radius" in f)&&(f.radius>0))}b.Circle.fromObject=function(f){return new b.Circle(f)}})(typeof exports!="undefined"?exports:this);(function(a){var b=a.fabric||(a.fabric={});if(b.Triangle){b.warn("fabric.Triangle is already defined");return}b.Triangle=b.util.createClass(b.Object,{type:"triangle",initialize:function(c){c=c||{};this.callSuper("initialize",c);this.set("width",c.width||100).set("height",c.height||100)},_render:function(c){var d=this.width/2,e=this.height/2;c.beginPath();c.moveTo(-d,e);c.lineTo(0,-e);c.lineTo(d,e);c.closePath();if(this.fill){c.fill()}if(this.stroke){c.stroke()}},complexity:function(){return 1},toSVG:function(){var c=this.width/2,d=this.height/2;var e=[-c+" "+d,"0 "+-d,c+" "+d].join(",");return'<polygon points="'+e+'" style="'+this.getSvgStyles()+'" transform="'+this.getSvgTransform()+'" />'}});b.Triangle.fromObject=function(c){return new b.Triangle(c)}})(typeof exports!="undefined"?exports:this);(function(a){var b=a.fabric||(a.fabric={}),c=Math.PI*2,d=b.util.object.extend;if(b.Ellipse){b.warn("fabric.Ellipse is already defined.");return}b.Ellipse=b.util.createClass(b.Object,{type:"ellipse",initialize:function(e){e=e||{};this.callSuper("initialize",e);this.set("rx",e.rx||0);this.set("ry",e.ry||0);this.set("width",this.get("rx")*2);this.set("height",this.get("ry")*2)},toObject:function(){return d(this.callSuper("toObject"),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(){return["<ellipse ",'rx="',this.get("rx"),'" ','ry="',this.get("ry"),'" ','style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransform(),'" ',"/>"].join("")},render:function(e,f){if(this.rx===0||this.ry===0){return}return this.callSuper("render",e,f)},_render:function(e,f){e.beginPath();e.save();e.globalAlpha*=this.opacity;e.transform(1,0,0,this.ry/this.rx,0,0);e.arc(f?this.left:0,f?this.top:0,this.rx,0,c,false);if(this.stroke){e.stroke()}if(this.fill){e.fill()}e.restore()},complexity:function(){return 1}});b.Ellipse.ATTRIBUTE_NAMES="cx cy rx ry fill fill-opacity opacity stroke stroke-width transform".split(" ");b.Ellipse.fromElement=function(f,e){e||(e={});var g=b.parseAttributes(f,b.Ellipse.ATTRIBUTE_NAMES);if("left" in g){g.left-=(e.width/2)||0}if("top" in g){g.top-=(e.height/2)||0}return new b.Ellipse(d(g,e))};b.Ellipse.fromObject=function(e){return new b.Ellipse(e)}})(typeof exports!="undefined"?exports:this);(function(b){var c=b.fabric||(b.fabric={});if(c.Rect){console.warn("fabric.Rect is already defined");return}c.Rect=c.util.createClass(c.Object,{type:"rect",options:{rx:0,ry:0},initialize:function(d){this._initStateProperties();this.callSuper("initialize",d);this._initRxRy()},_initStateProperties:function(){this.stateProperties=this.stateProperties.concat(["rx","ry"])},_initRxRy:function(){if(this.rx&&!this.ry){this.ry=this.rx}else{if(this.ry&&!this.rx){this.rx=this.ry}}},_render:function(f){var j=this.rx||0,i=this.ry||0,d=-this.width/2,k=-this.height/2,e=this.width,g=this.height;f.beginPath();f.globalAlpha*=this.opacity;if(this.group){f.translate(this.x||0,this.y||0)}f.moveTo(d+j,k);f.lineTo(d+e-j,k);f.quadraticCurveTo(d+e,k,d+e,k+i,d+e,k+i);f.lineTo(d+e,k+g-i);f.quadraticCurveTo(d+e,k+g,d+e-j,k+g,d+e-j,k+g);f.lineTo(d+j,k+g);f.quadraticCurveTo(d,k+g,d,k+g-i,d,k+g-i);f.lineTo(d,k+i);f.quadraticCurveTo(d,k,d+j,k,d+j,k);f.closePath();if(this.fill){f.fill()}if(this.stroke){f.stroke()}},_normalizeLeftTopProperties:function(d){if(d.left){this.set("left",d.left+this.getWidth()/2)}this.set("x",d.left||0);if(d.top){this.set("top",d.top+this.getHeight()/2)}this.set("y",d.top||0);return this},complexity:function(){return 1},toObject:function(){return c.util.object.extend(this.callSuper("toObject"),{rx:this.get("rx")||0,ry:this.get("ry")||0})},toSVG:function(){return'<rect x="'+(-1*this.width/2)+'" y="'+(-1*this.height/2)+'" rx="'+this.get("rx")+'" ry="'+this.get("ry")+'" width="'+this.width+'" height="'+this.height+'" style="'+this.getSvgStyles()+'" transform="'+this.getSvgTransform()+'" />'}});c.Rect.ATTRIBUTE_NAMES="x y width height rx ry fill fill-opacity opacity stroke stroke-width transform".split(" ");function a(d){d.left=d.left||0;d.top=d.top||0;return d}c.Rect.fromElement=function(e,d){if(!e){return null}var g=c.parseAttributes(e,c.Rect.ATTRIBUTE_NAMES);g=a(g);var f=new c.Rect(c.util.object.extend((d?c.util.object.clone(d):{}),g));f._normalizeLeftTopProperties(g);return f};c.Rect.fromObject=function(d){return new c.Rect(d)}})(typeof exports!="undefined"?exports:this);(function(b){var c=b.fabric||(b.fabric={}),a=c.util.toFixed;if(c.Polyline){c.warn("fabric.Polyline is already defined");return}c.Polyline=c.util.createClass(c.Object,{type:"polyline",initialize:function(e,d){d=d||{};this.set("points",e);this.callSuper("initialize",d);this._calcDimensions()},_calcDimensions:function(){return c.Polygon.prototype._calcDimensions.call(this)},toObject:function(){return c.Polygon.prototype.toObject.call(this)},toSVG:function(){var f=[];for(var e=0,d=this.points.length;e<d;e++){f.push(a(this.points[e].x,2),",",a(this.points[e].y,2)," ")}return["<polyline ",'points="',f.join(""),'" ','style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransform(),'" ',"/>"].join("")},_render:function(f){var e;f.beginPath();f.moveTo(this.points[0].x,this.points[0].y);for(var g=0,d=this.points.length;g<d;g++){e=this.points[g];f.lineTo(e.x,e.y)}if(this.fill){f.fill()}if(this.stroke){f.stroke()}},complexity:function(){return this.get("points").length}});c.Polyline.ATTRIBUTE_NAMES="fill fill-opacity opacity stroke stroke-width transform".split(" ");c.Polyline.fromElement=function(g,e){if(!g){return null}e||(e={});var j=c.parsePointsAttribute(g.getAttribute("points")),k=c.parseAttributes(g,c.Polyline.ATTRIBUTE_NAMES);for(var f=0,d=j.length;f<d;f++){j[f].x-=(e.width/2)||0;j[f].y-=(e.height/2)||0}return new c.Polyline(j,c.util.object.extend(k,e))};c.Polyline.fromObject=function(d){var e=d.points;return new c.Polyline(e,d)}})(typeof exports!="undefined"?exports:this);(function(f){var g=f.fabric||(f.fabric={}),i=g.util.object.extend,e=g.util.array.min,b=g.util.array.max,a=g.util.toFixed;if(g.Polygon){g.warn("fabric.Polygon is already defined");return}function d(j){return j.x}function c(j){return j.y}g.Polygon=g.util.createClass(g.Object,{type:"polygon",initialize:function(k,j){j=j||{};this.points=k;this.callSuper("initialize",j);this._calcDimensions()},_calcDimensions:function(){var k=this.points,j=e(k,"x"),n=e(k,"y"),m=b(k,"x"),l=b(k,"y");this.width=m-j;this.height=l-n;this.minX=j;this.minY=n},toObject:function(){return i(this.callSuper("toObject"),{points:this.points.concat()})},toSVG:function(){var l=[];for(var k=0,j=this.points.length;k<j;k++){l.push(a(this.points[k].x,2),",",a(this.points[k].y,2)," ")}return["<polygon ",'points="',l.join(""),'" ','style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransform(),'" ',"/>"].join("")},_render:function(l){var k;l.beginPath();l.moveTo(this.points[0].x,this.points[0].y);for(var m=0,j=this.points.length;m<j;m++){k=this.points[m];l.lineTo(k.x,k.y)}if(this.fill){l.fill()}if(this.stroke){l.closePath();l.stroke()}},complexity:function(){return this.points.length}});g.Polygon.ATTRIBUTE_NAMES="fill fill-opacity opacity stroke stroke-width transform".split(" ");g.Polygon.fromElement=function(m,k){if(!m){return null}k||(k={});var n=g.parsePointsAttribute(m.getAttribute("points")),o=g.parseAttributes(m,g.Polygon.ATTRIBUTE_NAMES);for(var l=0,j=n.length;l<j;l++){n[l].x-=(k.width/2)||0;n[l].y-=(k.height/2)||0}return new g.Polygon(n,i(o,k))};g.Polygon.fromObject=function(j){return new g.Polygon(j.points,j)}})(typeof exports!="undefined"?exports:this);(function(a){var m={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7};function l(H,D,B,C){var u=C[0];var s=C[1];var v=C[2];var F=C[3];var G=C[4];var A=C[5];var z=C[6];var t=j(A,z,u,s,F,G,v,D,B);for(var w=0;w<t.length;w++){var E=f.apply(this,t[w]);H.bezierCurveTo.apply(H,E)}}var b={},q={},p=Array.prototype.join,k;function j(V,U,Q,P,L,R,I,O,N){k=p.call(arguments);if(b[k]){return b[k]}var t=I*(Math.PI/180);var Y=Math.sin(t);var ac=Math.cos(t);Q=Math.abs(Q);P=Math.abs(P);var C=ac*(O-V)*0.5+Y*(N-U)*0.5;var B=ac*(N-U)*0.5-Y*(O-V)*0.5;var G=(C*C)/(Q*Q)+(B*B)/(P*P);if(G>1){G=Math.sqrt(G);Q*=G;P*=G}var T=ac/Q;var S=Y/Q;var F=(-Y)/P;var E=(ac)/P;var J=T*O+S*N;var s=F*O+E*N;var H=T*V+S*U;var ad=F*V+E*U;var ab=(H-J)*(H-J)+(ad-s)*(ad-s);var W=1/ab-0.25;if(W<0){W=0}var A=Math.sqrt(W);if(R==L){A=-A}var X=0.5*(J+H)-A*(ad-s);var M=0.5*(s+ad)+A*(H-J);var z=Math.atan2(s-M,J-X);var w=Math.atan2(ad-M,H-X);var aa=w-z;if(aa<0&&R==1){aa+=2*Math.PI}else{if(aa>0&&R==0){aa-=2*Math.PI}}var D=Math.ceil(Math.abs(aa/(Math.PI*0.5+0.001)));var K=[];for(var Z=0;Z<D;Z++){var v=z+Z*aa/D;var u=z+(Z+1)*aa/D;K[Z]=[X,M,v,u,Q,P,Y,ac]}return(b[k]=K)}function f(y,v,G,E,A,z,w,F){k=p.call(arguments);if(q[k]){return q[k]}var M=F*A;var L=-w*z;var C=w*A;var B=F*z;var H=0.5*(E-G);var D=(8/3)*Math.sin(H*0.5)*Math.sin(H*0.5)/Math.sin(H);var K=y+Math.cos(G)-D*Math.sin(G);var x=v+Math.sin(G)+D*Math.cos(G);var I=y+Math.cos(E);var s=v+Math.sin(E);var J=I+D*Math.sin(E);var u=s-D*Math.cos(E);return(q[k]=[M*K+L*x,C*K+B*x,M*J+L*u,C*J+B*u,M*I+L*s,C*I+B*s])}"use strict";var d=a.fabric||(a.fabric={}),e=d.util.array.min,i=d.util.array.max,g=d.util.object.extend,c=Object.prototype.toString;if(d.Path){d.warn("fabric.Path is already defined");return}if(!d.Object){d.warn("fabric.Path requires fabric.Object");return}function o(s){if(s[0]==="H"){return s[1]}return s[s.length-2]}function n(s){if(s[0]==="V"){return s[1]}return s[s.length-1]}d.Path=d.util.createClass(d.Object,{type:"path",initialize:function(u,t){t=t||{};this.setOptions(t);if(!u){throw Error("`path` argument is required")}var s=c.call(u)==="[object Array]";this.path=s?u:u.match&&u.match(/[a-zA-Z][^a-zA-Z]*/g);if(!this.path){return}if(!s){this._initializeFromArray(t)}if(t.sourcePath){this.setSourcePath(t.sourcePath)}},_initializeFromArray:function(t){var s="width" in t,u="height" in t;this.path=this._parsePath();if(!s||!u){g(this,this._parseDimensions());if(s){this.width=t.width}if(u){this.height=t.height}}},_render:function(F){var B,D=0,C=0,s=0,G=0,z,w,u=-(this.width/2),E=-(this.height/2);for(var v=0,A=this.path.length;v<A;++v){B=this.path[v];switch(B[0]){case"l":D+=B[1];C+=B[2];F.lineTo(D+u,C+E);break;case"L":D=B[1];C=B[2];F.lineTo(D+u,C+E);break;case"h":D+=B[1];F.lineTo(D+u,C+E);break;case"H":D=B[1];F.lineTo(D+u,C+E);break;case"v":C+=B[1];F.lineTo(D+u,C+E);break;case"V":C=B[1];F.lineTo(D+u,C+E);break;case"m":D+=B[1];C+=B[2];F.moveTo(D+u,C+E);break;case"M":D=B[1];C=B[2];F.moveTo(D+u,C+E);break;case"c":z=D+B[5];w=C+B[6];s=D+B[3];G=C+B[4];F.bezierCurveTo(D+B[1]+u,C+B[2]+E,s+u,G+E,z+u,w+E);D=z;C=w;break;case"C":D=B[5];C=B[6];s=B[3];G=B[4];F.bezierCurveTo(B[1]+u,B[2]+E,s+u,G+E,D+u,C+E);break;case"s":z=D+B[3];w=C+B[4];s=2*D-s;G=2*C-G;F.bezierCurveTo(s+u,G+E,D+B[1]+u,C+B[2]+E,z+u,w+E);s=D+B[1];G=C+B[2];D=z;C=w;break;case"S":z=B[3];w=B[4];s=2*D-s;G=2*C-G;F.bezierCurveTo(s+u,G+E,B[1]+u,B[2]+E,z+u,w+E);D=z;C=w;s=B[1];G=B[2];break;case"q":D+=B[3];C+=B[4];F.quadraticCurveTo(B[1]+u,B[2]+E,D+u,C+E);break;case"Q":D=B[3];C=B[4];s=B[1];G=B[2];F.quadraticCurveTo(s+u,G+E,D+u,C+E);break;case"T":z=D;w=C;D=B[1];C=B[2];s=-s+2*z;G=-G+2*w;F.quadraticCurveTo(s+u,G+E,D+u,C+E);break;case"a":l(F,D+u,C+E,[B[1],B[2],B[3],B[4],B[5],B[6]+D+u,B[7]+C+E]);D+=B[6];C+=B[7];break;case"A":l(F,D+u,C+E,[B[1],B[2],B[3],B[4],B[5],B[6]+u,B[7]+E]);D=B[6];C=B[7];break;case"z":case"Z":F.closePath();break}}},render:function(t,u){t.save();var s=this.transformMatrix;if(s){t.transform(s[0],s[1],s[2],s[3],s[4],s[5])}if(!u){this.transform(t)}if(this.overlayFill){t.fillStyle=this.overlayFill}else{if(this.fill){t.fillStyle=this.fill}}if(this.stroke){t.strokeStyle=this.stroke}t.beginPath();this._render(t);if(this.fill){t.fill()}if(this.stroke){t.strokeStyle=this.stroke;t.lineWidth=this.strokeWidth;t.lineCap=t.lineJoin="round";t.stroke()}if(!u&&this.active){this.drawBorders(t);this.hideCorners||this.drawCorners(t)}t.restore()},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(){var s=g(this.callSuper("toObject"),{path:this.path});if(this.sourcePath){s.sourcePath=this.sourcePath}if(this.transformMatrix){s.transformMatrix=this.transformMatrix}return s},toDatalessObject:function(){var s=this.toObject();if(this.sourcePath){s.path=this.sourcePath}delete s.sourcePath;return s},toSVG:function(){var v=[];for(var t=0,s=this.path.length;t<s;t++){v.push(this.path[t].join(" "))}var u=v.join(" ");return['<g transform="',this.getSvgTransform(),'">',"<path ",'width="',this.width,'" height="',this.height,'" ','d="',u,'" ','style="',this.getSvgStyles(),'" ','transform="translate(',(-this.width/2)," ",(-this.height/2),')" />',"</g>"].join("")},complexity:function(){return this.path.length},_parsePath:function(){var E=[],B,x,A;for(var w=0,v,s,y=this.path.length;w<y;w++){B=this.path[w];x=B.slice(1).trim().replace(/(\d)-/g,"$1###-").split(/\s|,|###/);s=[B.charAt(0)];for(var v=0,C=x.length;v<C;v++){A=parseFloat(x[v]);if(!isNaN(A)){s.push(A)}}var u=s[0].toLowerCase(),D=m[u];if(s.length-1>D){for(var t=1,z=s.length;t<z;t+=D){E.push([s[0]].concat(s.slice(t,t+D)))}}else{E.push(s)}}return E},_parseDimensions:function(){var B=[],z=[],C,A,D=false,F,E;this.path.forEach(function(y,x){if(y[0]!=="H"){C=(x===0)?o(y):o(this.path[x-1])}if(y[0]!=="V"){A=(x===0)?n(y):n(this.path[x-1])}if(y[0]===y[0].toLowerCase()){D=true}F=D?C+o(y):y[0]==="V"?C:o(y);E=D?A+n(y):y[0]==="H"?A:n(y);var G=parseInt(F,10);if(!isNaN(G)){B.push(G)}G=parseInt(E,10);if(!isNaN(G)){z.push(G)}},this);var u=e(B),t=e(z),w=0,v=0;var s={top:t-v,left:u-w,bottom:i(z)-v,right:i(B)-w};s.width=s.right-s.left;s.height=s.bottom-s.top;return s}});d.Path.fromObject=function(s){return new d.Path(s.path,s)};d.Path.ATTRIBUTE_NAMES="d fill fill-opacity opacity fill-rule stroke stroke-width transform".split(" ");d.Path.fromElement=function(t,s){var u=d.parseAttributes(t,d.Path.ATTRIBUTE_NAMES);return new d.Path(u.d,g(u,s))}})(typeof exports!="undefined"?exports:this);(function(a){var d=a.fabric||(a.fabric={}),i=d.util.object.extend,f=d.util.array.invoke,j=d.Object.prototype.set,e=d.Object.prototype.toObject,b=d.util.string.camelize,g=d.util.string.capitalize;if(d.PathGroup){d.warn("fabric.PathGroup is already defined");return}d.PathGroup=d.util.createClass(d.Path,{type:"path-group",forceFillOverwrite:false,initialize:function(m,k){k=k||{};this.paths=m||[];for(var l=this.paths.length;l--;){this.paths[l].group=this}this.setOptions(k);this.setCoords();if(k.sourcePath){this.setSourcePath(k.sourcePath)}},render:function(o){if(this.stub){o.save();this.transform(o);this.stub.render(o,false);if(this.active){this.drawBorders(o);this.drawCorners(o)}o.restore()}else{o.save();var k=this.transformMatrix;if(k){o.transform(k[0],k[1],k[2],k[3],k[4],k[5])}this.transform(o);for(var p=0,n=this.paths.length;p<n;++p){this.paths[p].render(o,true)}if(this.active){this.drawBorders(o);this.hideCorners||this.drawCorners(o)}o.restore()}},set:function(m,l){if((m==="fill"||m==="overlayFill")&&this.isSameColor()){this[m]=l;var k=this.paths.length;while(k--){this.paths[k].set(m,l)}}else{j.call(this,m,l)}return this},toObject:function(){return i(e.call(this),{paths:f(this.getObjects(),"clone"),sourcePath:this.sourcePath})},toDatalessObject:function(){var k=this.toObject();if(this.sourcePath){k.paths=this.sourcePath}return k},toSVG:function(){var n=this.getObjects();var l=["<g ",'width="',this.width,'" ','height="',this.height,'" ','style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransform(),'" ',">"];for(var m=0,k=n.length;m<k;m++){l.push(n[m].toSVG())}l.push("</g>");return l.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var k=this.getObjects()[0].get("fill");return this.getObjects().every(function(l){return l.get("fill")===k})},complexity:function(){return this.paths.reduce(function(k,l){return k+((l&&l.complexity)?l.complexity():0)},0)},toGrayscale:function(){var k=this.paths.length;while(k--){this.paths[k].toGrayscale()}return this},getObjects:function(){return this.paths}});function c(n){for(var m=0,k=n.length;m<k;m++){if(!(n[m] instanceof d.Object)){var l=b(g(n[m].type));n[m]=d[l].fromObject(n[m])}}return n}d.PathGroup.fromObject=function(k){var l=c(k.paths);return new d.PathGroup(l,k)}})(typeof exports!="undefined"?exports:this);(function(d){var e=d.fabric||(d.fabric={}),g=e.util.object.extend,c=e.util.array.min,a=e.util.array.max,b=e.util.array.invoke,f=e.util.removeFromArray;if(e.Group){return}e.Group=e.util.createClass(e.Object,{type:"group",initialize:function(j,i){this.objects=j||[];this.originalState={};this.callSuper("initialize");this._calcBounds();this._updateObjectsCoords();if(i){g(this,i)}this._setOpacityIfSame();this.setCoords(true);this.saveCoords()},_updateObjectsCoords:function(){var j=this.left,i=this.top;this.forEachObject(function(k){var l=k.get("left"),m=k.get("top");k.set("originalLeft",l);k.set("originalTop",m);k.set("left",l-j);k.set("top",m-i);k.setCoords();k.hideCorners=true},this)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},getObjects:function(){return this.objects},addWithUpdate:function(i){this._restoreObjectsState();this.objects.push(i);this._calcBounds();this._updateObjectsCoords();return this},removeWithUpdate:function(i){this._restoreObjectsState();f(this.objects,i);i.setActive(false);this._calcBounds();this._updateObjectsCoords();return this},add:function(i){this.objects.push(i);return this},remove:function(i){f(this.objects,i);return this},size:function(){return this.getObjects().length},set:function(j,l){if(typeof l=="function"){this.set(j,l(this[j]))}else{if(j==="fill"||j==="opacity"){var k=this.objects.length;this[j]=l;while(k--){this.objects[k].set(j,l)}}else{this[j]=l}}return this},contains:function(i){return this.objects.indexOf(i)>-1},toObject:function(){return g(this.callSuper("toObject"),{objects:b(this.objects,"clone")})},render:function(k,p){k.save();this.transform(k);var o=Math.max(this.scaleX,this.scaleY);for(var m=0,j=this.objects.length,l;l=this.objects[m];m++){var n=l.borderScaleFactor;l.borderScaleFactor=o;l.render(k);l.borderScaleFactor=n}if(!p&&this.active){this.drawBorders(k);this.hideCorners||this.drawCorners(k)}k.restore();this.setCoords()},item:function(i){return this.getObjects()[i]},complexity:function(){return this.getObjects().reduce(function(j,i){j+=(typeof i.complexity=="function")?i.complexity():0;return j},0)},_restoreObjectsState:function(){this.objects.forEach(this._restoreObjectState,this);return this},_restoreObjectState:function(k){var m=this.get("left"),n=this.get("top"),i=this.getAngle()*(Math.PI/180),l=k.get("originalLeft"),o=k.get("originalTop"),j=Math.cos(i)*k.get("top")+Math.sin(i)*k.get("left"),p=-Math.sin(i)*k.get("top")+Math.cos(i)*k.get("left");k.setAngle(k.getAngle()+this.getAngle());k.set("left",m+p*this.get("scaleX"));k.set("top",n+j*this.get("scaleY"));k.set("scaleX",k.get("scaleX")*this.get("scaleX"));k.set("scaleY",k.get("scaleY")*this.get("scaleY"));k.setCoords();k.hideCorners=false;k.setActive(false);k.setCoords();return this},destroy:function(){return this._restoreObjectsState()},saveCoords:function(){this._originalLeft=this.get("left");this._originalTop=this.get("top");return this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){this.forEachObject(function(i){i.setCoords()});return this},activateAllObjects:function(){this.forEachObject(function(i){i.setActive()});return this},forEachObject:e.StaticCanvas.prototype.forEachObject,_setOpacityIfSame:function(){var k=this.getObjects(),j=k[0]?k[0].get("opacity"):1;var i=k.every(function(l){return l.get("opacity")===j});if(i){this.opacity=j}},_calcBounds:function(){var u=[],s=[],q,p,l,j,n,m,w,t=0,v=this.objects.length;for(;t<v;++t){n=this.objects[t];n.setCoords();for(var k in n.oCoords){u.push(n.oCoords[k].x);s.push(n.oCoords[k].y)}}q=c(u);l=a(u);p=c(s);j=a(s);m=(l-q)||0;w=(j-p)||0;this.width=m;this.height=w;this.left=(q+m/2)||0;this.top=(p+w/2)||0},containsPoint:function(j){var m=this.get("width")/2,i=this.get("height")/2,l=this.get("left"),k=this.get("top");return l-m<j.x&&l+m>j.x&&k-i<j.y&&k+i>j.y},toGrayscale:function(){var j=this.objects.length;while(j--){this.objects[j].toGrayscale()}}});e.Group.fromObject=function(i,j){e.util.enlivenObjects(i.objects,function(k){delete i.objects;j&&j(new e.Group(k,i))})};e.Group.async=true})(typeof exports!="undefined"?exports:this);(function(a){var b=fabric.util.object.extend;if(!a.fabric){a.fabric={}}if(a.fabric.Image){fabric.warn("fabric.Image is already defined.");return}if(!fabric.Object){fabric.warn("fabric.Object is required for fabric.Image initialization");return}fabric.Image=fabric.util.createClass(fabric.Object,{active:false,bordervisibility:false,cornervisibility:false,type:"image",initialize:function(d,c){c||(c={});this.callSuper("initialize",c);this._initElement(d);this._originalImage=this.getElement();this._initConfig(c);this.filters=[];if(c.filters){this.filters=c.filters;this.applyFilters()}},getElement:function(){return this._element},setElement:function(c){this._element=c;this._initConfig();return this},getOriginalSize:function(){var c=this.getElement();return{width:c.width,height:c.height}},setBorderVisibility:function(c){this._resetWidthHeight();this._adjustWidthHeightToBorders(showBorder);this.setCoords()},setCornersVisibility:function(c){this.cornervisibility=!!c},render:function(c,d){c.save();if(!d){this.transform(c)}this._render(c);if(this.active&&!d){this.drawBorders(c);this.hideCorners||this.drawCorners(c)}c.restore()},toObject:function(){return b(this.callSuper("toObject"),{src:this._originalImage.src||this._originalImage._src,filters:this.filters.concat()})},toSVG:function(){return'<g transform="'+this.getSvgTransform()+'"><image xlink:href="'+this.getSvgSrc()+'" style="'+this.getSvgStyles()+'" transform="translate('+(-this.width/2)+" "+(-this.height/2)+')" width="'+this.width+'" height="'+this.height+'"/></g>'},getSrc:function(){return this.getElement().src||this.getElement()._src},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(c){this.constructor.fromObject(this.toObject(),c)},applyFilters:function(j){if(this.filters.length===0){this.setElement(this._originalImage);j&&j();return}var c=typeof Buffer!=="undefined"&&typeof window==="undefined",g=this._originalImage,e=fabric.document.createElement("canvas"),f=c?new (require("canvas").Image):fabric.document.createElement("img"),i=this;if(!e.getContext&&typeof G_vmlCanvasManager!="undefined"){G_vmlCanvasManager.initElement(e)}e.width=g.width;e.height=g.height;e.getContext("2d").drawImage(g,0,0);this.filters.forEach(function(k){k&&k.applyTo(e)});f.onload=function(){i.setElement(f);j&&j();f.onload=e=g=null};f.width=g.width;f.height=g.height;if(c){var d=e.toDataURL("image/png").replace(/data:image\/png;base64,/,"");f.src=new Buffer(d,"base64");i.setElement(f);j&&j()}else{f.src=e.toDataURL("image/png")}return this},_render:function(c){c.drawImage(this.getElement(),-this.width/2,-this.height/2,this.width,this.height)},_adjustWidthHeightToBorders:function(c){if(c){this.currentBorder=this.borderwidth;this.width+=(2*this.currentBorder);this.height+=(2*this.currentBorder)}else{this.currentBorder=0}},_resetWidthHeight:function(){var c=this.getElement();this.set("width",c.width);this.set("height",c.height)},_initElement:function(c){this.setElement(fabric.util.getById(c));fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(c){this.setOptions(c||{});this._setBorder();this._setWidthHeight()},_initFilters:function(c){if(c.filters&&c.filters.length){this.filters=c.filters.map(function(d){return d&&fabric.Image.filters[d.type].fromObject(d)})}},_setBorder:function(){if(this.bordervisibility){this.currentBorder=this.borderwidth}else{this.currentBorder=0}},_setWidthHeight:function(){var c=2*this.currentBorder;this.width=(this.getElement().width||0)+c;this.height=(this.getElement().height||0)+c},complexity:function(){return 1}});fabric.Image.CSS_CANVAS="canvas-img";fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc;fabric.Image.fromObject=function(d,f){var c=fabric.document.createElement("img"),e=d.src;if(d.width){c.width=d.width}if(d.height){c.height=d.height}c.onload=function(){fabric.Image.prototype._initFilters.call(d,d);var g=new fabric.Image(c,d);f&&f(g);c=c.onload=null};c.src=e};fabric.Image.fromURL=function(d,f,e){var c=fabric.document.createElement("img");c.onload=function(){if(f){f(new fabric.Image(c,e))}c=c.onload=null};c.src=d};fabric.Image.ATTRIBUTE_NAMES="x y width height fill fill-opacity opacity stroke stroke-width transform xlink:href".split(" ");fabric.Image.fromElement=function(d,f,c){c||(c={});var e=fabric.parseAttributes(d,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(e["xlink:href"],f,b(e,c))};fabric.Image.async=true})(typeof exports!="undefined"?exports:this);fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var a=this.get("angle");if(a>-225&&a<=-135){return -180}else{if(a>-135&&a<=-45){return -90}else{if(a>-45&&a<=45){return 0}else{if(a>45&&a<=135){return 90}else{if(a>135&&a<=225){return 180}else{if(a>225&&a<=315){return 270}else{if(a>315){return 360}}}}}}}return 0},straighten:function(){var a=this._getAngleValueForStraighten();this.setAngle(a);return this},fxStraighten:function(b){b=b||{};var c=function(){},d=b.onComplete||c,a=b.onChange||c,e=this;fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(f){e.setAngle(f);a()},onComplete:function(){e.setCoords();d()},onStart:function(){e.setActive(false)}});return this}});fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(a){a.straighten();this.renderAll();return this},fxStraightenObject:function(a){a.fxStraighten({onChange:this.renderAll.bind(this)});return this}});fabric.Image.filters={};fabric.Image.filters.Grayscale=fabric.util.createClass({type:"Grayscale",applyTo:function(d){var c=d.getContext("2d"),a=c.getImageData(0,0,d.width,d.height),k=a.data,e=a.width,m=a.height,l,b,g,f;for(g=0;g<e;g++){for(f=0;f<m;f++){l=(g*4)*m+(f*4);b=(k[l]+k[l+1]+k[l+2])/3;k[l]=b;k[l+1]=b;k[l+2]=b}}c.putImageData(a,0,0)},toJSON:function(){return{type:this.type}}});fabric.Image.filters.Grayscale.fromObject=function(){return new fabric.Image.filters.Grayscale()};fabric.Image.filters.RemoveWhite=fabric.util.createClass({type:"RemoveWhite",initialize:function(a){a||(a={});this.threshold=a.threshold||30;this.distance=a.distance||20},applyTo:function(f){var e=f.getContext("2d"),c=e.getImageData(0,0,f.width,f.height),l=c.data,m=this.threshold,d=this.distance,j=255-m,q=Math.abs,a,n,p;for(var k=0,o=l.length;k<o;k+=4){a=l[k];n=l[k+1];p=l[k+2];if(a>j&&n>j&&p>j&&q(a-n)<d&&q(a-p)<d&&q(n-p)<d){l[k+3]=1}}e.putImageData(c,0,0)},toJSON:function(){return{type:this.type,threshold:this.threshold,distance:this.distance}}});fabric.Image.filters.RemoveWhite.fromObject=function(a){return new fabric.Image.filters.RemoveWhite(a)};fabric.Image.filters.Invert=fabric.util.createClass({type:"Invert",applyTo:function(d){var c=d.getContext("2d"),f=c.getImageData(0,0,d.width,d.height),e=f.data,a=e.length,b;for(b=0;b<a;b+=4){e[b]=255-e[b];e[b+1]=255-e[b+1];e[b+2]=255-e[b+2]}c.putImageData(f,0,0)},toJSON:function(){return{type:this.type}}});fabric.Image.filters.Invert.fromObject=function(){return new fabric.Image.filters.Invert()};fabric.Image.filters.Sepia=fabric.util.createClass({type:"Sepia",applyTo:function(d){var c=d.getContext("2d"),g=c.getImageData(0,0,d.width,d.height),e=g.data,a=e.length,b,f;for(b=0;b<a;b+=4){f=0.3*e[b]+0.59*e[b+1]+0.11*e[b+2];e[b]=f+100;e[b+1]=f+50;e[b+2]=f+255}c.putImageData(g,0,0)},toJSON:function(){return{type:this.type}}});fabric.Image.filters.Sepia.fromObject=function(){return new fabric.Image.filters.Sepia()};fabric.Image.filters.Sepia2=fabric.util.createClass({type:"Sepia2",applyTo:function(e){var d=e.getContext("2d"),a=d.getImageData(0,0,e.width,e.height),j=a.data,f=j.length,k,c,l,m;for(k=0;k<f;k+=4){c=j[k];l=j[k+1];m=j[k+2];j[k]=(c*0.393+l*0.769+m*0.189)/1.351;j[k+1]=(c*0.349+l*0.686+m*0.168)/1.203;j[k+2]=(c*0.272+l*0.534+m*0.131)/2.14}d.putImageData(a,0,0)},toJSON:function(){return{type:this.type}}});fabric.Image.filters.Sepia2.fromObject=function(){return new fabric.Image.filters.Sepia2()};fabric.Image.filters.Brightness=fabric.util.createClass({type:"Brightness",initialize:function(a){a||(a={});this.brightness=a.brightness||100},applyTo:function(d){var c=d.getContext("2d"),g=c.getImageData(0,0,d.width,d.height),e=g.data,f=this.brightness;for(var b=0,a=e.length;b<a;b+=4){e[b]+=f;e[b+1]+=f;e[b+2]+=f}c.putImageData(g,0,0)},toJSON:function(){return{type:this.type,brightness:this.brightness}}});fabric.Image.filters.Brightness.fromObject=function(a){return new fabric.Image.filters.Brightness(a)};fabric.Image.filters.Noise=fabric.util.createClass({type:"Noise",initialize:function(a){a||(a={});this.noise=a.noise||100},applyTo:function(e){var d=e.getContext("2d"),j=d.getImageData(0,0,e.width,e.height),g=j.data,b=this.noise,f;for(var c=0,a=g.length;c<a;c+=4){f=(0.5-Math.random())*b;g[c]+=f;g[c+1]+=f;g[c+2]+=f}d.putImageData(j,0,0)},toJSON:function(){return{type:this.type,noise:this.noise}}});fabric.Image.filters.Noise.fromObject=function(a){return new fabric.Image.filters.Noise(a)};fabric.Image.filters.GradientTransparency=fabric.util.createClass({type:"GradientTransparency",initialize:function(a){a||(a={});this.threshold=a.threshold||100},applyTo:function(e){var d=e.getContext("2d"),j=d.getImageData(0,0,e.width,e.height),g=j.data,b=this.threshold,f=g.length;for(var c=0,a=g.length;c<a;c+=4){g[c+3]=b+255*(f-c)/f}d.putImageData(j,0,0)},toJSON:function(){return{type:this.type,threshold:this.threshold}}});fabric.Image.filters.GradientTransparency.fromObject=function(a){return new fabric.Image.filters.GradientTransparency(a)};(function(b){var c=b.fabric||(b.fabric={}),e=c.util.object.extend,d=c.util.object.clone,a=c.util.toFixed;if(c.Text){c.warn("fabric.Text is already defined");return}if(!c.Object){c.warn("fabric.Text requires fabric.Object");return}c.Text=c.util.createClass(c.Object,{fontSize:40,fontWeight:100,fontFamily:"Times_New_Roman",textDecoration:"",textShadow:null,textAlign:"left",fontStyle:"",lineHeight:1.6,strokeStyle:"",strokeWidth:1,backgroundColor:"",path:null,type:"text",initialize:function(g,f){this._initStateProperties();this.text=g;this.setOptions(f);this.theta=this.angle*Math.PI/180;this.width=this.getWidth();this.setCoords()},_initStateProperties:function(){this.stateProperties=this.stateProperties.concat();this.stateProperties.push("fontFamily","fontWeight","fontSize","path","text","textDecoration","textShadow","textAlign","fontStyle","lineHeight","strokeStyle","strokeWidth","backgroundColor");c.util.removeFromArray(this.stateProperties,"width")},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(f){var i=Cufon.textOptions||(Cufon.textOptions={});i.left=this.left;i.top=this.top;i.context=f;i.color=this.fill;var g=this._initDummyElement();this.transform(f);Cufon.replaceElement(g,{engine:"canvas",separate:"none",fontFamily:this.fontFamily,fontWeight:this.fontWeight,textDecoration:this.textDecoration,textShadow:this.textShadow,textAlign:this.textAlign,fontStyle:this.fontStyle,lineHeight:this.lineHeight,strokeStyle:this.strokeStyle,strokeWidth:this.strokeWidth,backgroundColor:this.backgroundColor});this.width=i.width;this.height=i.height;this._totalLineHeight=i.totalLineHeight;this._fontAscent=i.fontAscent;this._boundaries=i.boundaries;this._shadowOffsets=i.shadowOffsets;this._shadows=i.shadows||[];this.setCoords()},_initDummyElement:function(){var g=c.document.createElement("pre"),f=c.document.createElement("div");f.appendChild(g);if(typeof G_vmlCanvasManager=="undefined"){g.innerHTML=this.text}else{g.innerText=this.text.replace(/\r?\n/gi,"\r")}g.style.fontSize=this.fontSize+"px";g.style.letterSpacing="normal";return g},render:function(f,g){f.save();this._render(f);if(!g&&this.active){this.drawBorders(f);this.hideCorners||this.drawCorners(f)}f.restore()},toObject:function(){return e(this.callSuper("toObject"),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textShadow:this.textShadow,textAlign:this.textAlign,path:this.path,strokeStyle:this.strokeStyle,strokeWidth:this.strokeWidth,backgroundColor:this.backgroundColor})},toSVG:function(){var j=this.text.split(/\r?\n/),k=-this._fontAscent-((this._fontAscent/5)*this.lineHeight),g=-(this.width/2),f=(this.height/2)-(j.length*this.fontSize)-this._totalLineHeight,i=this._getSVGTextAndBg(k,g,j),l=this._getSVGShadows(k,j);f+=((this._fontAscent/5)*this.lineHeight);return['<g transform="',this.getSvgTransform(),'">',i.textBgRects.join(""),"<text ",(this.fontFamily?"font-family=\"'"+this.fontFamily+"'\" ":""),(this.fontSize?'font-size="'+this.fontSize+'" ':""),(this.fontStyle?'font-style="'+this.fontStyle+'" ':""),(this.fontWeight?'font-weight="'+this.fontWeight+'" ':""),(this.textDecoration?'text-decoration="'+this.textDecoration+'" ':""),'style="',this.getSvgStyles(),'" ','transform="translate(',a(g,2)," ",a(f,2),')">',l.join(""),i.textSpans.join(""),"</text>","</g>"].join("")},_getSVGShadows:function(k,o){var p=[],l,m,q,g,f=1;for(l=0,q=this._shadows.length;l<q;l++){for(m=0,g=o.length;m<g;m++){if(o[m]!==""){var n=(this._boundaries&&this._boundaries[m])?this._boundaries[m].left:0;p.push('<tspan x="',a((n+f)+this._shadowOffsets[l][0],2),(m===0?'" y':'" dy'),'="',a(k+(m===0?this._shadowOffsets[l][1]:0),2),'" ',this._getFillAttributes(this._shadows[l].color),">",c.util.string.escapeXml(o[m]),"</tspan>");f=1}else{f++}}}return p},_getSVGTextAndBg:function(k,j,o){var g=[],l=[],m,n,p,f=1;for(m=0,p=o.length;m<p;m++){if(o[m]!==""){n=(this._boundaries&&this._boundaries[m])?a(this._boundaries[m].left,2):0;g.push('<tspan x="',n,'" ',(m===0?"y":"dy"),'="',a(k*f,2),'" ',this._getFillAttributes(this.fill),">",c.util.string.escapeXml(o[m]),"</tspan>");f=1}else{f++}if(!this.backgroundColor){continue}l.push("<rect ",this._getFillAttributes(this.backgroundColor),' x="',a(j+this._boundaries[m].left,2),'" y="',a((k*m)-this.height/2,2),'" width="',a(this._boundaries[m].width,2),'" height="',a(this._boundaries[m].height,2),'"></rect>')}return{textSpans:g,textBgRects:l}},_getFillAttributes:function(f){var g=f?new c.Color(f):"";if(!g||!g.getSource()||g.getAlpha()===1){return'fill="'+f+'"'}return'opacity="'+g.getAlpha()+'" fill="'+g.setAlpha(1).toRgb()+'"'},setColor:function(f){this.set("fill",f);return this},setFontsize:function(f){this.set("fontSize",f);this.setCoords();return this},getText:function(){return this.text},setText:function(f){this.set("text",f);this.setCoords();return this},set:function(f,g){if(typeof f=="object"){for(var i in f){this.set(i,f[i])}}else{this[f]=g;if(f==="fontFamily"&&this.path){this.path=this.path.replace(/(.*?)([^\/]*)(\.font\.js)/,"$1"+g+"$3")}}return this}});c.Text.fromObject=function(f){return new c.Text(f.text,d(f))};c.Text.fromElement=function(f){};c.Text.async=true})(typeof exports!="undefined"?exports:this);(function(){if(typeof document!="undefined"&&typeof window!="undefined"){return}var DOMParser=new require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),Canvas=require("canvas"),Image=require("canvas").Image;function request(url,encoding,callback){var oURL=URL.parse(url),client=HTTP.createClient(oURL.port,oURL.hostname),request=client.request("GET",oURL.pathname,{host:oURL.hostname});client.addListener("error",function(err){if(err.errno===process.ECONNREFUSED){fabric.log("ECONNREFUSED: connection refused to "+client.host+":"+client.port)}else{fabric.log(err.message)}});request.end();request.on("response",function(response){var body="";if(encoding){response.setEncoding(encoding)}response.on("end",function(){callback(body)});response.on("data",function(chunk){if(response.statusCode==200){body+=chunk}})})}fabric.util.loadImage=function(url,callback){request(url,"binary",function(body){var img=new Image();img.src=new Buffer(body,"binary");img._src=url;callback(img)})};fabric.loadSVGFromURL=function(url,callback){url=url.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim();request(url,"",function(body){var doc=new DOMParser().parseFromString(body);fabric.parseSVGDocument(doc.documentElement,function(results,options){callback(results,options)})})};fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body);callback&&callback()})};fabric.Image.fromObject=function(object,callback){fabric.util.loadImage(object.src,function(img){var oImg=new fabric.Image(img);oImg._initConfig(object);oImg._initFilters(object);callback(oImg)})};fabric.createCanvasForNode=function(width,height){var canvasEl=fabric.document.createElement("canvas"),nodeCanvas=new Canvas(width||600,height||600);canvasEl.style={};canvasEl.width=nodeCanvas.width;canvasEl.height=nodeCanvas.height;var canvas=fabric.Canvas||fabric.StaticCanvas;var fabricCanvas=new canvas(canvasEl);fabricCanvas.contextContainer=nodeCanvas.getContext("2d");fabricCanvas.nodeCanvas=nodeCanvas;return fabricCanvas};fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()};if(fabric.Canvas){fabric.Canvas.prototype.createPNGStream}var origSetWidth=fabric.StaticCanvas.prototype.setWidth;fabric.StaticCanvas.prototype.setWidth=function(width){origSetWidth.call(this);this.nodeCanvas.width=width;return this};if(fabric.Canvas){fabric.Canvas.prototype.setWidth=fabric.StaticCanvas.prototype.setWidth}var origSetHeight=fabric.StaticCanvas.prototype.setHeight;fabric.StaticCanvas.prototype.setHeight=function(height){origSetHeight.call(this);this.nodeCanvas.height=height;return this};if(fabric.Canvas){fabric.Canvas.prototype.setHeight=fabric.StaticCanvas.prototype.setHeight}})();var DEBUG=true;(function(a){a.rgb2hex=function(b){if(!b){return"#FFFFFF"}var d=toString(b).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function c(e){return("0"+parseInt(e).toString(16)).slice(-2)}if(d){return"#"+c(d[1])+c(d[2])+c(d[3])}else{return b}};a.hexLuminance=function(f,b){f=String(f).replace(/[^0-9a-f]/gi,"");if(f.length<6){f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]}b=b||0;var d="#",g,e;for(e=0;e<3;e++){g=parseInt(f.substr(e*2,2),16);g=Math.round(Math.min(Math.max(0,g+(g*b)),255)).toString(16);d+=("00"+g).substr(g.length)}return d}})(this);(function(a){var b={};a.__=b;b.log=function(c){if(window.console===undefined){return}var e=new Date();console.log("UTC "+e.getUTCHours()+":"+e.getUTCMinutes()+":"+e.getUTCSeconds()+"."+e.getUTCMilliseconds()+" > "+c)};b.loadImg=function(e,c){var d=new Image();d.onload=function(){if(typeof c==="function"){c(d)}};d.src=e};b.loadAudio=function(e,d){var c=typeof Audio!=="undefined"?new Audio():null;var f=function(){if(typeof d==="function"){d(c)}};if(c===null){f()}else{c.addEventListener("canplay",f,false);c.onerror=f;c.onstalled=f;c.onsuspend=f;c.src=e}};b.loaderAsync=function(g,c){var d=g.length;var f=0;var e=function(j){f++;if(f===d){if(typeof c==="function"){c()}}};var i=function(){if(this.match(/(\.ogg|\.mp3|\.wav|\.acc)$/gi)){b.loadAudio(this);e()}else{b.loadImg(this,e)}};$(g).each(i)};b.loaderSync=function(g,c){var e=g.slice();var d=e.length;if(e.length>0){var f=e.pop();if(f.match(/(\.ogg|\.mp3|\.wav|\.acc)$/gi)){b.loadAudio(f);b.loaderSync(e,c)}else{b.loadImg(f,function(){b.loaderSync(e,c)})}}else{if(typeof c==="function"){c()}}}})(this);(function(b){var a={};a.bgPresets={"wooden floor":"http://static.taably.s3.amazonaws.com/resources/backgrounds/floor_render.png","dark wood":"http://fc08.deviantart.net/fs70/i/2011/127/b/d/black_wood_background_by_egosumpotens-d3fst0k.jpg","blue tiles":"http://www.featurepics.com/FI/Thumb300/20061229/Grey-Slate-Tiles-Background-176869.jpg","green grass":"http://image.shutterstock.com/display_pic_with_logo/111031/111031,1279263404,1/stock-photo-green-felt-background-57238999.jpg",getDefault:function(){return{name:"wooden floor",url:this["wooden floor"]}}};a.table={};a.table.new_3d={css:"btn-new-3d-table-png",name:"new_3d",img:"http://static.taably.s3.amazonaws.com/resources/tables/new_3d_table.png",width:1070,height:670,ellipse_rx:315,ellipse_ry:140,ellipse_cx:535,ellipse_cy:184,color:"#30580f",logo_url:"http://www.deucescracked.com/images/logo.png",logo_width:342,logo_height:82};a.table.old_3d={css:"btn-old-3d-table-png",name:"old_3d",img:"http://static.taably.s3.amazonaws.com/resources/tables/old_3d_table.png",width:800,height:468,ellipse_rx:312,ellipse_ry:150,ellipse_cx:398,ellipse_cy:172,color:"#30580f"};a.table.old_thin={css:"btn-thin-2d-table-png",name:"old_thin",img:"http://static.taably.s3.amazonaws.com/resources/tables/old_thin_table.png",width:800,height:477,rect_x:56,rect_y:25,rect_width:678,rect_height:330,rect_r:168,color:"#30580f"};a.table.old_std={css:"btn-old-2d-table-png",name:"old_std",img:"http://static.taably.s3.amazonaws.com/resources/tables/old_std_table.png",width:800,height:477,rect_x:47,rect_y:18,rect_width:704,rect_height:346,rect_r:180,color:"#30580f"};if(!b.m3){b.m3={}}b.m3.dd=a})(this);(function(b){if(!fabric){return}fabric.Canvas.prototype.roundRect=function(c,g,d,e,f){if(d<2*f){f=d/2}if(e<2*f){f=e/2}this.beginPath();this.moveTo(c+f,g);this.arcTo(c+d,g,c+d,g+e,f);this.arcTo(c+d,g+e,c,g+e,f);this.arcTo(c,g+e,c,g,f);this.arcTo(c,g,c+d,g,f);this.closePath();return this};fabric.Canvas.prototype.findTarget=(function(c){return function(){var d=c.apply(this,arguments);if(d){if(this._hoveredTarget!==d){this.fire("object:over",{target:d});if(this._hoveredTarget){this.fire("object:out",{target:this._hoveredTarget})}this._hoveredTarget=d}}else{if(this._hoveredTarget){this.fire("object:out",{target:this._hoveredTarget});this._hoveredTarget=null}}return d}})(fabric.Canvas.prototype.findTarget);var a=function(c,f,g){var l,m,d,i;var e=this;this._initialize=function(t,p,q){if(typeof p!=="undefined"){var s=JSON.parse(p);$(document).trigger("tabledesigner:jsonParsed",s);if(q&&m){m.setWidth(s.tableDesignerMeta.width);m.setHeight(s.tableDesignerMeta.height)}this.$el.attr("width",s.tableDesignerMeta.width);this.$el.attr("height",s.tableDesignerMeta.height);if(q){l.clear();m.clear();delete d,i;m.loadFromJSON(p,o)}else{m=new fabric.Canvas(t,{selection:false,renderOnAddition:false});m.backgroundColor="#222"}var o=function(){_.each(s.tableDesignerObjects,function(v,u){l.set(v,m.getObjects()[u])});d=s.tableDesignerMeta.tableData;l.table.lockRotation=l.table.lockMovementX=true;l.table.selectable=false;l.felt.lockRotation=l.felt.lockMovementX=true;l.feltDragger.lockRotation=l.feltDragger.lockMovementX=true;l.feltDragger.set({borderColor:"#ccc",cornerColor:"#ccc",cornersize:7});i=s.tableDesignerMeta.bgData;switch(i.type){case"gradient":e.setBackgroundGrad(i.options);break;case"radient":e.setBackgroundRad(i.options);break;default:}if(!q){n()}if(typeof g==="function"){g.call()}};preloadImgs=[];_.each(s.objects,function(u){if(u.type==="image"){preloadImgs.push(u.src)}});__.loaderAsync(preloadImgs,function(){m.loadFromJSON(p,o)})}else{m=new fabric.Canvas(t,{selection:false,renderOnAddition:false});m.backgroundColor="#222";m.HOVER_CURSOR="pointer";l.set("bgRect",new fabric.Rect({fill:"#111",left:m.getCenter().left,top:m.getCenter().top,width:m.width,height:m.height}));i={type:"color",options:{color:"#111"}};l.bgRect.selectable=false;m.add(l.bgRect);n();if(typeof g==="function"){g()}}};l={set:function(o,p){p.tableDesignerType=o;this[o]=p},clear:function(o){m.remove(this[o]);delete this[o]}};var k=function(o){if(l.table){m.remove(l.table)}if(l.felt){m.remove(l.felt)}if(l.feltDragger){m.remove(l.feltDragger)}if(d.ellipse_rx){feltOptions={left:parseInt(m.width/2),top:(parseInt(m.height/2)),rx:d.ellipse_rx,ry:d.ellipse_ry,fill:d.color,};l.set("felt",new fabric.Ellipse(feltOptions));l.set("feltDragger",new fabric.Ellipse(feltOptions).setOpacity(0));l.set("table",o.set({left:parseInt(m.width/2),top:parseInt(m.height/2+d.height/2-d.ellipse_cy)}))}else{if(d.rect_y){feltOptions={left:parseInt(m.width/2),top:(parseInt(m.height/2)),width:d.rect_width,height:d.rect_height,rx:d.rect_r,ry:d.rect_r,fill:d.color,};l.set("felt",new fabric.Rect(feltOptions));l.set("feltDragger",new fabric.Rect(feltOptions).setOpacity(0));l.set("table",o.set({left:parseInt(m.width/2),top:parseInt(m.height/2+d.height/2-d.rect_y-d.rect_height/2)}))}}l.table.lockRotation=l.table.lockMovementX=true;l.table.selectable=false;l.felt.lockRotation=l.felt.lockMovementX=true;l.feltDragger.lockRotation=l.feltDragger.lockMovementX=true;l.feltDragger.set({borderColor:"#ccc",cornerColor:"#ccc",cornersize:7});m.add(l.felt);l.felt.setOpacity(1);l.felt.set(feltOptions);m.add(l.table);m.add(l.feltDragger);if(l.logo){m.bringToFront(l.logo);m.bringToFront(l.feltDragger);l.logo.set({top:l.felt.get("top"),left:l.felt.get("left")})}m.renderAll()};this.loadFromJSON=function(o){this._initialize(c,o,true)};this.toJSON=function(){var o=m.toJSON();o.tableDesignerObjects=[];_.each(m.getObjects(),function(p){o.tableDesignerObjects.push(p.tableDesignerType)});if(o.tableDesignerObjects.length!==m.getObjects().length){__.log("Serialization aborted. Object numbers don't match.");return}o.tableDesignerMeta={width:m.width,height:m.height,tableData:d,bgData:i};return o};this.setTable=function(o,p){d=o;fabric.Image.fromURL(d.img,function(q){k(q);p&&p()})};var n=function(){m.observe({"object:over":function(o){if(o.target.tableDesignerType&&o.target.tableDesignerType==="feltDragger"){l.feltDragger.setActive(true);m.renderAll()}},"object:out":function(o){if(o.target.isActive()){l.feltDragger.setActive(false);m.renderAll()}},"object:moving":function(p){var o=p.target.get("top");if(l.felt.type==="ellipse"){l.table.setTop(o+l.table.get("scaleY")*parseInt(l.table.height/2-d.ellipse_cy))}else{if(l.felt.type==="rect"){l.table.setTop(o+l.table.get("scaleY")*parseInt(l.table.height/2-d.rect_y-d.rect_height/2))}}l.felt.setTop(o);if(l.logo){l.logo.setTop(o)}},"object:scaling":function(p){obj=p.target;l.felt.set("scaleX",obj.scaleX);l.felt.set("scaleY",obj.scaleY);l.table.set("scaleX",obj.scaleX);l.table.set("scaleY",obj.scaleY);if(l.felt.type==="ellipse"){var o=l.felt.get("top")+obj.scaleY*parseInt(l.table.height/2-d.ellipse_cy)}else{if(l.felt.type==="rect"){var o=l.felt.get("top")+obj.scaleY*parseInt(l.table.height/2-d.rect_y-d.rect_height/2)}}l.table.set("top",o)},"object:modified":function(o){}})};this.setFeltColor=function(o){if(l.felt){l.felt.set("fill",o);m.renderAll()}};this.setBackgroundImg=function(o){i={type:"image",options:{url:o}};var p=function(q){l.clear("bgRad");q.set({left:parseInt(m.width/2),top:parseInt(m.height/2)});q.set("scaleX",m.width/q.width);q.set("scaleY",m.height/q.height);if(l.bgImg){m.remove(l.bgImg);l.set("bgImg",q);m.insertAt(l.bgImg,1)}else{l.set("bgImg",q);m.insertAt(l.bgImg,1)}l.bgImg.selectable=false;m.renderAll()};fabric.Image.fromURL(o,p)};this.setBackgroundColor=function(o){i={type:"color",options:{color:o}};l.clear("bgRad");l.bgRect.set("fill",o);l.clear("bgImg");m.renderAll()};this.setBackgroundGrad=function(s){i={type:"gradient",options:s};l.clear("bgRad");var q=s.color1;var p=s.color2;var o={x1:0,y1:0,x2:0,y2:"100%",colorStops:{0:q,1:p}};l.bgRect.setGradientFill(m.getContext(),o);l.clear("bgImg");m.renderAll()};this.setBackgroundRad=function(q){i={type:"radient",options:q};if(!l.bgRad){l.set("bgRad",new fabric.Rect({left:m.getCenter().left,top:m.getCenter().top,width:m.width,height:m.height}));l.bgRad.selectable=false;m.insertAt(l.bgRad,1)}var p=q.color1;var o=q.color2;var s=m.getContext().createRadialGradient(0,0,0,0,0,m.height/2);s.addColorStop(0,p);s.addColorStop(1,o);l.bgRect.set("fill",o);l.bgRad.fill=s;l.bgRad.set("scaleY",0.8);l.bgRad.set("scaleX",2);l.clear("bgImg");m.renderAll()};var j=function(o){l.set("logo",o);l.logo.set({left:parseInt(m.width/2),top:parseInt(m.height/2)});l.logo.selectable=false;m.add(l.logo);m.bringToFront(l.logo);m.bringToFront(l.feltDragger);m.renderAll()};this.setLogo=function(o){fabric.Image.fromURL(o,j)};this.removeLogo=function(){l.clear("logo");m.renderAll()};this.setLogoOpacity=function(p){var o=p;if(p<0){o=0}if(p>1){o=1}if(l.logo){l.logo.set("opacity",o)}m.renderAll()};this.setLogoScale=function(p){var o=p;if(p<0){o=0}if(l.logo){l.logo.scale(o)}m.renderAll()};this.getLogoOpacity=function(){return l.logo&&l.logo.get("opacity")};this.getLogoScale=function(){return l.logo&&l.logo.get("scaleX")};this.getTop=function(){return l.felt&&l.felt.get("top")};this.setTop=function(o){if(l.felt.type==="ellipse"){l.table.set("top",parseInt(o+l.table.height/2-d.ellipse_cy))}else{if(l.felt.type==="rect"){l.table.set("top",parseInt(o+l.table.height/2-d.rect_y-d.rect_height/2))}}l.felt.set("top",o);l.logo&&l.logo.set("top",o);l.feltDragger.set("top",o)};this.setSize=function(p,o){m.setHeight(o);m.setWidth(p);middleX=parseInt(m.width/2);middleY=parseInt(m.height/2);cObj={top:middleY,left:middleX,width:p,height:o};l.bgRect&&l.bgRect.set(cObj);if(typeof l.bgRad!=="undefined"){l.bgRad.set(cObj);var q=m.getContext().createRadialGradient(0,0,0,0,0,m.height/2);q.addColorStop(0,i.options.color1);q.addColorStop(1,i.options.color2);l.bgRad.fill=q;l.bgRad.set("scaleY",0.8);l.bgRad.set("scaleX",2)}if(typeof l.bgImg!=="undefined"){l.bgImg.set({top:middleY,left:middleX});l.bgImg.set({scaleX:p/l.bgImg.width});l.bgImg.set({scaleY:o/l.bgImg.height})}l.table&&l.table.set("left",middleX);l.felt&&l.felt.set("left",middleX);l.logo&&l.logo.set("left",middleX);l.feltDragger&&l.feltDragger.set("left",middleX);m.renderAll()};this.setOverlay=function(o,p){m.setOverlayImage(o,function(){m.renderAll();if(typeof p==="function"){p()}})};this.clearOverlay=function(){if(m.overlayImage){delete m.overlayImage;m.renderAll()}};this.$el=$("#"+c);if(typeof this.$el==="undefined"||this.$el.length===0){__.log("Canvas element not found. (id="+c+")");return}else{this._initialize(c,f)}};b.TableDesigner=function(e,c,d){return new a(e,c,d)}})(this);var CryptoJS=CryptoJS||function(w,d){var x={},u=x.lib={},t=u.Base=function(){function f(){}return{extend:function(i){f.prototype=this;var j=new f;i&&j.mixIn(i);j.$super=this;return j},create:function(){var i=this.extend();i.init.apply(i,arguments);return i},init:function(){},mixIn:function(i){for(var j in i){i.hasOwnProperty(j)&&(this[j]=i[j])}i.hasOwnProperty("toString")&&(this.toString=i.toString)},clone:function(){return this.$super.extend(this)}}}(),v=u.WordArray=t.extend({init:function(i,f){i=this.words=i||[];this.sigBytes=f!=d?f:4*i.length},toString:function(f){return(f||c).stringify(this)},concat:function(i){var f=this.words,l=i.words,k=this.sigBytes,i=i.sigBytes;this.clamp();if(k%4){for(var j=0;j<i;j++){f[k+j>>>2]|=(l[j>>>2]>>>24-8*(j%4)&255)<<24-8*((k+j)%4)}}else{if(65535<l.length){for(j=0;j<i;j+=4){f[k+j>>>2]=l[j>>>2]}}else{f.push.apply(f,l)}}this.sigBytes+=i;return this},clamp:function(){var i=this.words,f=this.sigBytes;i[f>>>2]&=4294967295<<32-8*(f%4);i.length=w.ceil(f/4)},clone:function(){var f=t.clone.call(this);f.words=this.words.slice(0);return f},random:function(i){for(var f=[],j=0;j<i;j+=4){f.push(4294967296*w.random()|0)}return v.create(f,i)}}),s=x.enc={},c=s.Hex={stringify:function(i){for(var f=i.words,i=i.sigBytes,l=[],k=0;k<i;k++){var j=f[k>>>2]>>>24-8*(k%4)&255;l.push((j>>>4).toString(16));l.push((j&15).toString(16))}return l.join("")},parse:function(i){for(var f=i.length,k=[],j=0;j<f;j+=2){k[j>>>3]|=parseInt(i.substr(j,2),16)<<24-4*(j%8)}return v.create(k,f/2)}},e=s.Latin1={stringify:function(i){for(var f=i.words,i=i.sigBytes,k=[],j=0;j<i;j++){k.push(String.fromCharCode(f[j>>>2]>>>24-8*(j%4)&255))}return k.join("")},parse:function(i){for(var f=i.length,k=[],j=0;j<f;j++){k[j>>>2]|=(i.charCodeAt(j)&255)<<24-8*(j%4)}return v.create(k,f)}},b=s.Utf8={stringify:function(i){try{return decodeURIComponent(escape(e.stringify(i)))}catch(f){throw Error("Malformed UTF-8 data")}},parse:function(f){return e.parse(unescape(encodeURIComponent(f)))}},g=u.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=v.create();this._nDataBytes=0},_append:function(f){"string"==typeof f&&(f=b.parse(f));this._data.concat(f);this._nDataBytes+=f.sigBytes},_process:function(j){var i=this._data,o=i.words,n=i.sigBytes,m=this.blockSize,l=n/(4*m),l=j?w.ceil(l):w.max((l|0)-this._minBufferSize,0),j=l*m,n=w.min(4*j,n);if(j){for(var k=0;k<j;k+=m){this._doProcessBlock(o,k)}k=o.splice(0,j);i.sigBytes-=n}return v.create(k,n)},clone:function(){var f=t.clone.call(this);f._data=this._data.clone();return f},_minBufferSize:0});u.Hasher=g.extend({init:function(){this.reset()},reset:function(){g.reset.call(this);this._doReset()},update:function(f){this._append(f);this._process();return this},finalize:function(f){f&&this._append(f);this._doFinalize();return this._hash},clone:function(){var f=g.clone.call(this);f._hash=this._hash.clone();return f},blockSize:16,_createHelper:function(f){return function(i,j){return f.create(j).finalize(i)}},_createHmacHelper:function(f){return function(i,j){return a.HMAC.create(f,j).finalize(i)}}});var a=x.algo={};return x}(Math);(function(){var b=CryptoJS,a=b.lib.WordArray;b.enc.Base64={stringify:function(i){var m=i.words,l=i.sigBytes,o=this._map;i.clamp();for(var i=[],j=0;j<l;j+=3){for(var n=(m[j>>>2]>>>24-8*(j%4)&255)<<16|(m[j+1>>>2]>>>24-8*((j+1)%4)&255)<<8|m[j+2>>>2]>>>24-8*((j+2)%4)&255,k=0;4>k&&j+0.75*k<l;k++){i.push(o.charAt(n>>>6*(3-k)&63))}}if(m=o.charAt(64)){for(;i.length%4;){i.push(m)}}return i.join("")},parse:function(i){var i=i.replace(/\s/g,""),n=i.length,m=this._map,p=m.charAt(64);p&&(p=i.indexOf(p),-1!=p&&(n=p));for(var p=[],j=0,o=0;o<n;o++){if(o%4){var l=m.indexOf(i.charAt(o-1))<<2*(o%4),k=m.indexOf(i.charAt(o))>>>6-2*(o%4);p[j>>>2]|=(l|k)<<24-8*(j%4);j++}}return a.create(p,j)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(a){var b=function(j){var d=$("#"+j);if(!d){__.log("ImageSearcher error : container element not found : "+j);return}var c="TdKrIK+1PbXYwsTDjzvfNV4dASgUnejA+2My7gQ6PEY=";var f=[];var g=0;var i=4;var k=this;var e=function(o,n,m){var l=function(p){cCont=$("div.canvas-container");if($("#search-cont").length===0){cCont.append('<div class="search-results" id="search-cont"><div id="close-search">&times;</div><div class="btn-arrow-left-png btn-search-nav-left"></div><div class="btn-arrow-right-png btn-search-nav-right"></div></div>');$("#close-search").click(function(){$("#search-cont").remove()});$(".btn-search-nav-right").click(function(){k.showNext()});$(".btn-search-nav-left").click(function(){k.showPrev()})}sCont=$("#search-cont");if($("#search-cont").children().filter(".search-result").length>=4){$($("#search-cont").children().filter(".search-result")[0]).remove()}sCont.append('<div class="search-result" target_url="'+n+'"></div>');$('[target_url="'+n+'"]').css("background-image","url("+o+")");$('[target_url="'+n+'"]').click(function(){var q=$(this).attr("target_url");__.log("Clicked on result : "+q);showLoader();var s=function(){$(document).trigger("table_bg:update",q)};__.loadImg($(this).attr("target_url"),s)})};__.loadImg(o,l)};this.ImageSearch=function(n,o){var l=40;var o=o||0;if(!n){return}var m="https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query=%27"+n+"%27&Market=%27en-US%27&Adult=%27Off%27&$top="+l+"&$skip="+o+"&$format=JSON";$.ajax({url:m,dataType:"json",beforeSend:function(s){var q=CryptoJS.enc.Latin1.parse("ignored:"+c);var p=CryptoJS.enc.Base64.stringify(q);s.setRequestHeader("Authorization","Basic "+p)},error:function(s,p,q){__.log("Image search API ERROR : "+q)},success:function(p){hideLoader();res=p.d.results;length=res.length;f.length=0;g=0;for(var q=0;q<length;q++){if(q<4){e(res[q].Thumbnail.MediaUrl,res[q].MediaUrl,q)}f.push({thumb_url:res[q].Thumbnail.MediaUrl,url:res[q].MediaUrl,index:q})}}})};this.showNext=function(){if(g+8<=f.length){for(var l=0;l<i;l++){r=f[g+i+l];e(r.thumb_url,r.url,r.index)}g+=i}};this.showPrev=function(){if(g-i>=0){for(var l=0;l<i;l++){r=f[g-i+l];e(r.thumb_url,r.url,r.index)}g-=i}};DisplayResults=function(l){var o=l.SearchResponse.Image.Results;var s=l.SearchResponse.Image.Offset;var m=o.length;var p=l.SearchResponse.Image.Total;var q=l.SearchResponse.Query.SearchTerms;__.log("Search Completed. Grabbing "+(s+1)+" to "+(s+m)+" of "+p+" total results.");for(var n=0;n<o.length;++n){if(n<4){M3.AddImageResult(o[n].Thumbnail.Url,o[n].MediaUrl,n)}}}};a.ImageSearcher=b}(this));showLoader=function(){$(".loader").show()};hideLoader=function(){$(".loader").hide()};$.fn.getHexBackgroundColor=function(){var a=$(this).css("background-color");if(!a){return"#FFFFFF"}var c=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function b(d){return("0"+parseInt(d).toString(16)).slice(-2)}if(c){return"#"+b(c[1])+b(c[2])+b(c[3])}else{return a}};var TABLE_DRAG_EVENT="tabledrag";var CHANGE_FELT_COLOR="taably.felt.color";var CHANGE_BG_COLOR="taably.bg.color";var TABLE_RESIZE_EVENT="tableresize";var CLASS_ROOM_SELECTOR=".room-selector";var CLASS_BG_SELECTOR=".bg-selector";var CLASS_TABLE_SELECTOR=".table-selector";var ID_TABLE_SEL_GROUP="#table-selector-group";var ID_BG_URL_TOGGLE="#background-url-toggle";var ID_BG_URL="#background-url";var ID_LOGO_URL_TOGGLE="#logo-url-toggle";var ID_LOGO_URL="#logo-url";var ID_TABLE_COLOR_PICKER="#table-color-picker";var ID_BG_COLOR_PICKER_I="#bg-color-picker-1";var ID_BG_COLOR_PICKER_II="#bg-color-picker-2";var CLASS_BG_COLOR_PRESET=".bg-color-preset";var CLASS_TABLE_COLOR_PRESET=".table-color-preset";var ID_SVG_CANVAS_WRAPPER="#canvas-wrapper";var ID_CANVAS_HIDDEN="hidden-canvas";var ID_SVG_CANVAS="#svg-canvas";var ID_DOWNLOAD_LAYOUT_BTN="#download-layout";var ID_IMG_SEARCH_BTN="#img-search-btn";var ID_IMG_SEARCH_INPUT="#img-search-input";var TAG_SEARCH_ITEM="search-item";var ID_BG_PRESET_SEL="#bg-preset-select";window.onload=function(){var e=new ImageSearcher;$(document).on(CHANGE_FELT_COLOR,function(s,q){if(o){o.setFeltColor(q.color)}return false});var f=function(){var q=$(this).getHexBackgroundColor();$(ID_TABLE_COLOR_PICKER).miniColors("value",q)};$(CLASS_TABLE_COLOR_PRESET).click(f);var i=function(){var q=$(this).getHexBackgroundColor();$(ID_BG_COLOR_PICKER_I).miniColors("value",q);$(ID_BG_COLOR_PICKER_II).miniColors("value",hexLuminance(q,-0.7));$(document).trigger(CHANGE_BG_COLOR,{})};$(CLASS_BG_COLOR_PRESET).click(i);var n=function(u,t){var s=$(ID_BG_COLOR_PICKER_I).val();var q=$(ID_BG_COLOR_PICKER_II).val();var v=$(CLASS_BG_SELECTOR).filter(".active").attr("value");switch(v){case"color":if(o){o.setBackgroundColor(s)}break;case"radient":if(o){o.setBackgroundRad({color1:s,color2:q})}break;case"gradient":if(o){o.setBackgroundGrad({color2:q,color1:s})}break}};$(document).on(CHANGE_BG_COLOR,n);$(ID_BG_COLOR_PICKER_I).miniColors({change:function(s,q){$(document).trigger(CHANGE_BG_COLOR)}});$(ID_BG_COLOR_PICKER_II).miniColors({change:function(s,q){$(document).trigger(CHANGE_BG_COLOR)}});$(ID_TABLE_COLOR_PICKER).miniColors({change:function(s,q){context={color:s};$(document).trigger(CHANGE_FELT_COLOR,context)}});var m=function(){hideLoader();var v=$(this).attr("value");$(CLASS_BG_SELECTOR).removeClass("active");$(this).addClass("active");var s=$(ID_BG_COLOR_PICKER_I).val();var q=$(ID_BG_COLOR_PICKER_II).val();switch(v){case"color":o.setBackgroundColor(s);break;case"gradient":o.setBackgroundGrad({color1:s,color2:q});break;case"radient":if(o){o.setBackgroundRad({color1:s,color2:q})}break;case"image":var u=$(ID_BG_PRESET_SEL).children(":selected");var t=u.attr("url");o&&o.setBackgroundImg(t);break;default:__.log("on_bg_selector default value = "+v);break}};$(CLASS_BG_SELECTOR).click(m);var a=function(q){hideLoader();$(CLASS_BG_SELECTOR).removeClass("active");$(CLASS_BG_SELECTOR).filter('[value="image"]').addClass("active");o.setBackgroundImg(q.src)};var g=function(s,q){a({src:q})};$(document).on("table_bg:update",g);var c=function(){if(!$(ID_BG_URL).val()){return}var t=$(this).children("i");if(t.attr("class")==="icon-ok"){t.attr("class","icon-remove");var q=$(ID_BG_URL).val();showLoader();__.loadImg(q,a)}else{t.attr("class","icon-ok");$(this).prev().val("");var s=$(CLASS_BG_SELECTOR).filter(function(u){return u==0});m.call(s)}};$(ID_BG_URL_TOGGLE).click(c);var j=function(q){hideLoader();if(o){o.setLogo(q.src)}};var l=function(){if(!$(ID_LOGO_URL).val()){return}var s=$(this).children("i");if(s.attr("class")==="icon-ok"){s.attr("class","icon-remove");var q=$(ID_LOGO_URL).val();showLoader();__.loadImg(q,j)}else{s.attr("class","icon-ok");$(this).prev().val("");o.removeLogo()}};$(ID_LOGO_URL_TOGGLE).click(l);var p=function(){$(CLASS_TABLE_SELECTOR).removeClass("active");$(this).addClass("active");showLoader();var q=this;var s=function(){var u=o.getTop();var t=function(){u&&o.setTop(u);o.setFeltColor($(ID_TABLE_COLOR_PICKER).val())};o&&o.setTable(m3.dd.table[$(q).attr("name")],t);hideLoader()};__.loadImg(m3.dd.table[$(this).attr("name")].img,s)};$("#opacity-minus").click(function(){var q=o.getLogoOpacity()-0.05;if(q<0){q=0}o.setLogoOpacity(q);$("#opacity-label").text("opacity "+(Math.floor(q*100)).toString()+"%")});$("#opacity-plus").click(function(){var q=o.getLogoOpacity()+0.05;if(q>1){q=1}o.setLogoOpacity(q);$("#opacity-label").text("opacity "+(Math.floor(q*100)).toString()+"%")});$("#scale-minus").click(function(){var q=o.getLogoScale()-0.02;if(q<0){opacity=0}o.setLogoScale(q);$("#scale-label").text("scale "+(Math.floor(q*100)).toString()+"%")});$("#scale-plus").click(function(){var q=o.getLogoScale()+0.02;o.setLogoScale(q);$("#scale-label").text("scale "+(Math.floor(q*100)).toString()+"%")});$(ID_IMG_SEARCH_BTN).click(function(){showLoader();var q=$(ID_IMG_SEARCH_INPUT).val();if(typeof String.prototype.trim==="function"){q=q.trim()}e.ImageSearch(q)});var k=$(ID_TABLE_SEL_GROUP);for(item in m3.dd.table){if(m3.dd.table.hasOwnProperty(item)){k.append('<div class="btn table-selector style-selector" name="'+item+'"><div class="'+m3.dd.table[item].css+'"></div></div>')}}$(CLASS_TABLE_SELECTOR).click(p);var d=$(ID_BG_PRESET_SEL);_.each(m3.dd.bgPresets,function(q,s){if(typeof q==="string"){d.append('<option url="'+q+'">'+s+"</option>")}});d.change(function(){var s=$(this).children(":selected");var q=s.attr("url");if(!q){return}showLoader();__.loadImg(q,a)});$(document).on("tabledesigner:jsonParsed",function(v,w){var u=w.objects[_.indexOf(w.tableDesignerObjects,"felt")].fill;$(ID_TABLE_COLOR_PICKER).miniColors("value",u);var y=w.tableDesignerMeta.tableData.name;$(CLASS_TABLE_SELECTOR).filter(function(B){$(this).removeClass("active");if($(this).attr("name")===y){$(this).addClass("active")}});var s=w.tableDesignerMeta.bgData.type;var A=color2="#222";$(CLASS_BG_SELECTOR).filter(function(B){$(this).removeClass("active");if($(this).attr("value")===s){$(this).addClass("active")}});switch(s){case"color":A=color2=w.objects[_.indexOf(w.tableDesignerObjects,"bgRect")].fill;break;case"gradient":A=w.tableDesignerMeta.bgData.options.color1;color2=w.tableDesignerMeta.bgData.options.color2;break;case"radient":A=w.tableDesignerMeta.bgData.options.color1;color2=w.tableDesignerMeta.bgData.options.color2;break;case"image":A=color2=w.objects[_.indexOf(w.tableDesignerObjects,"bgRect")].fill;break;default:break}$(ID_BG_COLOR_PICKER_I).miniColors("value",A);$(ID_BG_COLOR_PICKER_II).miniColors("value",color2);var q=_.indexOf(w.tableDesignerObjects,"logo");if(q!==-1){$(ID_LOGO_URL).val(w.objects[q].src);var x=$(ID_LOGO_URL_TOGGLE).children("i");x.attr("class","icon-remove");var z=parseFloat(w.objects[q].scaleX);var t=parseFloat(w.objects[q].opacity);$("#opacity-label").text("opacity "+(Math.floor(t*100)).toString()+"%");$("#scale-label").text("scale "+(Math.floor(z*100)).toString()+"%")}});$(CLASS_ROOM_SELECTOR).click(function(){$(CLASS_ROOM_SELECTOR).removeClass("active");$(this).addClass("active");o&&o.setSize(parseInt($(this).data("width")),parseInt($(this).data("height")));showLoader();o.setOverlay(window.STATIC_URL+"img/overlay/"+$(this).attr("data-room")+"_overlay.png",hideLoader)});$(CLASS_ROOM_SELECTOR).hover(function(){if($(this).hasClass("active")){showLoader();o&&o.setOverlay(window.STATIC_URL+"img/overlay/"+$(this).attr("data-room")+"_overlay.png",hideLoader)}},function(){if($(this).hasClass("active")){o&&o.clearOverlay()}});showLoader();var o;var b=function(q){o=TableDesigner("designer-canvas",q,hideLoader);$(".canvas-container").append('<div class="loader"><img src="'+window.STATIC_URL+'img/blue_spinner.gif"/></div>')};if(typeof window.layout!=="undefined"&&typeof window.layout.data==="string"){$("#share-layout-name").val(window.layout.name);b(window.layout.data)}else{$.getJSON("/api/v0/layout/get/default/",function(q){b(q.data);$("#share-layout-name").val(q.name);window.layout=q})}$("#share-layout-btn").click(function(){var q=$("#share-layout-name").val();var s=function(t){window.history.pushState({layoutUrl:t.url,data:JSON.stringify(o)},"Taably - "+t.name,t.url)};$.post("/api/v0/layout/add/",JSON.stringify({data:JSON.stringify(o),name:q}),s,"json")});$(window).on("popstate",function(q){if(q.originalEvent.state&&typeof q.originalEvent.state.data==="string"){$("#share-layout-name").val(q.originalEvent.state.name);o.loadFromJSON(q.originalEvent.state.data)}});$(ID_DOWNLOAD_LAYOUT_BTN).click(function(){if($(CLASS_ROOM_SELECTOR+".active").length===1){var q=$(CLASS_ROOM_SELECTOR+".active").attr("data-room")}else{var q="ipoker"}$('<form action="/api/v0/layout/render/" method="POST"><input type="hidden" name="data" value="'+escape(JSON.stringify(o))+'"><input type="hidden" name="name" value="'+escape(window.layout.name)+'"><input type="hidden" name="room" value="'+escape(q)+'"></form>').appendTo("body").submit().remove()})};